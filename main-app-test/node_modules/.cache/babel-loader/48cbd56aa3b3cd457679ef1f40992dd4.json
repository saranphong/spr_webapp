{"ast":null,"code":"import $ from \"jquery\";\nimport axios from \"@/axios\";\nimport func from \"../func.js\";\nimport datepicker from \"@/Mycomponents/Mydatepicker.vue\";\nexport default {\n  components: {\n    datepicker\n  },\n\n  data() {\n    return {\n      chk_findproduct_page: false,\n      func: func,\n      page: \"1\",\n      cust_name: \"\",\n      cust_addr: \"\",\n      cust_tel: \"\",\n      cust_addr_edit: \"\",\n      cust_tel_edit: \"\",\n      operator: \"\",\n      //--- ตรวจเช็คว่ากดเพิ่มข้อมูลใหม่ หรือแก้ไขข้อมูล 'new' or 'edit' Data\n      fixcost_detail: \"\",\n      //--- เอาไว้แสดงภาพรวมให้ผู้ใช้ดูข้อมูลราคา\n      product_select: \"\",\n      //--- เอาไว้แสดงภาพรวมให้ผู้ใช้ดูข้อมูลราคา\n      import_detail_id: \"\",\n      set_product_price: \"\",\n      //---**เลือกราคาจาก fixcost 1 = เงินสด / 2 = เงินสด+จัดส่ง\n      manufac_id_temp: \"\",\n      check_manufac: [],\n      check_bill_header: [],\n      customer_data: [],\n      rubber_size: [],\n      rubber_style: [],\n      rubber_brand: [],\n      product_cost: [],\n      import_detail_list: [],\n      product_list_data: [],\n      product_detail: [],\n      import_header: {\n        import_id: \"\",\n        import_book_id: \"\",\n        import_book_no: \"\",\n        import_user: \"\",\n        cust_auto_id: \"\",\n        job_type_id: \"\",\n        pay_type: \"\",\n        import_date: \"\",\n        import_status: \"\"\n      },\n      import_header_edit: {\n        import_id: \"\",\n        import_book_id: \"\",\n        import_book_no: \"\",\n        import_user: \"\",\n        cust_auto_id: \"\",\n        job_type_id: \"\",\n        pay_type: \"\",\n        import_date: \"\",\n        import_status: \"\"\n      },\n      import_detail: {\n        import_id: \"\",\n        rub_brand_id: \"\",\n        manufac_id: \"\",\n        rub_grade_id: 10,\n        product_list_id: \"\",\n        product_price: 0,\n        import_detail_status: \"\"\n      },\n      find_data: {\n        find_production_type: \"0\",\n        find_size: \"0\",\n        find_style: \"0\",\n        SQL_Code: \"\"\n      }\n    };\n  },\n\n  mounted() {\n    let import_book_id = sessionStorage.getItem(\"import_book_id\");\n    let import_book_no = sessionStorage.getItem(\"import_book_no\");\n\n    if (import_book_id != null && import_book_no != null) {\n      this.chkImportHeader(import_book_id, import_book_no);\n    } else {\n      let import_id = sessionStorage.getItem(\"import_id\");\n      this.import_detail.import_id = import_id;\n      this.chkImportHeaderById(import_id);\n      this.getImportDetail(import_id);\n    }\n  },\n\n  beforeUnmount() {\n    sessionStorage.removeItem(\"import_book_id\");\n    sessionStorage.removeItem(\"import_book_no\");\n    sessionStorage.removeItem(\"import_id\");\n  },\n\n  methods: {\n    async resetFindData() {\n      this.find_data = {\n        find_production_type: await \"0\",\n        find_size: await \"0\",\n        find_style: await \"0\"\n      };\n      this.findSizeByProductionType(\"0\");\n      this.findStyleBySize(\"0\");\n      await $(\"#size\").val(\"0\").trigger('change');\n      await $(\"#style\").val(\"0\").trigger('change');\n    },\n\n    getDate(val) {\n      this.import_header_edit.import_date = val;\n    },\n\n    findProductPage() {\n      this.chk_findproduct_page = !this.chk_findproduct_page;\n    },\n\n    showDatePicker_edit() {\n      let data = this.import_header_edit; // $(document).ready(() => {\n\n      $('#datepicker_edit').datepicker({\n        format: \"dd/mm/yyyy\",\n        autoclose: true,\n        toggleActive: true\n      });\n      $('#datepicker_edit').change(() => {\n        data.import_date = $('#datepicker_edit').val();\n      }); // });\n    },\n\n    onSelect_Brand() {\n      $(document).ready(() => {\n        let rec = this.import_detail;\n        $('#findBrand').select2({\n          theme: \"bootstrap-5\",\n          closeOnSelect: true,\n          width: '100%',\n          dropdownParent: $(\"#findBrand\").parent(),\n          placeholder: \"--- กรุณาเลือกยี่ห้อยาง ---\"\n        });\n        $('#findBrand').on('select2:select', e => {\n          let data = e.params.data;\n          rec.rub_brand_id = data.id;\n        });\n      });\n    },\n\n    onSelect_Cust() {\n      $(document).ready(() => {\n        let rec = this.import_header_edit;\n        $('#findcust').select2({\n          theme: \"bootstrap-5\",\n          closeOnSelect: true,\n          width: '100%',\n          dropdownParent: $(\"#findcust\").parent(),\n          placeholder: \"--- เลือกลูกค้า ---\"\n        });\n        $('#findcust').on('select2:select', e => {\n          let data = e.params.data;\n          rec.cust_auto_id = data.id;\n          this.getCustomerEdit(rec.cust_auto_id);\n        });\n      });\n    },\n\n    getUseData() {\n      this.getProductList();\n      this.getRubberBrand();\n      this.getRubberStyle();\n      this.onSelect_Brand();\n    },\n\n    async chkImportHeader(val1, val2) {\n      await axios.get(`billimport/search/${val1}/${val2}`).then(response => {\n        // this.check_bill_header = response.data;\n        this.import_header.import_id = response.data[0].import_id;\n        this.import_header.import_book_id = response.data[0].import_book_id;\n        this.import_header.import_book_no = response.data[0].import_book_no;\n        this.import_header.import_user = response.data[0].import_user;\n        this.import_header.cust_auto_id = response.data[0].cust_auto_id;\n        this.import_header.job_type_id = response.data[0].job_type_id;\n        this.import_header.pay_type = response.data[0].pay_type;\n        this.import_header.import_date = response.data[0].new_import_date;\n        this.import_header.import_status = response.data[0].import_status;\n        this.cust_name = response.data[0].customerName;\n        this.cust_addr = response.data[0].customerAddr;\n        this.cust_tel = response.data[0].customerTel;\n        this.set_product_price = response.data[0].priceType;\n        this.import_detail.import_id = response.data[0].import_id;\n        this.getImportDetail(this.import_header.import_id);\n      });\n    },\n\n    async chkImportHeaderById(val) {\n      await axios.get(`billimport/searchid/${val}`).then(response => {\n        this.import_header.import_id = response.data[0].import_id;\n        this.import_header.import_book_id = response.data[0].import_book_id;\n        this.import_header.import_book_no = response.data[0].import_book_no;\n        this.import_header.import_user = response.data[0].import_user;\n        this.import_header.cust_auto_id = response.data[0].cust_auto_id;\n        this.import_header.job_type_id = response.data[0].job_type_id;\n        this.import_header.pay_type = response.data[0].pay_type;\n        this.import_header.import_date = response.data[0].new_import_date;\n        this.import_header.import_status = response.data[0].import_status;\n        this.cust_name = response.data[0].customerName;\n        this.cust_addr = response.data[0].customerAddr;\n        this.cust_tel = response.data[0].customerTel;\n        this.set_product_price = response.data[0].priceType;\n      });\n    },\n\n    async updateImportHeader() {\n      if ((await confirm(\"ยืนยันบันทึกการแก้ไขข้อมูล\")) == true) {\n        this.import_header_edit.import_date = await this.func.convertDateToMySql(this.import_header_edit.import_date);\n        await axios.post(`billimport/update`, this.import_header_edit).then(() => {\n          this.chkImportHeaderById(sessionStorage.getItem(\"import_id\"));\n        }).catch(error => {\n          console.log(\"เกิดข้อผิดพลาดในการบันทึกข้อมูล \" + error);\n        }); // await this.chkImportHeaderById(sessionStorage.getItem(\"import_id\"));\n        // await this.getImportDetail(sessionStorage.getItem(\"import_id\"));\n\n        await func.hideModal(\"importHeaderEdit\"); // alert(sessionStorage.getItem(\"import_id\"))                \n      }\n    },\n\n    async newImportDetail() {\n      // Load ตารางราคา\n      await this.getProductCost();\n\n      if (this.import_header.import_book_id == null || this.import_header.import_book_no == null || this.import_header.import_date == null) {\n        alert('ข้อมูลหลักไม่ครบถ้วน.,กรุณาตรวจสอบ !!!'); // document.getElementById(\"book_id\").value = 'xxx';\n\n        await document.getElementById(\"book_id\").focus();\n        await document.getElementById(\"book_id\").select(); //document.getElementById(\"book_no\").disabled = true;             \n      } else {\n        await this.onSelect_Brand();\n        await this.getUseData(); // this.showModal('newImportDetail');\n\n        await func.showModal('newImportDetail2');\n      }\n    },\n\n    async saveImportDetail() {\n      // Start sub function --------------------------------------------------------\n      this.nextProcess = async () => {\n        if (this.operator == \"new\") {\n          if ((await confirm(\"ยืนยันการบันทึกรายการใหม่\")) == true) {\n            await axios.post(`billimport/detail/new`, this.import_detail).then(() => {\n              this.import_detail = {\n                import_id: this.import_header.import_id,\n                rub_brand_id: \"\",\n                manufac_id: \"\",\n                rub_grade_id: 10,\n                product_list_id: \"\",\n                product_price: 0,\n                import_detail_status: \"\"\n              };\n              this.product_select = \"\";\n            }).catch(error => {\n              console.log(\"พบข้อผิดผลาดในการแก้ไขข้อมูล \" + error);\n            });\n            this.func.hideModal(\"getProductToImportList\"); // this.page = 1;\n          }\n        } else {\n          if (confirm(\"ยืนยันการแก้ไขข้อมูล\") == true) {\n            await axios.post(`billimport/detail/update/${this.import_detail_id}`, this.import_detail).then(() => {\n              this.import_detail = {\n                import_id: this.import_header.import_id,\n                rub_brand_id: \"\",\n                manufac_id: \"\",\n                rub_grade_id: 10,\n                product_list_id: \"\",\n                product_price: 0,\n                import_detail_status: \"\"\n              };\n              this.product_select = \"\";\n            }).catch(error => {\n              console.log(\"พบข้อผิดผลาดในการแก้ไขข้อมูล \" + error);\n            });\n            this.page = 1;\n            this.func.hideModal(\"getProductToImportList\"); // await this.getImportDetail(this.import_header.import_id);\n          }\n        }\n\n        await this.getImportDetail(this.import_header.import_id);\n      }; // End sub function ----------------------------------------------------------\n      // Start first process เมื่อเรียกใช้งาน Method นี้ จะเริ่มทำงานที่บรรทีดด้านล่างนี้ก่อน\n\n\n      if ((await this.import_detail.manufac_id) == \"\" || (await this.import_detail.rub_brand_id) == \"\" || (await this.import_detail.fixcost_id) == \"\") {\n        await alert(\"กรุณากรอกข้อมูล หมายเลขยาง/ยี่ห้อยาง/รายการจากตารางราคา ให้ครบถ้วน!!!\");\n        await func.setFocus(\"manufac_id\");\n      } else {\n        await this.checkImportDetail(this.import_detail.manufac_id); // await alert(\"TEMP: \"+this.manufac_id_temp);\n        // ตรวจสอบว่าหมายเลขยาง(จากโครง) มีการเรียกใช้หรือยัง\n\n        if ((await this.check_manufac.length) == 0) {\n          this.nextProcess(); // เรียกใช้งาน Sub function ที่อยู่ด้านบน \n        } else if ((await this.check_manufac.length) == 1 && (await this.manufac_id_temp) == this.import_detail.manufac_id) {\n          this.nextProcess(); // เรียกใช้งาน Sub function ที่อยู่ด้านบน\n        } else {\n          alert(\"หมายเลขยางนี้มีการนำเข้าระบบแล้ว กรุณาตรวจสอบ !!!\");\n          func.setFocus(\"manufac_id\");\n        }\n      }\n    },\n\n    async checkImportDetail(val) {\n      await axios.get(`billimport/detail/checkimportdetail/${val}`).then(response => {\n        this.check_manufac = response.data;\n      });\n    },\n\n    async checkOperator(op, rec) {\n      if (op == \"new\") {\n        // await this.getProductCost(this.import_header.job_type_id);\n        await this.getUseData();\n        this.operator = await op;\n        this.page = await 2;\n      } else if (op == \"edit\") {\n        // await this.getProductCost(this.import_header.job_type_id);\n        await this.getUseData();\n        this.import_detail.rub_brand_id = await rec.rub_brand_id;\n        this.import_detail.manufac_id = await rec.manufac_id;\n        this.import_detail.rub_grade_id = await rec.rub_grade_id;\n        this.product_select = (await rec.production_type_name) + \" / \" + rec.rub_size_name + \" / \" + rec.rub_style_name;\n        this.import_detail.product_list_id = await rec.product_list_id;\n        this.import_detail_id = await rec.import_detail_id;\n        this.operator = await op;\n        this.page = await 2;\n      }\n\n      this.manufac_id_temp = await rec.manufac_id; // return op;\n    },\n\n    async getImportDetail(val) {\n      await axios.get(`billimport/detail/read/${val}`).then(response => {\n        this.import_detail_list = response.data;\n        $(document).ready(() => {\n          $(\"#showimportdetail\").DataTable({\n            // dom: 'Bfrtip',\n            // buttons: [\n            //     'print',                            \n            // ],\n            // \"order\": [[0, 'asc']],\n            \"scrollY\": '200px',\n            \"scorllX\": false,\n            \"bJQueryUI\": true,\n            \"sPaginationType\": \"full_numbers\",\n            \"bFilter\": false,\n            \"paging\": false,\n            \"scrollCollapse\": true,\n            \"rowReorder\": true,\n            \"destroy\": true,\n            \"bSort\": false,\n            \"language\": {\n              decimal: \"\",\n              emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n              info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n              // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n              infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\n              infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n              infoPostFix: \"\",\n              thousands: \",\",\n              lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n              loadingRecords: \"Loading...\",\n              processing: \"\",\n              search: \"ค้นหาข้อมูล:\",\n              zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\n              paginate: {\n                first: \"หน้าแรก\",\n                last: \"หน้าสุดท้าย\",\n                next: \"ต่อไป\",\n                previous: \"ย้อนกลับ\"\n              },\n              aria: {\n                sortAscending: \": activate to sort column ascending\",\n                sortDescending: \": activate to sort column descending\"\n              }\n            }\n          });\n        });\n      });\n    },\n\n    setValueImportHeaderEdit() {\n      let head = this.import_header;\n      let headE = this.import_header_edit;\n      headE.import_id = head.import_id;\n      headE.import_book_id = head.import_book_id;\n      headE.import_book_no = head.import_book_no;\n      headE.import_user = head.import_user;\n      headE.cust_auto_id = head.cust_auto_id;\n      headE.job_type_id = head.job_type_id;\n      headE.pay_type = head.pay_type;\n      headE.import_date = head.import_date;\n      headE.import_status = head.import_status;\n      this.cust_addr_edit = this.cust_addr;\n      this.cust_tel_edit = this.cust_tel;\n    },\n\n    async removeImportDetail(rec) {\n      if ((await confirm(\"ยืนยันการลบรายการ ?\")) == true) {\n        await axios.delete(`billimport/detail/delete/${rec}`).then(() => {\n          $(\"#showimportdetail\").DataTable().destroy();\n          this.getImportDetail(this.import_header.import_id);\n        }).catch(error => {\n          alert('ไม่สามารถลบข้อมูลได้ ' + error);\n        });\n      }\n    },\n\n    async getCustomer(val) {\n      await axios.get(`customer/findbyautoid/${val}`).then(response => {\n        // this.customer_data = response.data;\n        this.import_header = {\n          cust_auto_id: response.data[0].cust_auto_id\n        }; // **ในกรณีลูกค้าเป็น SPR จะเลือกใช้ประเภทงานเป็น \"ยางพร้อมโครง[job_type_id = 2]\"\n\n        if (response.data[0].cust_auto_id == 1) {\n          this.import_header.job_type_id = 2;\n        } else this.import_header.job_type_id = 1;\n\n        this.cust_name = response.data[0].customerName;\n        this.cust_addr = response.data[0].customerAddr;\n        this.cust_tel = response.data[0].customerTel;\n      });\n    },\n\n    async getCustomerEdit(val) {\n      await axios.get(`customer/findbyautoid/${val}`).then(response => {\n        // ตรวจสอบประเภทงาน ระหว่าง ค่าจ้าง / ยางพร้อมโครง\n        if (response.data[0].cust_auto_id == 1) {\n          this.import_header_edit.job_type_id = 2;\n        } else this.import_header_edit.job_type_id = 1; // -------------------------------------------------\n\n\n        this.cust_addr_edit = response.data[0].customerAddr;\n        this.cust_tel_edit = response.data[0].customerTel;\n      });\n    },\n\n    // infar data\n    async getCustomerAll() {\n      await axios.get(`customer/read`).then(response => {\n        this.customer_data = response.data;\n      });\n    },\n\n    getRubberSize() {\n      axios.get(`rubbersize/read`).then(response => {\n        this.rubber_size = response.data;\n      });\n    },\n\n    getRubberStyle() {\n      axios.get(`rubberstyle/read`).then(response => {\n        this.rubber_style = response.data;\n        $(document).ready(() => {\n          $('#style').select2({\n            theme: \"bootstrap-5\",\n            closeOnSelect: true,\n            width: '100%',\n            dropdownParent: $(\"#style\").parent()\n          });\n          $('#style').on('select2:select', e => {\n            let data = e.params.data;\n            this.find_data.find_style = data.id;\n          });\n        });\n      });\n    },\n\n    async findSizeByProductionType(val) {\n      await axios.get(`productlist/findsizebyproductiontype/${val}`).then(response => {\n        this.rubber_size = response.data;\n        $(document).ready(() => {\n          $('#size').select2({\n            theme: \"bootstrap-5\",\n            closeOnSelect: true,\n            width: '100%',\n            dropdownParent: $(\"#size\").parent()\n          });\n          $('#size').on('select2:select', e => {\n            let data = e.params.data;\n            this.find_data.find_size = data.id;\n            this.findStyleBySize(this.find_data.find_size);\n          });\n        });\n      });\n    },\n\n    async findStyleBySize(val) {\n      await axios.get(`productlist/findstylebysize/${val}`).then(response => {\n        this.rubber_style = response.data;\n        $(document).ready(() => {\n          $('#style').select2({\n            theme: \"bootstrap-5\",\n            closeOnSelect: true,\n            width: '100%',\n            dropdownParent: $(\"#style\").parent()\n          });\n          $('#style').on('select2:select', e => {\n            let data = e.params.data;\n            this.find_data.find_style = data.id;\n          });\n        });\n      });\n    },\n\n    async findSizeByStyle() {\n      await axios.post(`productlist/findstylebysize`, this.find_data).then(response => {\n        this.rubber_size = response.data;\n        $(document).ready(() => {\n          $('#size').select2({\n            theme: \"bootstrap-5\",\n            closeOnSelect: true,\n            width: '100%',\n            dropdownParent: $(\"#size\").parent()\n          });\n          $('#size').on('select2:select', e => {\n            let data = e.params.data;\n            this.find_data.find_size = data.id;\n          });\n        });\n      });\n    },\n\n    getRubberBrand() {\n      axios.get(`rubberbrand/read`).then(response => {\n        this.rubber_brand = response.data;\n      });\n    },\n\n    // ----- ชุดงานในการค้นหาข้อมูลสินค้า เพื่อเพิ่มลงในรายการใบรับ ------------------------------------------------------\n    setProductListDataTable() {\n      $(document).ready(() => {\n        $(\"#showProduct\").DataTable({\n          \"order\": [[0, 'asc']],\n          \"scrollY\": '150px',\n          \"scorllX\": false,\n          \"bJQueryUI\": true,\n          \"sPaginationType\": \"full_numbers\",\n          \"bFilter\": true,\n          \"paging\": false,\n          \"scrollCollapse\": true,\n          \"rowReorder\": true,\n          \"destroy\": true,\n          language: {\n            decimal: \"\",\n            emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n            info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n            // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n            infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\n            infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n            infoPostFix: \"\",\n            thousands: \",\",\n            lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n            loadingRecords: \"Loading...\",\n            processing: \"\",\n            search: \"ค้นหาข้อมูล:\",\n            zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\n            paginate: {\n              first: \"หน้าแรก\",\n              last: \"หน้าสุดท้าย\",\n              next: \"ต่อไป\",\n              previous: \"ย้อนกลับ\"\n            },\n            aria: {\n              sortAscending: \": activate to sort column ascending\",\n              sortDescending: \": activate to sort column descending\"\n            }\n          }\n        });\n      });\n    },\n\n    async getProductList() {\n      await axios.get(`productlist/read`).then(response => {\n        this.product_list_data = response.data; // $(\"#showProduct\").DataTable().destroy();\n\n        this.setProductListDataTable();\n      });\n    },\n\n    async startFindProduct() {\n      if (this.find_data.find_production_type == 0 && this.find_data.find_size == 0 && this.find_data.find_style == 0) {\n        alert(\"ไม่พบเงื่อนไขในการค้นหาข้อมูล!\");\n      } else {\n        if ((await this.find_data.find_production_type) > 0 && this.find_data.find_size > 0 && this.find_data.find_style > 0) {\n          this.find_data.SQL_Code = \"SELECT * FROM product_list, production_type, rubber_size, rubber_style \" + \"WHERE product_list.production_type_id = production_type.production_type_id \" + \"AND product_list.rub_size_id = rubber_size.rub_size_id AND product_list.rub_style_id = rubber_style.rub_style_id \" + \"AND product_list.production_type_id = \" + this.find_data.find_production_type + \" AND product_list.rub_size_id = \" + this.find_data.find_size + \" AND product_list.rub_style_id = \" + this.find_data.find_style + \" ORDER BY product_list.product_list_id\";\n        } else if ((await this.find_data.find_production_type) > 0 && this.find_data.find_size > 0) {\n          this.find_data.SQL_Code = \"SELECT * FROM product_list, production_type, rubber_size, rubber_style \" + \"WHERE product_list.production_type_id = production_type.production_type_id \" + \"AND product_list.rub_size_id = rubber_size.rub_size_id AND product_list.rub_style_id = rubber_style.rub_style_id \" + \"AND product_list.production_type_id = \" + this.find_data.find_production_type + \" AND product_list.rub_size_id = \" + this.find_data.find_size + \" ORDER BY product_list.product_list_id\";\n        } else if ((await this.find_data.find_production_type) > 0) {\n          this.find_data.SQL_Code = \"SELECT * FROM product_list, production_type, rubber_size, rubber_style \" + \"WHERE product_list.production_type_id = production_type.production_type_id \" + \"AND product_list.rub_size_id = rubber_size.rub_size_id AND product_list.rub_style_id = rubber_style.rub_style_id \" + \"AND product_list.production_type_id = \" + this.find_data.find_production_type + \" ORDER BY product_list.product_list_id\";\n        } // else {\n        //     this.find_data.SQL_Code = \"SELECT * FROM product_list, production_type, rubber_size, rubber_style \" +\n        //         \"WHERE product_list.production_type_id = production_type.production_type_id \" +\n        //         \"AND product_list.rub_size_id = rubber_size.rub_size_id AND product_list.rub_style_id = rubber_style.rub_style_id \" +                    \n        //         \"ORDER BY product_list.product_list_id\";\n        // }\n        // console.log(this.find_data.SQL_Code);\n\n\n        await axios.post(`productlist/find3f`, this.find_data).then(response => {\n          this.product_list_data = response.data; // console.log(response.data)\n\n          $(\"#showProduct\").DataTable().destroy();\n          this.setProductListDataTable();\n        });\n      }\n    },\n\n    // ----- end of ชุดงานในการค้นหาข้อมูลสินค้า เพื่อเพิ่มลงในรายการใบรับ ------------------------------------------------------\n    async getFixcost(rec) {\n      this.import_detail.fixcost_id = await rec.fixcost_id; // --- ตรวจเช็คประเภทราคา ---\n\n      if ((await this.import_header.pay_type) == 1) {\n        this.import_detail.product_price = rec.price1;\n      } else if ((await this.import_header.pay_type) == 2) {\n        this.import_detail.product_price = rec.price2;\n      } // if (await this.set_product_price == 1) {\n      //     this.import_detail.product_price = rec.price1;\n      // }\n      // else if (await this.set_product_price == 2) {\n      //     this.import_detail.product_price = rec.price2;\n      // }\n      // ------------------------\n\n\n      this.fixcost_detail = (await rec.job_type_name) + \" / \" + rec.production_type_name + \" / \" + rec.rub_size_name + \" / \" + rec.rub_style_name + \" / \" + rec.rub_grade_name + \" / \" + this.func.numFormat(this.import_detail.product_price);\n    },\n\n    getProduct(rec) {\n      this.product_select = rec.production_type_name + \" / \" + rec.rub_size_name + \" / \" + rec.rub_style_name;\n      this.import_detail.product_list_id = rec.product_list_id;\n    },\n\n    getProductDetail(val) {\n      axios.get(`productdetail/search/${val}`).then(response => {\n        this.product_detail = response.data;\n      });\n    },\n\n    getProductCost(val) {\n      axios.get(`productcost/readbyjobtype/${val}`).then(response => {\n        this.product_cost = response.data;\n        $(document).ready(() => {\n          $(\"#showProduct\").DataTable({\n            \"order\": [[0, 'asc']],\n            \"scrollY\": '200px',\n            \"scorllX\": false,\n            \"bJQueryUI\": true,\n            \"sPaginationType\": \"full_numbers\",\n            \"bFilter\": true,\n            \"paging\": false,\n            \"scrollCollapse\": true,\n            \"rowReorder\": true,\n            \"destroy\": true,\n            language: {\n              decimal: \"\",\n              emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n              info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n              // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n              infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\n              infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n              infoPostFix: \"\",\n              thousands: \",\",\n              lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n              loadingRecords: \"Loading...\",\n              processing: \"\",\n              search: \"ค้นหาข้อมูล:\",\n              zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\n              paginate: {\n                first: \"หน้าแรก\",\n                last: \"หน้าสุดท้าย\",\n                next: \"ต่อไป\",\n                previous: \"ย้อนกลับ\"\n              },\n              aria: {\n                sortAscending: \": activate to sort column ascending\",\n                sortDescending: \": activate to sort column descending\"\n              }\n            }\n          });\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["$","axios","func","datepicker","components","data","chk_findproduct_page","page","cust_name","cust_addr","cust_tel","cust_addr_edit","cust_tel_edit","operator","fixcost_detail","product_select","import_detail_id","set_product_price","manufac_id_temp","check_manufac","check_bill_header","customer_data","rubber_size","rubber_style","rubber_brand","product_cost","import_detail_list","product_list_data","product_detail","import_header","import_id","import_book_id","import_book_no","import_user","cust_auto_id","job_type_id","pay_type","import_date","import_status","import_header_edit","import_detail","rub_brand_id","manufac_id","rub_grade_id","product_list_id","product_price","import_detail_status","find_data","find_production_type","find_size","find_style","SQL_Code","mounted","sessionStorage","getItem","chkImportHeader","chkImportHeaderById","getImportDetail","beforeUnmount","removeItem","methods","resetFindData","findSizeByProductionType","findStyleBySize","val","trigger","getDate","findProductPage","showDatePicker_edit","format","autoclose","toggleActive","change","onSelect_Brand","document","ready","rec","select2","theme","closeOnSelect","width","dropdownParent","parent","placeholder","on","e","params","id","onSelect_Cust","getCustomerEdit","getUseData","getProductList","getRubberBrand","getRubberStyle","val1","val2","get","then","response","new_import_date","customerName","customerAddr","customerTel","priceType","updateImportHeader","confirm","convertDateToMySql","post","catch","error","console","log","hideModal","newImportDetail","getProductCost","alert","getElementById","focus","select","showModal","saveImportDetail","nextProcess","fixcost_id","setFocus","checkImportDetail","length","checkOperator","op","production_type_name","rub_size_name","rub_style_name","DataTable","decimal","emptyTable","info","infoEmpty","infoFiltered","infoPostFix","thousands","lengthMenu","loadingRecords","processing","search","zeroRecords","paginate","first","last","next","previous","aria","sortAscending","sortDescending","setValueImportHeaderEdit","head","headE","removeImportDetail","delete","destroy","getCustomer","getCustomerAll","getRubberSize","findSizeByStyle","setProductListDataTable","language","startFindProduct","getFixcost","price1","price2","job_type_name","rub_grade_name","numFormat","getProduct","getProductDetail"],"sourceRoot":"","sources":["D:\\Project-vue\\SPR-PROJECT\\main-app-test\\src\\components\\importWork.vue"],"sourcesContent":["<template>\r\n    <!-- แก้ไขหัวบิลใบรับ -->\r\n    <div class=\"modal fade rounded-3\" id=\"importHeaderEdit\" tabindex=\"-1\" aria-hidden=\"true\"\r\n        aria-labelledby=\"exampleModalLabel\">\r\n        <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header bg-danger text-center\" style=\"color:white;\">\r\n                    <h1 class=\"modal-title\" id=\"exampleModalLabel\"\r\n                        style=\"color: white; text-align:center; font-size:medium\">\r\n                        ::: แก้ไขหัวบิลใบรับ :::\r\n                    </h1>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col\" style=\"text-align: left\">\r\n                            <label>ประเภทใบรับ</label>\r\n                            <select class=\"form-select\" style=\"background-color:#e2e2e2\"\r\n                                v-model=\"this.import_header_edit.job_type_id\" disabled>\r\n                                <option value=\"1\">ค่าจ้าง</option>\r\n                                <option value=\"2\">ยางพร้อมโครง</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"col\" style=\"text-align: left\">\r\n                            <label>วันที่(ว/ด/ป)</label>\r\n                            <!-- datepicker เป็น Component ที่สร้างขึ้นมาเอง อยู่ที่ไฟล์ Mydatepicker.vue -->\r\n                            <datepicker @getDate=\"getDate\" class=\"text form-control\"\r\n                                :value=\"this.import_header_edit.import_date\" />\r\n                            <!-- <input type=\"text\" id=\"datepicker_edit\" class=\"form-control\"\r\n                                v-model=\"this.import_header_edit.import_date\" readonly\r\n                                @click.prevent=\"this.showDatePicker_edit();\" /> -->\r\n                        </div>\r\n                        <div class=\"col\" style=\"text-align:left\">\r\n                            <label>การชำระเงิน</label>\r\n                            <select id=\"pay_type\" class=\"form-control import_header\"\r\n                                v-model=\"this.import_header_edit.pay_type\" style=\"color:blue; font-weight:bold;\"\r\n                                disabled>\r\n                                <option value=\"1\">เงินสด</option>\r\n                                <option value=\"2\">เงินสด+จัดส่ง</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mt-1\">\r\n                        <div class=\"col-3\" style=\"text-align: left\">\r\n                            <label>ชื่อลูกค้า</label>\r\n                            <select class=\"form-select\" v-model=\"this.import_header_edit.cust_auto_id\" id=\"findcust\">\r\n                                <option v-for=\"rec in customer_data\" :key=\"rec.cust_auto_id\" :value=\"rec.cust_auto_id\">\r\n                                    {{ rec.customerName }}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"col-6\" style=\"text-align: left\">\r\n                            <label>ที่อยู่ลูกค้า</label>\r\n                            <input type=\"text\" class=\"form-control\" v-model=\"this.cust_addr_edit\" disabled />\r\n                        </div>\r\n                        <div class=\"col-3\" style=\"text-align: left\">\r\n                            <label>เบอร์โทร</label>\r\n                            <input type=\"text\" class=\"form-control\" v-model=\"this.cust_tel_edit\" disabled />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row-12 mt-2\" style=\"text-align: center\">\r\n                        <button type=\"button\" class=\"btn btn-danger rounded-4 me-2\"\r\n                            @click.prevent=\"this.func.hideModal('importHeaderEdit')\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-ban\" />&nbsp;ปิดหน้าต่าง\r\n                        </button>\r\n                        <button type=\"button\" class=\"btn btn-primary rounded-4 me-2\"\r\n                            @click.prevent=\"updateImportHeader();\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-check-to-slot\" />&nbsp;บันทึกการแก้ไข\r\n                        </button>\r\n                    </div>\r\n                    <!-- {{ this.import_header_edit }} -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- end -->\r\n    <!-- เพิ่มรายละเอียดใบรับจากตารางราคา -->\r\n    <!-- ส่วนของการเพิ่มรายการใบรับแบบใหม่ collapse -->\r\n    <!-- add product to import list ค้นหาโดยละเอียด-->\r\n    <div class=\"container-fluid\" v-if=\"this.page == 2\">\r\n        <div class=\"row-12\">\r\n            <div class=\"col-12\" style=\"text-align:center\">\r\n                <button class=\"btn btn-success rounded-3 shadow col-12\" type=\"button\" data-bs-toggle=\"collapse\"\r\n                    data-bs-target=\"#findProduct\" aria-expanded=\"false\" aria-controls=\"newProductList\"\r\n                    @click.prevent=\"findProductPage();\">\r\n                    ค้นหาสินค้าแบบละเอียด&nbsp;\r\n                    <font-awesome-icon icon=\"fa-solid fa-magnifying-glass-plus\" style=\"color:yellow;\"\r\n                        v-if=\"this.chk_findproduct_page == false\" />\r\n                    <font-awesome-icon icon=\"fa-solid fa-magnifying-glass-minus\" style=\"color:yellow;\" v-else />\r\n                </button>\r\n            </div>\r\n            <div class=\"collapse mt-1 mb-1\" id=\"findProduct\">\r\n                <div class=\"card rounded-3 shadow\" style=\"width:100%\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-2\">\r\n                                <label>ประเภทงาน</label>\r\n                                <select class=\"form-select\" v-model=\"this.import_header.job_type_id\" disabled>\r\n                                    <option value=\"1\">ค่าจ้าง</option>\r\n                                    <option value=\"2\">ยางพร้อมโครง</option>\r\n                                </select>\r\n                            </div>\r\n                            <!-- @change=\"findSizeByProductionType(this.find_data.find_production_type)\" ***Insert to select tag-->\r\n                            <div class=\"col-4\">\r\n                                <label>ประเภทการผลิต</label>\r\n                                <select class=\"form-select\" v-model=\"this.find_data.find_production_type\">\r\n                                    <option value=\"0\" selected>::: ข้อมูลทั้งหมด :::</option>\r\n                                    <option v-for=\"productDetail in product_detail\"\r\n                                        :key=\"productDetail.production_type_id\"\r\n                                        :value=\"productDetail.production_type_id\">\r\n                                        {{ productDetail.production_type_name }}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"col-2\">\r\n                                <label>ลายดอก</label>\r\n                                <select class=\"form-select\" id=\"style\" v-model=\"this.find_data.find_style\"\r\n                                    @change=\"this.findSizeByStyle();\">\r\n                                    <option value=\"0\" selected>::: ข้อมูลทั้งหมด :::</option>\r\n                                    <option v-for=\"rubStyleList in rubber_style\" :key=\"rubStyleList.rub_style_id\"\r\n                                        :value=\"rubStyleList.rub_style_id\">\r\n                                        {{ rubStyleList.rub_style_name }}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"col-4\">\r\n                                <label>ขนาดยาง</label>\r\n                                <select class=\"form-select\" id=\"size\" v-model=\"this.find_data.find_size\">\r\n                                    <option value=\"0\" selected>::: ข้อมูลทั้งหมด :::</option>\r\n                                    <option v-for=\"rubSizeList in rubber_size\" :key=\"rubSizeList.rub_size_id\"\r\n                                        :value=\"rubSizeList.rub_size_id\">\r\n                                        {{ rubSizeList.rub_size_name }} > {{ rubSizeList.rub_size_detail }}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                            Object find_data: {{ this.find_data }}\r\n                        </div>\r\n                        <div class=\"row-12 mt-4 d-flex justify-content-center\">\r\n                            <button type=\"button\" class=\"btn btn-danger rounded-5 shadow\"\r\n                                @click.prevent=\"resetFindData(); getProductList();\">\r\n                                ค่าเริ่มต้น&nbsp;<font-awesome-icon icon=\"fa-solid fa-rotate-right\" />\r\n                            </button>\r\n                            <button type=\"button\" class=\"btn btn-primary rounded-5 shadow ms-1\"\r\n                                @click.prevent=\"startFindProduct();\">\r\n                                เริ่มค้นหา&nbsp;<font-awesome-icon icon=\"fa-solid fa-magnifying-glass\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- end -->\r\n        <!-- ส่วนของการเพิ่มรายการใบรับแบบเก่า -->\r\n        <!-- <div class=\"card mt-1 rounded-3 shadow\" style=\"width: 100%\">\r\n            <div class=\"card-header bg-primary shadow\" style=\"color: white; text-align:center;\"\r\n                v-if=\"this.operator == 'new'\">\r\n                ::: เพิ่มรายการใบรับ :::\r\n            </div>\r\n            <div class=\"card-header bg-danger shadow\" style=\"color: white; text-align:center;\" v-else>\r\n                ::: แก้ไขรายการใบรับ :::\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <div class=\"row mt-1\">\r\n                    <div class=\"col-2 ms-2\">\r\n                        <div style=\"text-align:left;\">\r\n                            <label style=\"color:blue\">หมายเลขยาง(จากโครง)</label>\r\n                            <input type=\"text\" class=\"form-control shadow\" id=\"manufac_id\"\r\n                                v-model.trim=\"this.import_detail.manufac_id\" placeholder=\"กรุณาใส่หมายเลขยาง\"\r\n                                @keypress=\"this.func.fixCharecter($event)\"\r\n                                @input=\"(this.import_detail.manufac_id = this.import_detail.manufac_id.toUpperCase())\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-3\" style=\"text-align:left;\">\r\n                        <label style=\"color:blue\">ยี่ห้อยาง</label>\r\n                        <select class=\"form-select shadow\" id=\"findBrand\" v-model=\"this.import_detail.rub_brand_id\">\r\n                            <option v-for=\"rubberBrand in rubber_brand\" :key=\"rubberBrand.rub_brand_id\"\r\n                                :value=\"rubberBrand.rub_brand_id\">\r\n                                {{ rubberBrand.rub_brand_shotname }} > {{ rubberBrand.rub_brand_name }}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                    <div class=\"col me-2\" style=\"text-align:left;\">\r\n                        <label style=\"color:blue\">รายละเอียดสินค้า</label>\r\n                        <input type=\"text\" class=\"form-control shadow\" v-model=\"this.product_select\"\r\n                            placeholder=\"เลือกจากรายการด้านล่าง\" readonly />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div> -->\r\n        <!-- end of เพิ่มรายการใบรับแบบเก่า -->\r\n        <!-- ส่วนการป้อนรหมายเลขจากโครงยาง และยี่ห้อ (Model) -->\r\n        <div class=\"modal fade rounded-4\" id=\"getProductToImportList\" tabindex=\"-1\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header bg-primary\" style=\"color: white; text-align:center;\"\r\n                        v-if=\"this.operator == 'new'\">\r\n                        <div class=\"modal-title\">::: ป้อนข้อมูลก่อนการบันทึก :::</div>\r\n                    </div>\r\n                    <div class=\"modal-header bg-danger\" style=\"color: white; text-align:center;\" v-else>\r\n                        <div class=\"modal-title\">::: แก้ไขรายการใบรับ :::</div>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"card-body\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-6\">\r\n                                    <label style=\"color:blue\">หมายเลขยาง(จากโครง)</label>\r\n                                    <input type=\"text\" class=\"form-control shadow\" id=\"manufac_id\"\r\n                                        v-model.trim=\"this.import_detail.manufac_id\" placeholder=\"กรุณาใส่หมายเลขยาง\"\r\n                                        @keypress=\"this.func.fixCharecter($event)\"\r\n                                        @input=\"(this.import_detail.manufac_id = this.import_detail.manufac_id.toUpperCase())\" />\r\n                                </div>\r\n                                <div class=\"col-6\" style=\"text-align:left;\">\r\n                                    <label style=\"color:blue\">ยี่ห้อยาง</label>\r\n                                    <select class=\"form-select shadow\" id=\"findBrand\"\r\n                                        v-model=\"this.import_detail.rub_brand_id\">\r\n                                        <option v-for=\"rubberBrand in rubber_brand\" :key=\"rubberBrand.rub_brand_id\"\r\n                                            :value=\"rubberBrand.rub_brand_id\">\r\n                                            {{ rubberBrand.rub_brand_shotname }} > {{ rubberBrand.rub_brand_name }}\r\n                                        </option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row mt-2\">\r\n                                <div class=\"col\" style=\"text-align:left;\">\r\n                                    <label style=\"color:blue\">รายละเอียดสินค้า</label>\r\n                                    <input type=\"text\" class=\"form-control shadow\" v-model=\"this.product_select\"\r\n                                        placeholder=\"เลือกจากรายการด้านล่าง\" readonly />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row mt-3\">\r\n                                <div class=\"col d-flex justify-content-center\">\r\n                                    <button type=\"button\" class=\"btn btn-danger rounded-5 shadow me-1\"\r\n                                        @click.prevent=\"this.func.hideModal('getProductToImportList')\">\r\n                                        ยกเลิก/ปิด&nbsp;<font-awesome-icon icon=\"fa-solid fa-ban\" />\r\n                                    </button>\r\n                                    <button type=\"button\" class=\"btn btn-primary rounded-5 shadow ms-1\"\r\n                                        @click.prevent=\"saveImportDetail();\">\r\n                                        บันทึกลงใบรับ&nbsp;<font-awesome-icon icon=\"fa-solid fa-floppy-disk\" />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- end ส่วนการป้อนรหมายเลขจากโครงยาง และยี่ห้อ -->\r\n        <!-- แสดงรายการสินค้าสำหรับเลือกลงใบรับงาน -->\r\n        <div class=\"card rounded-3 shadow-lg mt-1\" style=\"width: 100%\">\r\n            <div class=\"card-header bg-primary opacity-75 shadow\" style=\"color: white; text-align:center;\"\r\n                v-if=\"this.operator == 'new'\">\r\n                ::: เลือกสินค้าสำหรับทำรายการใบรับยาง :::\r\n            </div>\r\n            <div class=\"card-header bg-danger opacity-75 shadow\" style=\"color: white; text-align:center;\" v-else>\r\n                ::: เลือกสินค้าจากรายการ(เพื่อแก้ไข) :::\r\n                <div>ข้อมูลเก่า : {{ this.product_select }}</div>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <table id=\"showProduct\" class=\"table table-striped table-hover table-sm\" style=\"width: 100%;\">\r\n                    <thead>\r\n                        <tr style=\"color:darkblue\">\r\n                            <th>ลำดับ</th>\r\n                            <th>ประเภทการผลิต</th>\r\n                            <th>ขนาด</th>\r\n                            <th>ลายดอก</th>\r\n                            <th></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody class=\"table-group-divider\">\r\n                        <!-- <tr v-for=\"rec in product_cost\" :key=\"rec.fixcost_id\" @click.prevent=\"this.getFixcost(rec);\" @dblclick.prevent=\"\"> -->\r\n                        <tr v-for=\"rec in product_list_data\" :key=\"rec.product_list_id\"\r\n                            title=\"ดับเบิ้ลคลิ๊กเพื่อนำสินค้าเข้ารายการใบรับ\" @dblclick=\"getProduct(rec); this.func.showModal('getProductToImportList');\r\n                            this.func.setFocusInModal('getProductToImportList', 'manufac_id')\">\r\n                            <td>{{ product_list_data.indexOf(rec) + 1 }}</td>\r\n                            <td>{{ rec.production_type_name }}</td>\r\n                            <td>{{ rec.rub_size_name }} > {{ rec.rub_size_detail }}</td>\r\n                            <td>{{ rec.rub_style_name }}</td>\r\n                            <td>\r\n                                <button class=\"btn btn-success border-0 btn-sm d-flex justify-content-start\"\r\n                                    @click.prevent=\"getProduct(rec); this.func.showModal('getProductToImportList');\r\n                                    this.func.setFocusInModal('getProductToImportList', 'manufac_id')\">\r\n                                    <font-awesome-icon icon=\"fa-solid fa-down-long\" style=\"color:white\" />\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <div class=\"card-footer\" style=\"text-align:right\">\r\n                <!-- ปุ่มปิด -->\r\n                <button type=\"button\" class=\"btn btn-danger ms-2 me-1 rounded-4\" @click.prevent=\"this.func.clearSelect2('findBrand');\r\n                this.import_detail.rub_brand_id = ''; this.import_detail.manufac_id = ''; this.chk_findproduct_page = true; this.findProductPage();\r\n                this.fixcost_detail = ''; this.getImportDetail(this.import_header.import_id); this.page = 1\">\r\n                    ปิดหน้าต่าง&nbsp;<font-awesome-icon icon=\"fa-solid fa-ban\" />\r\n                </button>\r\n                <!-- ปุ่มบันทึก -->\r\n                <!-- <button id=\"btn\" class=\"btn btn-primary ms-1\" @click.prevent=\"saveImportDetail();\">\r\n                    <font-awesome-icon icon=\"fa-solid fa-circle-check\" />&nbsp;บันทึกรายการ\r\n                </button> -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- end เพิ่มรายละเอียดใบรับจากตารางราคา -->\r\n    <!-- แสดง Header + รายละเอียดใบรับ -->\r\n    <div class=\"container-fluid\" v-if=\"this.page == 1\">\r\n        <div class=\"card rounded-3 shadow\" style=\"width:100%;\">\r\n            <div class=\"card-header bg-primary\" style=\"color:white; text-align:center;\">\r\n                ใบรับ (\r\n                <select class=\"rounded-2 bg-primary border-0\" style=\"color:yellow ;\"\r\n                    v-model=\"this.import_header.job_type_id\" disabled>\r\n                    <option value=\"1\">ค่าจ้าง</option>\r\n                    <option value=\"2\">ยางพร้อมโครง</option>\r\n                </select> )\r\n            </div>\r\n            <div class=\"card-body\" style=\"font-weight:bold\">\r\n                <div class=\"row\">\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>เล่มที่</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" id=\"book_id\"\r\n                            v-model.trim=\"this.import_header.import_book_id\" disabled />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>เลขที่</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" id=\"book_no\"\r\n                            v-model.trim=\"this.import_header.import_book_no\" disabled />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>วันที่(ว/ด/ป)</label>\r\n                        <input type=\"text\" class=\"date form-control import-header\"\r\n                            v-model=\"this.import_header.import_date\" disabled />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>การชำระเงิน</label>\r\n                        <select id=\"pay_type\" class=\"form-control import_header\" v-model=\"this.import_header.pay_type\"\r\n                            style=\"color:blue; font-weight:bold;\" disabled>\r\n                            <option value=\"1\">เงินสด</option>\r\n                            <option value=\"2\">เงินสด+จัดส่ง</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row mt-1\">\r\n                    <div class=\"col-3\" style=\"text-align:left;\">\r\n                        <label>ชื่อลูกค้า</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" v-model=\"this.cust_name\" disabled />\r\n                    </div>\r\n                    <div class=\"col-6\" style=\"text-align:left;\">\r\n                        <label>ที่อยู่ลูกค้า</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" v-model=\"this.cust_addr\" disabled />\r\n                    </div>\r\n                    <div class=\"col-3\" style=\"text-align:left;\">\r\n                        <label>เบอร์โทร</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" v-model=\"this.cust_tel\" disabled />\r\n                    </div>\r\n                </div>\r\n                <div class=\"card-footer border-0\" style=\"text-align:center\">\r\n                    <div class=\"row-12 mt-2 align-content-center\">\r\n                        <button class=\"btn btn-success rounded-4 me-2 btn-sm shadow\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-check-to-slot\" />&nbsp;ยืนยันใบรับ\r\n                        </button>\r\n                        <button class=\"btn btn-warning rounded-4 me-2 btn-sm shadow\" style=\"color:white;\"\r\n                            @click.prevent=\"this.showDatePicker_edit(); getCustomerAll(); onSelect_Cust();\r\n                            setValueImportHeaderEdit(); this.func.showModal('importHeaderEdit');\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-pen\" />&nbsp;แก้ไขใบรับ\r\n                        </button>\r\n                        <button class=\"btn btn-danger rounded-4 me-2 btn-sm shadow\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-file-circle-xmark\" />&nbsp;ยกเลิกใบรับ\r\n                        </button>\r\n                        <button class=\"btn btn-primary rounded-4 me-2 btn-sm shadow\" @click.prevent=\"getProductDetail(this.import_header.job_type_id);\r\n                        this.checkOperator('new', rec)\">\r\n                            <!-- newImportDetail() ตอนนี้ไม่ได้ใช้ -->\r\n                            <font-awesome-icon icon=\"fa-solid fa-cart-plus\" />&nbsp;เพิ่มรายการรับ\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- <div class=\"card-footer align-content-center\" id=\"control-detail\"> -->\r\n\r\n            <!-- </div> -->\r\n        </div>\r\n        <div class=\"card rounded-3 shadow mt-2\" style=\"width: 100%\">\r\n            <div class=\"card-header bg-opacity-75 bg-primary\" style=\"color:white;text-align:center\">\r\n                ::: รายการใบรับยาง :::\r\n                <!-- ปุ่มสำหรับเรียกเมนูที่ซ่อนอยู่ **ลูกเล่นที่ใช้ = offcanvas  -->\r\n                <!-- <button class=\"btn justify-content-end\" type=\"button\" data-bs-toggle=\"offcanvas\"\r\n                    data-bs-target=\"#offcanvasDarkNavbar\" aria-controls=\"staticBackdrop\">\r\n                    <font-awesome-icon icon=\"fa-solid fa-cart-plus\" />\r\n                </button> -->\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <table id=\"showimportdetail\" class=\"table table-striped table-hover table-sm nowrap\"\r\n                    style=\"width: 100%; align-items: center\">\r\n                    <thead>\r\n                        <tr style=\"text-align:left; color:darkblue\">\r\n                            <th>ลำดับ</th>\r\n                            <th>รหัสยาง</th>\r\n                            <th>ประเภทการผลิต</th>\r\n                            <th>ขนาดยาง</th>\r\n                            <th>ลายดอก</th>\r\n                            <th>ยี่ห้อยาง</th>\r\n                            <th>เกรดยาง</th>\r\n                            <th>ราคาขาย</th>\r\n                            <th></th>\r\n                            <!-- <th></th> -->\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody class=\"table-group-divider\">\r\n                        <tr v-for=\"rec in import_detail_list\" :key=\"rec.import_detail_id\" style=\"text-align:left\">\r\n                            <td>{{ import_detail_list.indexOf(rec) + 1 }}</td>\r\n                            <td>{{ rec.manufac_id }}</td>\r\n                            <td>{{ rec.production_type_name }}</td>\r\n                            <td>{{ rec.rub_size_name }}</td>\r\n                            <td>{{ rec.rub_style_name }}</td>\r\n                            <td>{{ rec.rub_brand_shotname }}</td>\r\n                            <td v-if=\"rec.rub_grade_id == '10'\">\r\n                                <font style=\"color:red\">{{ rec.rub_grade_name }}!</font>\r\n                            </td>\r\n                            <td v-else>\r\n                                <font style=\"color:blue\">{{ rec.rub_grade_name }}!</font>\r\n                            </td>\r\n                            <td v-if=\"rec.product_price > 0\">\r\n                                <font style=\"color:mediumblue\">{{ func.numFormat(rec.product_price) }}</font>\r\n                            </td>\r\n                            <td v-else>\r\n                                <font style=\"color:red\">ยังไม่กำหนด!</font>\r\n                            </td>\r\n                            <td style=\"text-align:left\">\r\n                                <div id=\"tracking\" class=\"btn btn-warning btn-sm ms-1\" title=\"ติดตามงาน\"\r\n                                    @click.prevent=\"\">\r\n                                    <font-awesome-icon icon=\"fa-solid fa-users-gear\" style=\"color:green\" />\r\n                                </div>\r\n                                <div id=\"edit\" class=\"btn btn-primary btn-sm ms-1\" title=\"แก้ไขรายการ\"\r\n                                    @click.prevent=\"this.checkOperator('edit', rec)\">\r\n                                    <font-awesome-icon icon=\"fa-solid fa-pen\" style=\"color:white\" />\r\n                                </div>\r\n                                <div id=\"delete\" class=\"btn btn-danger btn-sm ms-1\" title=\"ลบรายการ\"\r\n                                    @click.prevent=\"removeImportDetail(rec.import_detail_id)\">\r\n                                    <font-awesome-icon icon=\"fa-solid fa-trash-can\" style=\"color:white\" />\r\n                                </div>\r\n                            </td>\r\n                            <!-- <td style=\"text-align:left\">\r\n                                <button id=\"delete\" class=\"btn btn-danger btn-sm\" title=\"ลบรายการ\"\r\n                                    @click.prevent=\"removeImportDetail(rec.import_detail_id)\">\r\n                                    <font-awesome-icon icon=\"fa-solid fa-trash-can\" style=\"color:white\" />\r\n                                </button>\r\n                            </td> -->\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n        <!-- ทดสอบ offcanvas -->\r\n        <!-- <div class=\"offcanvas offcanvas-end text-bg-primary bg-opacity-75\" tabindex=\"-1\" id=\"offcanvasDarkNavbar\"\r\n            aria-labelledby=\"staticBackdropLabel\" data-bs-backdrop=\"static\">\r\n            <div class=\"offcanvas-header\">\r\n                <h5 class=\"offcanvas-title\" id=\"offcanvasDarkNavbarLabel\">::: นำเข้าสินค้าสู่ใบรับ :::</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"offcanvas-body\">\r\n                ปปปปปปป\r\n            </div>\r\n        </div> -->\r\n        <!-- end offcanvas -->\r\n    </div>\r\n    <!-- {{ this.import_header }} -->\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\nimport axios from \"@/axios\";\r\nimport func from \"../func.js\";\r\nimport datepicker from \"@/Mycomponents/Mydatepicker.vue\";\r\nexport default {\r\n    components: {\r\n        datepicker,\r\n    },\r\n    data() {\r\n        return {\r\n            chk_findproduct_page: false,\r\n            func: func,\r\n            page: \"1\",\r\n            cust_name: \"\",\r\n            cust_addr: \"\",\r\n            cust_tel: \"\",\r\n            cust_addr_edit: \"\",\r\n            cust_tel_edit: \"\",\r\n            operator: \"\", //--- ตรวจเช็คว่ากดเพิ่มข้อมูลใหม่ หรือแก้ไขข้อมูล 'new' or 'edit' Data\r\n            fixcost_detail: \"\", //--- เอาไว้แสดงภาพรวมให้ผู้ใช้ดูข้อมูลราคา\r\n            product_select: \"\", //--- เอาไว้แสดงภาพรวมให้ผู้ใช้ดูข้อมูลราคา\r\n            import_detail_id: \"\",\r\n            set_product_price: \"\", //---**เลือกราคาจาก fixcost 1 = เงินสด / 2 = เงินสด+จัดส่ง\r\n            manufac_id_temp: \"\",\r\n            check_manufac: [],\r\n            check_bill_header: [],\r\n            customer_data: [],\r\n            rubber_size: [],\r\n            rubber_style: [],\r\n            rubber_brand: [],\r\n            product_cost: [],\r\n            import_detail_list: [],\r\n            product_list_data: [],\r\n            product_detail: [],\r\n            import_header: {\r\n                import_id: \"\",\r\n                import_book_id: \"\",\r\n                import_book_no: \"\",\r\n                import_user: \"\",\r\n                cust_auto_id: \"\",\r\n                job_type_id: \"\",\r\n                pay_type: \"\",\r\n                import_date: \"\",\r\n                import_status: \"\",\r\n            },\r\n            import_header_edit: {\r\n                import_id: \"\",\r\n                import_book_id: \"\",\r\n                import_book_no: \"\",\r\n                import_user: \"\",\r\n                cust_auto_id: \"\",\r\n                job_type_id: \"\",\r\n                pay_type: \"\",\r\n                import_date: \"\",\r\n                import_status: \"\",\r\n            },\r\n            import_detail: {\r\n                import_id: \"\",\r\n                rub_brand_id: \"\",\r\n                manufac_id: \"\",\r\n                rub_grade_id: 10,\r\n                product_list_id: \"\",\r\n                product_price: 0,\r\n                import_detail_status: \"\",\r\n            },\r\n            find_data: {\r\n                find_production_type: \"0\",\r\n                find_size: \"0\",\r\n                find_style: \"0\",\r\n                SQL_Code: \"\",\r\n            },\r\n        }\r\n    },\r\n    mounted() {\r\n        let import_book_id = sessionStorage.getItem(\"import_book_id\");\r\n        let import_book_no = sessionStorage.getItem(\"import_book_no\");\r\n        if (import_book_id != null && import_book_no != null) {\r\n            this.chkImportHeader(import_book_id, import_book_no);\r\n        } else {\r\n            let import_id = sessionStorage.getItem(\"import_id\");\r\n            this.import_detail.import_id = import_id;\r\n            this.chkImportHeaderById(import_id);\r\n            this.getImportDetail(import_id);\r\n        }\r\n    },\r\n    beforeUnmount() {\r\n        sessionStorage.removeItem(\"import_book_id\");\r\n        sessionStorage.removeItem(\"import_book_no\");\r\n        sessionStorage.removeItem(\"import_id\");\r\n    },\r\n    methods: {\r\n        async resetFindData() {\r\n            this.find_data = {\r\n                find_production_type: await \"0\",\r\n                find_size: await \"0\",\r\n                find_style: await \"0\"\r\n            };\r\n            this.findSizeByProductionType(\"0\");\r\n            this.findStyleBySize(\"0\");\r\n            await $(\"#size\").val(\"0\").trigger('change');\r\n            await $(\"#style\").val(\"0\").trigger('change');\r\n        },\r\n        getDate(val) {\r\n            this.import_header_edit.import_date = val;\r\n        },\r\n        findProductPage() {\r\n            this.chk_findproduct_page = !this.chk_findproduct_page;\r\n        },\r\n        showDatePicker_edit() {\r\n            let data = this.import_header_edit;\r\n            // $(document).ready(() => {\r\n            $('#datepicker_edit').datepicker({\r\n                format: \"dd/mm/yyyy\",\r\n                autoclose: true,\r\n                toggleActive: true,\r\n            });\r\n            $('#datepicker_edit').change(() => {\r\n                data.import_date = $('#datepicker_edit').val();\r\n            });\r\n            // });\r\n        },\r\n        onSelect_Brand() {\r\n            $(document).ready(() => {\r\n                let rec = this.import_detail;\r\n                $('#findBrand').select2({\r\n                    theme: \"bootstrap-5\",\r\n                    closeOnSelect: true,\r\n                    width: '100%',\r\n                    dropdownParent: $(\"#findBrand\").parent(),\r\n                    placeholder: \"--- กรุณาเลือกยี่ห้อยาง ---\",\r\n                });\r\n                $('#findBrand').on('select2:select', (e) => {\r\n                    let data = e.params.data;\r\n                    rec.rub_brand_id = data.id;\r\n                })\r\n            });\r\n        },\r\n        onSelect_Cust() {\r\n            $(document).ready(() => {\r\n                let rec = this.import_header_edit;\r\n                $('#findcust').select2({\r\n                    theme: \"bootstrap-5\",\r\n                    closeOnSelect: true,\r\n                    width: '100%',\r\n                    dropdownParent: $(\"#findcust\").parent(),\r\n                    placeholder: \"--- เลือกลูกค้า ---\",\r\n                });\r\n                $('#findcust').on('select2:select', (e) => {\r\n                    let data = e.params.data;\r\n                    rec.cust_auto_id = data.id;\r\n                    this.getCustomerEdit(rec.cust_auto_id);\r\n                })\r\n            });\r\n        },\r\n        getUseData() {\r\n            this.getProductList();\r\n            this.getRubberBrand();\r\n            this.getRubberStyle();\r\n            this.onSelect_Brand();\r\n        },\r\n        async chkImportHeader(val1, val2) {\r\n            await axios.get(`billimport/search/${val1}/${val2}`).then((response) => {\r\n                // this.check_bill_header = response.data;\r\n                this.import_header.import_id = response.data[0].import_id;\r\n                this.import_header.import_book_id = response.data[0].import_book_id;\r\n                this.import_header.import_book_no = response.data[0].import_book_no;\r\n                this.import_header.import_user = response.data[0].import_user;\r\n                this.import_header.cust_auto_id = response.data[0].cust_auto_id;\r\n                this.import_header.job_type_id = response.data[0].job_type_id;\r\n                this.import_header.pay_type = response.data[0].pay_type;\r\n                this.import_header.import_date = response.data[0].new_import_date;\r\n                this.import_header.import_status = response.data[0].import_status;\r\n                this.cust_name = response.data[0].customerName;\r\n                this.cust_addr = response.data[0].customerAddr;\r\n                this.cust_tel = response.data[0].customerTel;\r\n                this.set_product_price = response.data[0].priceType;\r\n                this.import_detail.import_id = response.data[0].import_id;\r\n                this.getImportDetail(this.import_header.import_id);\r\n            });\r\n        },\r\n        async chkImportHeaderById(val) {\r\n            await axios.get(`billimport/searchid/${val}`).then((response) => {\r\n                this.import_header.import_id = response.data[0].import_id;\r\n                this.import_header.import_book_id = response.data[0].import_book_id;\r\n                this.import_header.import_book_no = response.data[0].import_book_no;\r\n                this.import_header.import_user = response.data[0].import_user;\r\n                this.import_header.cust_auto_id = response.data[0].cust_auto_id;\r\n                this.import_header.job_type_id = response.data[0].job_type_id;\r\n                this.import_header.pay_type = response.data[0].pay_type;\r\n                this.import_header.import_date = response.data[0].new_import_date;\r\n                this.import_header.import_status = response.data[0].import_status;\r\n                this.cust_name = response.data[0].customerName;\r\n                this.cust_addr = response.data[0].customerAddr;\r\n                this.cust_tel = response.data[0].customerTel;\r\n                this.set_product_price = response.data[0].priceType;\r\n            });\r\n        },\r\n        async updateImportHeader() {\r\n            if (await confirm(\"ยืนยันบันทึกการแก้ไขข้อมูล\") == true) {\r\n                this.import_header_edit.import_date = await this.func.convertDateToMySql(this.import_header_edit.import_date);\r\n                await axios.post(`billimport/update`, this.import_header_edit).then(() => {\r\n                    this.chkImportHeaderById(sessionStorage.getItem(\"import_id\"));\r\n                }).catch((error) => {\r\n                    console.log(\"เกิดข้อผิดพลาดในการบันทึกข้อมูล \" + error)\r\n                });\r\n                // await this.chkImportHeaderById(sessionStorage.getItem(\"import_id\"));\r\n                // await this.getImportDetail(sessionStorage.getItem(\"import_id\"));\r\n                await func.hideModal(\"importHeaderEdit\");\r\n                // alert(sessionStorage.getItem(\"import_id\"))                \r\n            }\r\n        },\r\n        async newImportDetail() {\r\n            // Load ตารางราคา\r\n            await this.getProductCost();\r\n            if ((this.import_header.import_book_id == null) ||\r\n                (this.import_header.import_book_no == null) ||\r\n                (this.import_header.import_date == null)) {\r\n                alert('ข้อมูลหลักไม่ครบถ้วน.,กรุณาตรวจสอบ !!!')\r\n                // document.getElementById(\"book_id\").value = 'xxx';\r\n                await document.getElementById(\"book_id\").focus();\r\n                await document.getElementById(\"book_id\").select();\r\n                //document.getElementById(\"book_no\").disabled = true;             \r\n            } else {\r\n                await this.onSelect_Brand();\r\n                await this.getUseData();\r\n                // this.showModal('newImportDetail');\r\n                await func.showModal('newImportDetail2');\r\n            }\r\n        },\r\n        async saveImportDetail() {\r\n            // Start sub function --------------------------------------------------------\r\n            this.nextProcess = async () => {\r\n                if (this.operator == \"new\") {\r\n                    if (await confirm(\"ยืนยันการบันทึกรายการใหม่\") == true) {\r\n                        await axios.post(`billimport/detail/new`, this.import_detail).then(() => {\r\n                            this.import_detail = {\r\n                                import_id: this.import_header.import_id,\r\n                                rub_brand_id: \"\",\r\n                                manufac_id: \"\",\r\n                                rub_grade_id: 10,\r\n                                product_list_id: \"\",\r\n                                product_price: 0,\r\n                                import_detail_status: \"\",\r\n                            };\r\n                            this.product_select = \"\";\r\n                        }).catch((error) => {\r\n                            console.log(\"พบข้อผิดผลาดในการแก้ไขข้อมูล \" + error);\r\n                        });\r\n                        this.func.hideModal(\"getProductToImportList\")\r\n                        // this.page = 1;\r\n                    }\r\n                }\r\n                else {\r\n                    if (confirm(\"ยืนยันการแก้ไขข้อมูล\") == true) {\r\n                        await axios.post(`billimport/detail/update/${this.import_detail_id}`, this.import_detail).then(() => {\r\n                            this.import_detail = {\r\n                                import_id: this.import_header.import_id,\r\n                                rub_brand_id: \"\",\r\n                                manufac_id: \"\",\r\n                                rub_grade_id: 10,\r\n                                product_list_id: \"\",\r\n                                product_price: 0,\r\n                                import_detail_status: \"\",\r\n                            };\r\n                            this.product_select = \"\";\r\n                        }).catch((error) => {\r\n                            console.log(\"พบข้อผิดผลาดในการแก้ไขข้อมูล \" + error);\r\n                        });\r\n                        this.page = 1;\r\n                        this.func.hideModal(\"getProductToImportList\")\r\n                        // await this.getImportDetail(this.import_header.import_id);\r\n                    }\r\n                }\r\n                await this.getImportDetail(this.import_header.import_id);\r\n            };\r\n            // End sub function ----------------------------------------------------------\r\n            // Start first process เมื่อเรียกใช้งาน Method นี้ จะเริ่มทำงานที่บรรทีดด้านล่างนี้ก่อน\r\n            if (await this.import_detail.manufac_id == \"\" ||\r\n                await this.import_detail.rub_brand_id == \"\" ||\r\n                await this.import_detail.fixcost_id == \"\") {\r\n                await alert(\"กรุณากรอกข้อมูล หมายเลขยาง/ยี่ห้อยาง/รายการจากตารางราคา ให้ครบถ้วน!!!\")\r\n                await func.setFocus(\"manufac_id\");\r\n            }\r\n            else {\r\n                await this.checkImportDetail(this.import_detail.manufac_id);\r\n                // await alert(\"TEMP: \"+this.manufac_id_temp);\r\n                // ตรวจสอบว่าหมายเลขยาง(จากโครง) มีการเรียกใช้หรือยัง\r\n                if (await this.check_manufac.length == 0) {\r\n                    this.nextProcess(); // เรียกใช้งาน Sub function ที่อยู่ด้านบน \r\n                }\r\n                else if ((await this.check_manufac.length == 1) && (await this.manufac_id_temp == this.import_detail.manufac_id)) {\r\n                    this.nextProcess(); // เรียกใช้งาน Sub function ที่อยู่ด้านบน\r\n                }\r\n                else {\r\n                    alert(\"หมายเลขยางนี้มีการนำเข้าระบบแล้ว กรุณาตรวจสอบ !!!\");\r\n                    func.setFocus(\"manufac_id\");\r\n                }\r\n            }\r\n        },\r\n        async checkImportDetail(val) {\r\n            await axios.get(`billimport/detail/checkimportdetail/${val}`).then((response) => {\r\n                this.check_manufac = response.data;\r\n            });\r\n        },\r\n        async checkOperator(op, rec) {\r\n            if (op == \"new\") {\r\n                // await this.getProductCost(this.import_header.job_type_id);\r\n                await this.getUseData();\r\n                this.operator = await op;\r\n                this.page = await 2;\r\n            }\r\n            else if (op == \"edit\") {\r\n                // await this.getProductCost(this.import_header.job_type_id);\r\n                await this.getUseData();\r\n                this.import_detail.rub_brand_id = await rec.rub_brand_id;\r\n                this.import_detail.manufac_id = await rec.manufac_id;\r\n                this.import_detail.rub_grade_id = await rec.rub_grade_id;\r\n                this.product_select = await rec.production_type_name + \" / \" + rec.rub_size_name + \" / \" + rec.rub_style_name;\r\n                this.import_detail.product_list_id = await rec.product_list_id;\r\n                this.import_detail_id = await rec.import_detail_id;\r\n                this.operator = await op;\r\n                this.page = await 2;\r\n            }\r\n            this.manufac_id_temp = await rec.manufac_id;\r\n            // return op;\r\n        },\r\n        async getImportDetail(val) {\r\n            await axios.get(`billimport/detail/read/${val}`).then((response) => {\r\n                this.import_detail_list = response.data;\r\n                $(document).ready(() => {\r\n                    $(\"#showimportdetail\").DataTable({\r\n                        // dom: 'Bfrtip',\r\n                        // buttons: [\r\n                        //     'print',                            \r\n                        // ],\r\n                        // \"order\": [[0, 'asc']],\r\n                        \"scrollY\": '200px',\r\n                        \"scorllX\": false,\r\n                        \"bJQueryUI\": true,\r\n                        \"sPaginationType\": \"full_numbers\",\r\n                        \"bFilter\": false,\r\n                        \"paging\": false,\r\n                        \"scrollCollapse\": true,\r\n                        \"rowReorder\": true,\r\n                        \"destroy\": true,\r\n                        \"bSort\": false,\r\n                        \"language\": {\r\n                            decimal: \"\",\r\n                            emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                            info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                            // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                            infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                            infoPostFix: \"\",\r\n                            thousands: \",\",\r\n                            lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                            loadingRecords: \"Loading...\",\r\n                            processing: \"\",\r\n                            search: \"ค้นหาข้อมูล:\",\r\n                            zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            paginate: {\r\n                                first: \"หน้าแรก\",\r\n                                last: \"หน้าสุดท้าย\",\r\n                                next: \"ต่อไป\",\r\n                                previous: \"ย้อนกลับ\",\r\n                            },\r\n                            aria: {\r\n                                sortAscending: \": activate to sort column ascending\",\r\n                                sortDescending: \": activate to sort column descending\",\r\n                            },\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        setValueImportHeaderEdit() {\r\n            let head = this.import_header;\r\n            let headE = this.import_header_edit;\r\n            headE.import_id = head.import_id;\r\n            headE.import_book_id = head.import_book_id;\r\n            headE.import_book_no = head.import_book_no;\r\n            headE.import_user = head.import_user;\r\n            headE.cust_auto_id = head.cust_auto_id;\r\n            headE.job_type_id = head.job_type_id;\r\n            headE.pay_type = head.pay_type;\r\n            headE.import_date = head.import_date;\r\n            headE.import_status = head.import_status;\r\n\r\n            this.cust_addr_edit = this.cust_addr;\r\n            this.cust_tel_edit = this.cust_tel;\r\n        },\r\n        async removeImportDetail(rec) {\r\n            if (await confirm(\"ยืนยันการลบรายการ ?\") == true) {\r\n                await axios.delete(`billimport/detail/delete/${rec}`).then(() => {\r\n                    $(\"#showimportdetail\").DataTable().destroy();\r\n                    this.getImportDetail(this.import_header.import_id);\r\n                }).catch((error) => {\r\n                    alert('ไม่สามารถลบข้อมูลได้ ' + error);\r\n                });\r\n            }\r\n        },\r\n        async getCustomer(val) {\r\n            await axios.get(`customer/findbyautoid/${val}`).then((response) => {\r\n                // this.customer_data = response.data;\r\n                this.import_header = {\r\n                    cust_auto_id: response.data[0].cust_auto_id\r\n                }\r\n                // **ในกรณีลูกค้าเป็น SPR จะเลือกใช้ประเภทงานเป็น \"ยางพร้อมโครง[job_type_id = 2]\"\r\n                if (response.data[0].cust_auto_id == 1) { this.import_header.job_type_id = 2 }\r\n                else this.import_header.job_type_id = 1\r\n\r\n                this.cust_name = response.data[0].customerName\r\n                this.cust_addr = response.data[0].customerAddr\r\n                this.cust_tel = response.data[0].customerTel\r\n            });\r\n        },\r\n        async getCustomerEdit(val) {\r\n            await axios.get(`customer/findbyautoid/${val}`).then((response) => {\r\n                // ตรวจสอบประเภทงาน ระหว่าง ค่าจ้าง / ยางพร้อมโครง\r\n                if (response.data[0].cust_auto_id == 1) {\r\n                    this.import_header_edit.job_type_id = 2\r\n                }\r\n                else this.import_header_edit.job_type_id = 1\r\n                // -------------------------------------------------\r\n                this.cust_addr_edit = response.data[0].customerAddr\r\n                this.cust_tel_edit = response.data[0].customerTel\r\n            });\r\n        },\r\n        // infar data\r\n        async getCustomerAll() {\r\n            await axios.get(`customer/read`).then((response) => {\r\n                this.customer_data = response.data;\r\n            });\r\n        },\r\n        getRubberSize() {\r\n            axios.get(`rubbersize/read`).then((response) => {\r\n                this.rubber_size = response.data;\r\n            });\r\n        },\r\n        getRubberStyle() {\r\n            axios.get(`rubberstyle/read`).then((response) => {\r\n                this.rubber_style = response.data;\r\n                $(document).ready(() => {\r\n                    $('#style').select2({\r\n                        theme: \"bootstrap-5\",\r\n                        closeOnSelect: true,\r\n                        width: '100%',\r\n                        dropdownParent: $(\"#style\").parent(),\r\n                    });\r\n                    $('#style').on('select2:select', (e) => {\r\n                        let data = e.params.data;\r\n                        this.find_data.find_style = data.id;\r\n                    })\r\n                });\r\n            });\r\n        },\r\n        async findSizeByProductionType(val) {\r\n            await axios.get(`productlist/findsizebyproductiontype/${val}`).then((response) => {\r\n                this.rubber_size = response.data;\r\n                $(document).ready(() => {\r\n                    $('#size').select2({\r\n                        theme: \"bootstrap-5\",\r\n                        closeOnSelect: true,\r\n                        width: '100%',\r\n                        dropdownParent: $(\"#size\").parent(),\r\n                    });\r\n                    $('#size').on('select2:select', (e) => {\r\n                        let data = e.params.data;\r\n                        this.find_data.find_size = data.id;\r\n                        this.findStyleBySize(this.find_data.find_size);\r\n                    })\r\n                });\r\n            });\r\n        },\r\n        async findStyleBySize(val) {\r\n            await axios.get(`productlist/findstylebysize/${val}`).then((response) => {\r\n                this.rubber_style = response.data;\r\n                $(document).ready(() => {\r\n                    $('#style').select2({\r\n                        theme: \"bootstrap-5\",\r\n                        closeOnSelect: true,\r\n                        width: '100%',\r\n                        dropdownParent: $(\"#style\").parent(),\r\n                    });\r\n                    $('#style').on('select2:select', (e) => {\r\n                        let data = e.params.data;\r\n                        this.find_data.find_style = data.id;\r\n                    })\r\n                });\r\n            });\r\n        },\r\n        async findSizeByStyle() {\r\n            await axios.post(`productlist/findstylebysize`, this.find_data).then((response) => {\r\n                this.rubber_size = response.data;\r\n                $(document).ready(() => {\r\n                    $('#size').select2({\r\n                        theme: \"bootstrap-5\",\r\n                        closeOnSelect: true,\r\n                        width: '100%',\r\n                        dropdownParent: $(\"#size\").parent(),\r\n                    });\r\n                    $('#size').on('select2:select', (e) => {\r\n                        let data = e.params.data;\r\n                        this.find_data.find_size = data.id;\r\n                    })\r\n                });\r\n            });\r\n        },\r\n        getRubberBrand() {\r\n            axios.get(`rubberbrand/read`).then((response) => {\r\n                this.rubber_brand = response.data;\r\n            });\r\n        },\r\n        // ----- ชุดงานในการค้นหาข้อมูลสินค้า เพื่อเพิ่มลงในรายการใบรับ ------------------------------------------------------\r\n        setProductListDataTable() {\r\n            $(document).ready(() => {\r\n                $(\"#showProduct\").DataTable({\r\n                    \"order\": [[0, 'asc']],\r\n                    \"scrollY\": '150px',\r\n                    \"scorllX\": false,\r\n                    \"bJQueryUI\": true,\r\n                    \"sPaginationType\": \"full_numbers\",\r\n                    \"bFilter\": true,\r\n                    \"paging\": false,\r\n                    \"scrollCollapse\": true,\r\n                    \"rowReorder\": true,\r\n                    \"destroy\": true,\r\n                    language: {\r\n                        decimal: \"\",\r\n                        emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                        info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                        // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                        infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                        infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                        infoPostFix: \"\",\r\n                        thousands: \",\",\r\n                        lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                        loadingRecords: \"Loading...\",\r\n                        processing: \"\",\r\n                        search: \"ค้นหาข้อมูล:\",\r\n                        zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                        paginate: {\r\n                            first: \"หน้าแรก\",\r\n                            last: \"หน้าสุดท้าย\",\r\n                            next: \"ต่อไป\",\r\n                            previous: \"ย้อนกลับ\",\r\n                        },\r\n                        aria: {\r\n                            sortAscending: \": activate to sort column ascending\",\r\n                            sortDescending: \": activate to sort column descending\",\r\n                        },\r\n                    },\r\n                });\r\n            });\r\n        },\r\n        async getProductList() {\r\n            await axios.get(`productlist/read`).then((response) => {\r\n                this.product_list_data = response.data;\r\n                // $(\"#showProduct\").DataTable().destroy();\r\n                this.setProductListDataTable();\r\n            })\r\n        },\r\n        async startFindProduct() {\r\n            if ((this.find_data.find_production_type == 0) && (this.find_data.find_size == 0) && (this.find_data.find_style == 0)) {\r\n                alert(\"ไม่พบเงื่อนไขในการค้นหาข้อมูล!\")\r\n            }\r\n            else {\r\n                if (await this.find_data.find_production_type > 0 &&\r\n                    this.find_data.find_size > 0 && this.find_data.find_style > 0) {\r\n                    this.find_data.SQL_Code = \"SELECT * FROM product_list, production_type, rubber_size, rubber_style \" +\r\n                        \"WHERE product_list.production_type_id = production_type.production_type_id \" +\r\n                        \"AND product_list.rub_size_id = rubber_size.rub_size_id AND product_list.rub_style_id = rubber_style.rub_style_id \" +\r\n                        \"AND product_list.production_type_id = \" + this.find_data.find_production_type +\r\n                        \" AND product_list.rub_size_id = \" + this.find_data.find_size +\r\n                        \" AND product_list.rub_style_id = \" + this.find_data.find_style +\r\n                        \" ORDER BY product_list.product_list_id\";\r\n                } else if (await this.find_data.find_production_type > 0 &&\r\n                    this.find_data.find_size > 0) {\r\n                    this.find_data.SQL_Code = \"SELECT * FROM product_list, production_type, rubber_size, rubber_style \" +\r\n                        \"WHERE product_list.production_type_id = production_type.production_type_id \" +\r\n                        \"AND product_list.rub_size_id = rubber_size.rub_size_id AND product_list.rub_style_id = rubber_style.rub_style_id \" +\r\n                        \"AND product_list.production_type_id = \" + this.find_data.find_production_type +\r\n                        \" AND product_list.rub_size_id = \" + this.find_data.find_size +\r\n                        \" ORDER BY product_list.product_list_id\";\r\n                } else if (await this.find_data.find_production_type > 0) {\r\n                    this.find_data.SQL_Code = \"SELECT * FROM product_list, production_type, rubber_size, rubber_style \" +\r\n                        \"WHERE product_list.production_type_id = production_type.production_type_id \" +\r\n                        \"AND product_list.rub_size_id = rubber_size.rub_size_id AND product_list.rub_style_id = rubber_style.rub_style_id \" +\r\n                        \"AND product_list.production_type_id = \" + this.find_data.find_production_type +\r\n                        \" ORDER BY product_list.product_list_id\";\r\n                }\r\n                // else {\r\n                //     this.find_data.SQL_Code = \"SELECT * FROM product_list, production_type, rubber_size, rubber_style \" +\r\n                //         \"WHERE product_list.production_type_id = production_type.production_type_id \" +\r\n                //         \"AND product_list.rub_size_id = rubber_size.rub_size_id AND product_list.rub_style_id = rubber_style.rub_style_id \" +                    \r\n                //         \"ORDER BY product_list.product_list_id\";\r\n                // }\r\n                // console.log(this.find_data.SQL_Code);\r\n                await axios.post(`productlist/find3f`, this.find_data).then((response) => {\r\n                    this.product_list_data = response.data;\r\n                    // console.log(response.data)\r\n                    $(\"#showProduct\").DataTable().destroy();\r\n                    this.setProductListDataTable();\r\n                });\r\n            }\r\n        },\r\n        // ----- end of ชุดงานในการค้นหาข้อมูลสินค้า เพื่อเพิ่มลงในรายการใบรับ ------------------------------------------------------\r\n        async getFixcost(rec) {\r\n            this.import_detail.fixcost_id = await rec.fixcost_id;\r\n            // --- ตรวจเช็คประเภทราคา ---\r\n            if (await this.import_header.pay_type == 1) {\r\n                this.import_detail.product_price = rec.price1;\r\n            }\r\n            else if (await this.import_header.pay_type == 2) {\r\n                this.import_detail.product_price = rec.price2;\r\n            }\r\n            // if (await this.set_product_price == 1) {\r\n            //     this.import_detail.product_price = rec.price1;\r\n            // }\r\n            // else if (await this.set_product_price == 2) {\r\n            //     this.import_detail.product_price = rec.price2;\r\n            // }\r\n            // ------------------------\r\n            this.fixcost_detail = await rec.job_type_name + \" / \" + rec.production_type_name + \" / \" +\r\n                rec.rub_size_name + \" / \" + rec.rub_style_name + \" / \" + rec.rub_grade_name + \" / \" +\r\n                this.func.numFormat(this.import_detail.product_price);\r\n        },\r\n        getProduct(rec) {\r\n            this.product_select = rec.production_type_name + \" / \" + rec.rub_size_name + \" / \" + rec.rub_style_name;\r\n            this.import_detail.product_list_id = rec.product_list_id;\r\n        },\r\n        getProductDetail(val) {\r\n            axios.get(`productdetail/search/${val}`).then((response) => {\r\n                this.product_detail = response.data;\r\n            });\r\n        },\r\n        getProductCost(val) {\r\n            axios.get(`productcost/readbyjobtype/${val}`).then((response) => {\r\n                this.product_cost = response.data;\r\n                $(document).ready(() => {\r\n                    $(\"#showProduct\").DataTable({\r\n                        \"order\": [[0, 'asc']],\r\n                        \"scrollY\": '200px',\r\n                        \"scorllX\": false,\r\n                        \"bJQueryUI\": true,\r\n                        \"sPaginationType\": \"full_numbers\",\r\n                        \"bFilter\": true,\r\n                        \"paging\": false,\r\n                        \"scrollCollapse\": true,\r\n                        \"rowReorder\": true,\r\n                        \"destroy\": true,\r\n                        language: {\r\n                            decimal: \"\",\r\n                            emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                            info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                            // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                            infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                            infoPostFix: \"\",\r\n                            thousands: \",\",\r\n                            lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                            loadingRecords: \"Loading...\",\r\n                            processing: \"\",\r\n                            search: \"ค้นหาข้อมูล:\",\r\n                            zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            paginate: {\r\n                                first: \"หน้าแรก\",\r\n                                last: \"หน้าสุดท้าย\",\r\n                                next: \"ต่อไป\",\r\n                                previous: \"ย้อนกลับ\",\r\n                            },\r\n                            aria: {\r\n                                sortAscending: \": activate to sort column ascending\",\r\n                                sortDescending: \": activate to sort column descending\",\r\n                            },\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n.offcanvas {\r\n    width: 500;\r\n}\r\n\r\n/*  */\r\n.import-header {\r\n    font-weight: bold;\r\n    color: blue;\r\n}\r\n\r\ninput[type=\"text\"]:disabled {\r\n    background: #e2e2e2;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}