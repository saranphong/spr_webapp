{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from \"@/axios\";\nimport $ from \"jquery\";\nimport { Modal } from \"bootstrap\"; // import Select2 from \"vue3-select2-component\";\n\nexport default {\n  name: \"FixCost\",\n\n  setup() {\n    let searchTerm = ref('');\n    return {\n      searchTerm\n    };\n  },\n\n  data() {\n    return {\n      product_detail: [],\n      pro_price_row: [],\n      rubber_size: [],\n      rubber_style: [],\n      rubber_grade: [],\n      fixCostData: {\n        no: \"\",\n        pro_type_no: \"\",\n        // link to product_type.pro_type_no\n        pro_de_no: \"\",\n        // link to product_detail.pro_de_no\n        rub_size_no: \"\",\n        rub_style_no: \"\",\n        rub_grade_no: \"\",\n        price1: \"\",\n        price2: \"\"\n      },\n      fixCostData_edit: {\n        no: \"\",\n        pro_type_no: \"\",\n        // link to product_type.pro_type_no\n        pro_de_no: \"\",\n        // link to product_detail.pro_de_no\n        rub_size_no: \"\",\n        rub_style_no: \"\",\n        rub_grade_no: \"\",\n        price1: \"\",\n        price2: \"\"\n      }\n    };\n  },\n\n  created() {},\n\n  mounted() {\n    this.loadDefaultData();\n    $(document).ready(function () {\n      $('.select2').select2({\n        placeholder: 'Select...',\n        width: '100%',\n        closeOnSelect: false,\n        theme: \"classic\"\n      });\n    });\n  },\n\n  methods: {\n    myChangeEvent(val) {\n      console.log(val);\n    },\n\n    mySelectEvent({\n      id,\n      text\n    }) {\n      console.log({\n        id,\n        text\n      });\n    },\n\n    loadDefaultData() {\n      this.getRubberSize();\n      this.getRubberStyle();\n      this.getRubbergrade();\n      this.getProductCost();\n    },\n\n    async newFixCost() {\n      if (confirm(\"ยืนยันการบันทึกข้อมูล ?\") == true) {\n        await axios.post(`productcost/new`, this.fixCostData).then(() => {\n          this.fixCostData = {\n            no: \"\",\n            pro_type_no: \"\",\n            pro_de_no: \"\",\n            rub_brand_no: \"\",\n            rub_size_no: \"\",\n            rub_style_no: \"\",\n            rub_grade_no: \"\",\n            price1: \"\",\n            price2: \"\"\n          };\n          this.hideModal(\"fixCost\");\n          $(\"#showproductcost\").DataTable().destroy(); //--- ทำลาย Datatable\n\n          this.getProductCost();\n          console.log('Process success!');\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    },\n\n    getFixCost(val) {\n      this.getProductDetail(val.pro_type_no);\n      this.fixCostData_edit.no = val.no;\n      this.fixCostData_edit.pro_type_no = val.pro_type_no;\n      this.fixCostData_edit.pro_de_no = val.pro_de_no;\n      this.fixCostData_edit.rub_brand_no = val.rub_brand_no;\n      this.fixCostData_edit.rub_size_no = val.rub_size_no;\n      this.fixCostData_edit.rub_style_no = val.rub_style_no;\n      this.fixCostData_edit.rub_grade_no = val.rub_grade_no;\n      this.fixCostData_edit.price1 = val.price1;\n      this.fixCostData_edit.price2 = val.price2;\n      this.showModal(\"editfixCost\");\n    },\n\n    async editFixCost() {\n      if (confirm(\"ยืนยันการเปลี่ยนแปลงข้อมูล ?\") == true) {\n        await axios.post(`productcost/update`, this.fixCostData_edit).then(() => {\n          this.fixCostData_edit = {\n            no: \"\",\n            pro_type_no: \"\",\n            pro_de_no: \"\",\n            rub_brand_no: \"\",\n            rub_size_no: \"\",\n            rub_style_no: \"\",\n            rub_grade_no: \"\",\n            price1: \"\",\n            price2: \"\"\n          };\n          this.hideModal(\"editfixCost\");\n          $(\"#showproductcost\").DataTable().destroy(); //--- ทำลาย Datatable\n\n          this.getProductCost();\n        });\n      }\n    },\n\n    getProductCost() {\n      axios.get(`productcost/read`).then(response => {\n        this.pro_price_row = response.data;\n        console.log(response.data);\n        $(document).ready(function () {\n          $(\"#showproductcost\").DataTable({\n            \"bJQueryUI\": true,\n            \"sPaginationType\": \"full_numbers\",\n            \"language\": {\n              \"decimal\": \"\",\n              \"emptyTable\": \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n              \"info\": \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n              // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n              \"infoEmpty\": \"ไม่พบข้อมูลที่ค้นหา\",\n              \"infoFiltered\": \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n              \"infoPostFix\": \"\",\n              \"thousands\": \",\",\n              \"lengthMenu\": \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n              \"loadingRecords\": \"Loading...\",\n              \"processing\": \"\",\n              \"search\": \"ค้นหาข้อมูล:\",\n              \"zeroRecords\": \"ไม่พบข้อมูลที่ค้นหา\",\n              \"paginate\": {\n                \"first\": \"หน้าแรก\",\n                \"last\": \"หน้าสุดท้าย\",\n                \"next\": \"ต่อไป\",\n                \"previous\": \"ย้อนกลับ\"\n              },\n              \"aria\": {\n                \"sortAscending\": \": activate to sort column ascending\",\n                \"sortDescending\": \": activate to sort column descending\"\n              }\n            }\n          });\n        });\n      });\n    },\n\n    getProductDetail(val) {\n      axios.get(`productdetail/search/${val}`).then(response => {\n        this.product_detail = response.data;\n      });\n    },\n\n    getRubberSize() {\n      axios.get(`rubbersize/read`).then(response => {\n        this.rubber_size = response.data;\n      });\n    },\n\n    getRubberStyle() {\n      axios.get(`rubberstyle/read`).then(response => {\n        this.rubber_style = response.data;\n      });\n    },\n\n    getRubbergrade() {\n      axios.get(`rubbergrade/read`).then(response => {\n        this.rubber_grade = response.data;\n      });\n    },\n\n    async showModal(e) {\n      let myModal = await new Modal(document.getElementById(e));\n      await myModal.show();\n    },\n\n    async hideModal(e) {\n      await $(`#${e}`).removeClass(\"in\");\n      await $(\".modal-backdrop\").remove();\n      await $(`#${e}`).hide();\n    },\n\n    numFormat(e) {\n      const nf = new Intl.NumberFormat('th-TH', {\n        style: 'currency',\n        currency: 'THB',\n        maximumFractionDigits: 2\n      }).format(e);\n      return nf;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAsPA,SAASA,GAAT,QAAoB,KAApB;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,KAAT,QAAsB,WAAtB,C,CAEA;;AAEA,eAAe;EACVC,IAAI,EAAE,SADI;;EAEVC,KAAK,GAAG;IACH,IAAIC,UAAS,GAAIN,GAAG,CAAC,EAAD,CAApB;IACA,OAAO;MACFM;IADE,CAAP;EAGJ,CAPS;;EAQVC,IAAI,GAAG;IACF,OAAO;MACFC,cAAc,EAAE,EADd;MAEFC,aAAa,EAAE,EAFb;MAGFC,WAAW,EAAE,EAHX;MAIFC,YAAY,EAAE,EAJZ;MAKFC,YAAY,EAAE,EALZ;MAMFC,WAAW,EAAE;QACRC,EAAE,EAAE,EADI;QAERC,WAAW,EAAE,EAFL;QAES;QACjBC,SAAS,EAAE,EAHH;QAGO;QACfC,WAAW,EAAE,EAJL;QAKRC,YAAY,EAAE,EALN;QAMRC,YAAY,EAAE,EANN;QAORC,MAAM,EAAE,EAPA;QAQRC,MAAM,EAAE;MARA,CANX;MAgBFC,gBAAgB,EAAE;QACbR,EAAE,EAAE,EADS;QAEbC,WAAW,EAAE,EAFA;QAEI;QACjBC,SAAS,EAAE,EAHE;QAGE;QACfC,WAAW,EAAE,EAJA;QAKbC,YAAY,EAAE,EALD;QAMbC,YAAY,EAAE,EAND;QAObC,MAAM,EAAE,EAPK;QAQbC,MAAM,EAAE;MARK;IAhBhB,CAAP;EA2BJ,CApCS;;EAqCVE,OAAO,GAAG,CAET,CAvCS;;EAwCVC,OAAO,GAAG;IACL,KAAKC,eAAL;IACAvB,CAAC,CAACwB,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAY;MACzBzB,CAAC,CAAC,UAAD,CAAD,CAAc0B,OAAd,CAAsB;QACjBC,WAAW,EAAE,WADI;QAEjBC,KAAK,EAAE,MAFU;QAGjBC,aAAa,EAAE,KAHE;QAIjBC,KAAK,EAAE;MAJU,CAAtB;IAMJ,CAPD;EAQJ,CAlDS;;EAmDVC,OAAO,EAAE;IACJC,aAAa,CAACC,GAAD,EAAM;MACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ;IACJ,CAHG;;IAIJG,aAAa,CAAC;MAAEC,EAAF;MAAMC;IAAN,CAAD,EAAe;MACvBJ,OAAO,CAACC,GAAR,CAAY;QAAEE,EAAF;QAAMC;MAAN,CAAZ;IACJ,CANG;;IAOJf,eAAe,GAAG;MACb,KAAKgB,aAAL;MACA,KAAKC,cAAL;MACA,KAAKC,cAAL;MACA,KAAKC,cAAL;IACJ,CAZG;;IAaJ,MAAMC,UAAN,GAAmB;MACd,IAAIC,OAAO,CAAC,yBAAD,CAAP,IAAsC,IAA1C,EAAgD;QAC3C,MAAM7C,KAAK,CAAC8C,IAAN,CAAY,iBAAZ,EAA8B,KAAKlC,WAAnC,EAAgDmC,IAAhD,CAAqD,MAAM;UAC5D,KAAKnC,WAAL,GAAmB;YACdC,EAAE,EAAE,EADU;YAEdC,WAAW,EAAE,EAFC;YAGdC,SAAS,EAAE,EAHG;YAIdiC,YAAY,EAAE,EAJA;YAKdhC,WAAW,EAAE,EALC;YAMdC,YAAY,EAAE,EANA;YAOdC,YAAY,EAAE,EAPA;YAQdC,MAAM,EAAE,EARM;YASdC,MAAM,EAAE;UATM,CAAnB;UAWA,KAAK6B,SAAL,CAAe,SAAf;UACAhD,CAAC,CAAC,kBAAD,CAAD,CAAsBiD,SAAtB,GAAkCC,OAAlC,GAb4D,CAaf;;UAC7C,KAAKR,cAAL;UACAR,OAAO,CAACC,GAAR,CAAY,kBAAZ;QACJ,CAhBK,EAgBHgB,KAhBG,CAgBGC,KAAI,IAAK;UACblB,OAAO,CAACC,GAAR,CAAYiB,KAAZ;QACJ,CAlBK,CAAN;MAmBL;IACJ,CAnCG;;IAoCJC,UAAU,CAACpB,GAAD,EAAM;MACX,KAAKqB,gBAAL,CAAsBrB,GAAG,CAACpB,WAA1B;MACA,KAAKO,gBAAL,CAAsBR,EAAtB,GAA2BqB,GAAG,CAACrB,EAA/B;MACA,KAAKQ,gBAAL,CAAsBP,WAAtB,GAAoCoB,GAAG,CAACpB,WAAxC;MACA,KAAKO,gBAAL,CAAsBN,SAAtB,GAAkCmB,GAAG,CAACnB,SAAtC;MACA,KAAKM,gBAAL,CAAsB2B,YAAtB,GAAqCd,GAAG,CAACc,YAAzC;MACA,KAAK3B,gBAAL,CAAsBL,WAAtB,GAAoCkB,GAAG,CAAClB,WAAxC;MACA,KAAKK,gBAAL,CAAsBJ,YAAtB,GAAqCiB,GAAG,CAACjB,YAAzC;MACA,KAAKI,gBAAL,CAAsBH,YAAtB,GAAqCgB,GAAG,CAAChB,YAAzC;MACA,KAAKG,gBAAL,CAAsBF,MAAtB,GAA+Be,GAAG,CAACf,MAAnC;MACA,KAAKE,gBAAL,CAAsBD,MAAtB,GAA+Bc,GAAG,CAACd,MAAnC;MACA,KAAKoC,SAAL,CAAe,aAAf;IACJ,CAhDG;;IAiDJ,MAAMC,WAAN,GAAoB;MACf,IAAIZ,OAAO,CAAC,8BAAD,CAAP,IAA2C,IAA/C,EAAqD;QAChD,MAAM7C,KAAK,CAAC8C,IAAN,CAAY,oBAAZ,EAAiC,KAAKzB,gBAAtC,EAAwD0B,IAAxD,CAA6D,MAAM;UACpE,KAAK1B,gBAAL,GAAwB;YACnBR,EAAE,EAAE,EADe;YAEnBC,WAAW,EAAE,EAFM;YAGnBC,SAAS,EAAE,EAHQ;YAInBiC,YAAY,EAAE,EAJK;YAKnBhC,WAAW,EAAE,EALM;YAMnBC,YAAY,EAAE,EANK;YAOnBC,YAAY,EAAE,EAPK;YAQnBC,MAAM,EAAE,EARW;YASnBC,MAAM,EAAE;UATW,CAAxB;UAWA,KAAK6B,SAAL,CAAe,aAAf;UACAhD,CAAC,CAAC,kBAAD,CAAD,CAAsBiD,SAAtB,GAAkCC,OAAlC,GAboE,CAavB;;UAC7C,KAAKR,cAAL;QACJ,CAfK,CAAN;MAgBL;IACJ,CApEG;;IAqEJA,cAAc,GAAG;MACZ3C,KAAK,CAAC0D,GAAN,CAAW,kBAAX,EAA8BX,IAA9B,CAAoCY,QAAD,IAAc;QAC5C,KAAKnD,aAAL,GAAqBmD,QAAQ,CAACrD,IAA9B;QACA6B,OAAO,CAACC,GAAR,CAAYuB,QAAQ,CAACrD,IAArB;QACAL,CAAC,CAACwB,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAY;UACzBzB,CAAC,CAAC,kBAAD,CAAD,CAAsBiD,SAAtB,CAAgC;YAC3B,aAAa,IADc;YAE3B,mBAAmB,cAFQ;YAG3B,YAAY;cACP,WAAW,EADJ;cAEP,cAAc,4BAFP;cAGP,QAAQ,0BAHD;cAIP;cACA,aAAa,qBALN;cAMP,gBAAgB,kCANT;cAOP,eAAe,EAPR;cAQP,aAAa,GARN;cASP,cAAc,4BATP;cAUP,kBAAkB,YAVX;cAWP,cAAc,EAXP;cAYP,UAAU,cAZH;cAaP,eAAe,qBAbR;cAcP,YAAY;gBACP,SAAS,SADF;gBAEP,QAAQ,aAFD;gBAGP,QAAQ,OAHD;gBAIP,YAAY;cAJL,CAdL;cAoBP,QAAQ;gBACH,iBAAiB,qCADd;gBAEH,kBAAkB;cAFf;YApBD;UAHe,CAAhC;QA6BJ,CA9BD;MA+BJ,CAlCD;IAmCJ,CAzGG;;IA0GJK,gBAAgB,CAACrB,GAAD,EAAM;MACjBlC,KAAK,CAAC0D,GAAN,CAAW,wBAAuBxB,GAAI,EAAtC,EAAyCa,IAAzC,CAA+CY,QAAD,IAAc;QACvD,KAAKpD,cAAL,GAAsBoD,QAAQ,CAACrD,IAA/B;MACJ,CAFD;IAGJ,CA9GG;;IA+GJkC,aAAa,GAAG;MACXxC,KAAK,CAAC0D,GAAN,CAAW,iBAAX,EAA6BX,IAA7B,CAAmCY,QAAD,IAAc;QAC3C,KAAKlD,WAAL,GAAmBkD,QAAQ,CAACrD,IAA5B;MACJ,CAFD;IAGJ,CAnHG;;IAoHJmC,cAAc,GAAG;MACZzC,KAAK,CAAC0D,GAAN,CAAW,kBAAX,EAA8BX,IAA9B,CAAoCY,QAAD,IAAc;QAC5C,KAAKjD,YAAL,GAAoBiD,QAAQ,CAACrD,IAA7B;MACJ,CAFD;IAGJ,CAxHG;;IAyHJoC,cAAc,GAAG;MACZ1C,KAAK,CAAC0D,GAAN,CAAW,kBAAX,EAA8BX,IAA9B,CAAoCY,QAAD,IAAc;QAC5C,KAAKhD,YAAL,GAAoBgD,QAAQ,CAACrD,IAA7B;MACJ,CAFD;IAGJ,CA7HG;;IA8HJ,MAAMkD,SAAN,CAAgBI,CAAhB,EAAmB;MACd,IAAIC,OAAM,GAAI,MAAM,IAAI3D,KAAJ,CAAUuB,QAAQ,CAACqC,cAAT,CAAwBF,CAAxB,CAAV,CAApB;MACA,MAAMC,OAAO,CAACE,IAAR,EAAN;IACJ,CAjIG;;IAkIJ,MAAMd,SAAN,CAAgBW,CAAhB,EAAmB;MACd,MAAM3D,CAAC,CAAE,IAAG2D,CAAE,EAAP,CAAD,CAAWI,WAAX,CAAuB,IAAvB,CAAN;MACA,MAAM/D,CAAC,CAAC,iBAAD,CAAD,CAAqBgE,MAArB,EAAN;MACA,MAAMhE,CAAC,CAAE,IAAG2D,CAAE,EAAP,CAAD,CAAWM,IAAX,EAAN;IACJ,CAtIG;;IAuIJC,SAAS,CAACP,CAAD,EAAI;MACR,MAAMQ,EAAC,GAAI,IAAIC,IAAI,CAACC,YAAT,CAAsB,OAAtB,EAA+B;QACrCC,KAAK,EAAE,UAD8B;QAErCC,QAAQ,EAAE,KAF2B;QAGrCC,qBAAqB,EAAE;MAHc,CAA/B,EAIRC,MAJQ,CAIDd,CAJC,CAAX;MAKA,OAAOQ,EAAP;IACJ;;EA9IG;AAnDC,CAAf","names":["ref","axios","$","Modal","name","setup","searchTerm","data","product_detail","pro_price_row","rubber_size","rubber_style","rubber_grade","fixCostData","no","pro_type_no","pro_de_no","rub_size_no","rub_style_no","rub_grade_no","price1","price2","fixCostData_edit","created","mounted","loadDefaultData","document","ready","select2","placeholder","width","closeOnSelect","theme","methods","myChangeEvent","val","console","log","mySelectEvent","id","text","getRubberSize","getRubberStyle","getRubbergrade","getProductCost","newFixCost","confirm","post","then","rub_brand_no","hideModal","DataTable","destroy","catch","error","getFixCost","getProductDetail","showModal","editFixCost","get","response","e","myModal","getElementById","show","removeClass","remove","hide","numFormat","nf","Intl","NumberFormat","style","currency","maximumFractionDigits","format"],"sourceRoot":"","sources":["D:\\Project-vue\\SPR-PROJECT\\main-app-test\\src\\components\\productFixcost.vue"],"sourcesContent":["<template>\r\n     <!-- Modal ในส่วนของการเพิ่มข้อมูลใหม่ -->\r\n     <div class=\"modal fade shadow rounded-3\" id=\"fixCost\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\r\n          aria-hidden=\"true\">\r\n          <div class=\"modal-dialog\">\r\n               <div class=\"modal-content\">\r\n                    <div class=\"modal-header bg-primary bg-opacity-75\">\r\n                         <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\" style=\"color:white\">กำหนดราคาสินค้า</h1>\r\n                         <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                         <form>\r\n                              <!-- <div class=\"form-floating mb-2\">\r\n                                   <input type=\"text\" class=\"form-control\" required placeholder=\"รหัสราคา\">\r\n                                   <label for=\"floatingInput\">รหัสราคา</label>\r\n                              </div> -->\r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"floatingSelect\"\r\n                                        aria-label=\"Floating label select example\"\r\n                                        v-model=\"this.fixCostData.pro_type_no\"\r\n                                        @change=\"getProductDetail(this.fixCostData.pro_type_no)\">\r\n                                        <option value=\"1\">ค่าจ้าง</option>\r\n                                        <option value=\"2\">ยางพร้อมโครง</option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">ประเภทการผลิต</label>\r\n                              </div>\r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"floatingSelect\"\r\n                                        aria-label=\"Floating label select example\" v-model=\"this.fixCostData.pro_de_no\">\r\n                                        <option v-for=\"productDetail in product_detail\" :key=\"productDetail.pro_de_no\"\r\n                                             :value=\"productDetail.pro_de_no\">\r\n                                             {{ productDetail.pro_detail }}\r\n                                        </option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">รูปแบบการอัดดอก</label>\r\n                              </div>\r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"floatingSelect\"\r\n                                        aria-label=\"Floating label select example\"\r\n                                        v-model=\"this.fixCostData.rub_size_no\">\r\n                                        <option v-for=\"rubberSize in rubber_size\" :key=\"rubberSize.id\"\r\n                                             :value=\"rubberSize.id\">\r\n                                             {{ rubberSize.rub_size_id }} > {{ rubberSize.rub_size_detail }}\r\n                                        </option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">ขนาดยาง</label>\r\n                              </div>\r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"floatingSelect\"\r\n                                        aria-label=\"Floating label select example\"\r\n                                        v-model=\"this.fixCostData.rub_style_no\">\r\n                                        <option v-for=\"rubberStyle in rubber_style\" :key=\"rubberStyle.id\"\r\n                                             :value=\"rubberStyle.id\">\r\n                                             {{ rubberStyle.rub_style_detail }}\r\n                                        </option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">ลายดอก</label>\r\n                              </div>\r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"floatingSelect\"\r\n                                        aria-label=\"Floating label select example\"\r\n                                        v-model=\"this.fixCostData.rub_grade_no\">\r\n                                        <option v-for=\"rubberGrade in rubber_grade\" :key=\"rubberGrade.id\"\r\n                                             :value=\"rubberGrade.id\">\r\n                                             {{ rubberGrade.rub_grade_name }}\r\n                                        </option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">เกรดยาง</label>\r\n                              </div>\r\n                              <div class=\"input-group mb-2\">\r\n                                   <div class=\"form-floating\">\r\n                                        <input type=\"number\" class=\"form-control\" required placeholder=\"ราคา\"\r\n                                             v-model=\"this.fixCostData.price1\">\r\n                                        <label for=\"floatingInput\">ราคาเงินสด</label>\r\n                                   </div>\r\n                                   <span class=\"input-group-text\">บาท</span>\r\n                              </div>\r\n                              <div class=\"input-group mb-2\">\r\n                                   <div class=\"form-floating\">\r\n                                        <input type=\"number\" class=\"form-control\" required placeholder=\"ราคา\"\r\n                                             v-model=\"this.fixCostData.price2\">\r\n                                        <label for=\"floatingInput\">ราคาเงินสด+จัดส่ง</label>\r\n                                   </div>\r\n                                   <span class=\"input-group-text\">บาท</span>\r\n                              </div>\r\n                         </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                         <button type=\"button\" class=\"btn btn-secondary\"\r\n                              @click.prevent=\"hideModal('fixCost')\">ปิด</button>\r\n                         <button type=\"button\" class=\"btn btn-primary\" @click.prevent=\"newFixCost()\">บันทึก</button>\r\n                         <!-- {{ this.fixCostData }} -->\r\n                    </div>\r\n               </div>\r\n          </div>\r\n     </div>\r\n     <!-- สิ้นสุดการเพิ่มข้อมูลใหม่ -->\r\n\r\n     <!-- Modal ในส่วนของการแก้ไขข้อมูล -->\r\n     <div class=\"modal fade shadow rounded-3\" id=\"editfixCost\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\r\n          aria-hidden=\"true\">\r\n          <div class=\"modal-dialog\">\r\n               <div class=\"modal-content\">\r\n                    <div class=\"modal-header bg-danger bg-opacity-75\">\r\n                         <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\" style=\"color:white\">แก้ไขราคาสินค้า</h1>\r\n                         <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                         <form>\r\n                              <!-- <div class=\"form-floating mb-2\">\r\n                                   <input type=\"text\" class=\"form-control\" required placeholder=\"รหัสราคา\">\r\n                                   <label for=\"floatingInput\">รหัสราคา</label>\r\n                              </div> -->\r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"floatingSelect\"\r\n                                        aria-label=\"Floating label select example\"\r\n                                        v-model=\"this.fixCostData_edit.pro_type_no\"\r\n                                        @change=\"getProductDetail(this.fixCostData_edit.pro_type_no)\">\r\n                                        <option value=\"1\">ค่าจ้าง</option>\r\n                                        <option value=\"2\">ยางพร้อมโครง</option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">ประเภทการผลิต</label>\r\n                              </div>\r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"floatingSelect\"\r\n                                        aria-label=\"Floating label select example\"\r\n                                        v-model=\"this.fixCostData_edit.pro_de_no\">\r\n                                        <option v-for=\"productDetail in product_detail\" :key=\"productDetail.pro_de_no\"\r\n                                             :value=\"productDetail.pro_de_no\">\r\n                                             {{ productDetail.pro_detail }}\r\n                                        </option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">รูปแบบการอัดดอก</label>\r\n                              </div>\r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"findSize\" aria-label=\"Floating label select example\"\r\n                                        v-model=\"this.fixCostData_edit.rub_size_no\">\r\n                                        <option v-for=\"rubberSize in rubber_size\" :key=\"rubberSize.id\"\r\n                                             :value=\"rubberSize.id\">\r\n                                             {{ rubberSize.rub_size_id }} > {{ rubberSize.rub_size_detail }}\r\n                                        </option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">ขนาดยาง</label>\r\n                              </div>                                                     \r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"floatingSelect\"\r\n                                        aria-label=\"Floating label select example\"\r\n                                        v-model=\"this.fixCostData_edit.rub_style_no\">\r\n                                        <option v-for=\"rubberStyle in rubber_style\" :key=\"rubberStyle.id\"\r\n                                             :value=\"rubberStyle.id\">\r\n                                             {{ rubberStyle.rub_style_detail }}\r\n                                        </option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">ลายดอก</label>\r\n                              </div>\r\n                              <div class=\"form-floating mb-2 mt-2\">\r\n                                   <select class=\"form-select\" id=\"floatingSelect\"\r\n                                        aria-label=\"Floating label select example\"\r\n                                        v-model=\"this.fixCostData_edit.rub_grade_no\">\r\n                                        <option v-for=\"rubberGrade in rubber_grade\" :key=\"rubberGrade.id\"\r\n                                             :value=\"rubberGrade.id\">\r\n                                             {{ rubberGrade.rub_grade_name }}\r\n                                        </option>\r\n                                   </select>\r\n                                   <label for=\"floatingSelect\">เกรดยาง</label>\r\n                              </div>\r\n                              <div class=\"input-group mb-2\">\r\n                                   <div class=\"form-floating\">\r\n                                        <input type=\"number\" class=\"form-control\" required placeholder=\"ราคา\"\r\n                                             v-model=\"this.fixCostData_edit.price1\">\r\n                                        <label for=\"floatingInput\">ราคาเงินสด</label>\r\n                                   </div>\r\n                                   <span class=\"input-group-text\">บาท</span>\r\n                              </div>\r\n                              <div class=\"input-group mb-2\">\r\n                                   <div class=\"form-floating\">\r\n                                        <input type=\"number\" class=\"form-control\" required placeholder=\"ราคา\"\r\n                                             v-model=\"this.fixCostData_edit.price2\">\r\n                                        <label for=\"floatingInput\">ราคาเงินสด+จัดส่ง</label>\r\n                                   </div>\r\n                                   <span class=\"input-group-text\">บาท</span>\r\n                              </div>\r\n                         </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                         <button type=\"button\" class=\"btn btn-secondary\"\r\n                              @click.prevent=\"hideModal('editfixCost')\">ปิด</button>\r\n                         <button type=\"button\" class=\"btn btn-primary\" @click.prevent=\"editFixCost()\">บันทึก</button>\r\n                         <!-- {{ this.fixCostData_edit }} -->\r\n                    </div>\r\n                    <input type=\"text\" id=\"search\">\r\n               </div>\r\n          </div>\r\n     </div>\r\n     <!-- สิ้นสุดการแก้ไขข้อมูล -->\r\n\r\n     <!-- ส่วนของ Datatable แสดงรายการข้อมูล -->\r\n     <div class=\"card border-dark border-2 shadow\" style=\"width:100% ;\">\r\n          <table id=\"showproductcost\" class=\"ms-2 table table-striped table-hover table-sm\"\r\n               style=\"width:100%; align-items: center\">\r\n               <thead>\r\n                    <tr>\r\n                         <th>ลำดับ</th>\r\n                         <th>ประเภทการผลิต</th>\r\n                         <th>รูปแบบการผลิต</th>\r\n                         <th>ขนาด</th>\r\n                         <th>ลายดอก</th>\r\n                         <th>เกรดยาง</th>\r\n                         <th>เงินสด</th>\r\n                         <th>เงินสด+ส่ง</th>\r\n                         <th>\r\n                              <button class=\"btn btn-success btn-sm me-md-2\" @click.prevent=\"showModal('fixCost')\">\r\n                                   <!-- ปุ่มเพิ่มข้อมูล -->\r\n                                   <font-awesome-icon icon=\"fa-solid fa-plus\" />\r\n                                   <!-- <font-awesome-icon icon=\"fa-solid fa-user-plus\" /> -->\r\n                              </button>\r\n                         </th>\r\n                    </tr>\r\n               </thead>\r\n               <tbody class=\"table-group-divider\">\r\n                    <tr v-for=\"rec in pro_price_row\" :key=\"rec.no\" @click.prevent=\"getFixCost(rec)\">\r\n                         <td>{{ rec.no }}</td>\r\n                         <td>{{ rec.pro_type_name }}</td>\r\n                         <td>{{ rec.pro_detail }}</td>\r\n                         <td>{{ rec.rub_size_id }}</td>\r\n                         <td>{{ rec.rub_style_detail }}</td>\r\n                         <td>{{ rec.rub_grade_name }}</td>\r\n                         <td>{{ this.numFormat(rec.price1) }}</td>\r\n                         <td>{{ this.numFormat(rec.price2) }}</td>\r\n                         <td style=\"text-align:left\">\r\n                              <button id=\"edit\" type=\"button\" class=\"btn btn-primary btn-sm me-md-2\"\r\n                                   @click.prevent=\"getFixCost(rec)\">\r\n                                   <!-- ปุ่มแก้ไขข้อมูล -->\r\n                                   <font-awesome-icon icon=\"fa-solid fa-pen\" />\r\n                                   <!-- <font-awesome-icon icon=\"fa-solid fa-user-pen\" /> -->\r\n                              </button>\r\n                         </td>\r\n                    </tr>\r\n               </tbody>\r\n          </table>\r\n     </div>\r\n\r\n     <!-- สิ้นสุดการแสดงข้อมูล -->\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\"\r\n\r\nimport axios from \"@/axios\";\r\nimport $ from \"jquery\";\r\nimport { Modal } from \"bootstrap\";\r\n\r\n// import Select2 from \"vue3-select2-component\";\r\n\r\nexport default {\r\n     name: \"FixCost\",\r\n     setup() {\r\n          let searchTerm = ref('')\r\n          return {\r\n               searchTerm\r\n          }\r\n     },\r\n     data() {\r\n          return {\r\n               product_detail: [],\r\n               pro_price_row: [],\r\n               rubber_size: [],\r\n               rubber_style: [],\r\n               rubber_grade: [],\r\n               fixCostData: {\r\n                    no: \"\",\r\n                    pro_type_no: \"\", // link to product_type.pro_type_no\r\n                    pro_de_no: \"\", // link to product_detail.pro_de_no\r\n                    rub_size_no: \"\",\r\n                    rub_style_no: \"\",\r\n                    rub_grade_no: \"\",\r\n                    price1: \"\",\r\n                    price2: \"\",\r\n               },\r\n               fixCostData_edit: {\r\n                    no: \"\",\r\n                    pro_type_no: \"\", // link to product_type.pro_type_no\r\n                    pro_de_no: \"\", // link to product_detail.pro_de_no\r\n                    rub_size_no: \"\",\r\n                    rub_style_no: \"\",\r\n                    rub_grade_no: \"\",\r\n                    price1: \"\",\r\n                    price2: \"\",\r\n               },\r\n          }\r\n     },\r\n     created() {\r\n\r\n     },\r\n     mounted() {\r\n          this.loadDefaultData();\r\n          $(document).ready(function () {\r\n               $('.select2').select2({\r\n                    placeholder: 'Select...',\r\n                    width: '100%',\r\n                    closeOnSelect: false,\r\n                    theme: \"classic\"\r\n               });\r\n          })\r\n     },\r\n     methods: {\r\n          myChangeEvent(val) {\r\n               console.log(val);\r\n          },\r\n          mySelectEvent({ id, text }) {\r\n               console.log({ id, text })\r\n          },\r\n          loadDefaultData() {\r\n               this.getRubberSize();\r\n               this.getRubberStyle();\r\n               this.getRubbergrade();\r\n               this.getProductCost();\r\n          },\r\n          async newFixCost() {\r\n               if (confirm(\"ยืนยันการบันทึกข้อมูล ?\") == true) {\r\n                    await axios.post(`productcost/new`, this.fixCostData).then(() => {\r\n                         this.fixCostData = {\r\n                              no: \"\",\r\n                              pro_type_no: \"\",\r\n                              pro_de_no: \"\",\r\n                              rub_brand_no: \"\",\r\n                              rub_size_no: \"\",\r\n                              rub_style_no: \"\",\r\n                              rub_grade_no: \"\",\r\n                              price1: \"\",\r\n                              price2: \"\"\r\n                         }\r\n                         this.hideModal(\"fixCost\");\r\n                         $(\"#showproductcost\").DataTable().destroy(); //--- ทำลาย Datatable\r\n                         this.getProductCost();\r\n                         console.log('Process success!');\r\n                    }).catch(error => {\r\n                         console.log(error)\r\n                    })\r\n               }\r\n          },\r\n          getFixCost(val) {\r\n               this.getProductDetail(val.pro_type_no);\r\n               this.fixCostData_edit.no = val.no;\r\n               this.fixCostData_edit.pro_type_no = val.pro_type_no;\r\n               this.fixCostData_edit.pro_de_no = val.pro_de_no;\r\n               this.fixCostData_edit.rub_brand_no = val.rub_brand_no;\r\n               this.fixCostData_edit.rub_size_no = val.rub_size_no;\r\n               this.fixCostData_edit.rub_style_no = val.rub_style_no;\r\n               this.fixCostData_edit.rub_grade_no = val.rub_grade_no;\r\n               this.fixCostData_edit.price1 = val.price1;\r\n               this.fixCostData_edit.price2 = val.price2;\r\n               this.showModal(\"editfixCost\");\r\n          },\r\n          async editFixCost() {\r\n               if (confirm(\"ยืนยันการเปลี่ยนแปลงข้อมูล ?\") == true) {\r\n                    await axios.post(`productcost/update`, this.fixCostData_edit).then(() => {\r\n                         this.fixCostData_edit = {\r\n                              no: \"\",\r\n                              pro_type_no: \"\",\r\n                              pro_de_no: \"\",\r\n                              rub_brand_no: \"\",\r\n                              rub_size_no: \"\",\r\n                              rub_style_no: \"\",\r\n                              rub_grade_no: \"\",\r\n                              price1: \"\",\r\n                              price2: \"\",\r\n                         };\r\n                         this.hideModal(\"editfixCost\");\r\n                         $(\"#showproductcost\").DataTable().destroy(); //--- ทำลาย Datatable\r\n                         this.getProductCost();\r\n                    })\r\n               }\r\n          },\r\n          getProductCost() {\r\n               axios.get(`productcost/read`).then((response) => {\r\n                    this.pro_price_row = response.data;\r\n                    console.log(response.data)\r\n                    $(document).ready(function () {\r\n                         $(\"#showproductcost\").DataTable({\r\n                              \"bJQueryUI\": true,\r\n                              \"sPaginationType\": \"full_numbers\",\r\n                              \"language\": {\r\n                                   \"decimal\": \"\",\r\n                                   \"emptyTable\": \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                                   \"info\": \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                                   // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                                   \"infoEmpty\": \"ไม่พบข้อมูลที่ค้นหา\",\r\n                                   \"infoFiltered\": \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                                   \"infoPostFix\": \"\",\r\n                                   \"thousands\": \",\",\r\n                                   \"lengthMenu\": \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                                   \"loadingRecords\": \"Loading...\",\r\n                                   \"processing\": \"\",\r\n                                   \"search\": \"ค้นหาข้อมูล:\",\r\n                                   \"zeroRecords\": \"ไม่พบข้อมูลที่ค้นหา\",\r\n                                   \"paginate\": {\r\n                                        \"first\": \"หน้าแรก\",\r\n                                        \"last\": \"หน้าสุดท้าย\",\r\n                                        \"next\": \"ต่อไป\",\r\n                                        \"previous\": \"ย้อนกลับ\"\r\n                                   },\r\n                                   \"aria\": {\r\n                                        \"sortAscending\": \": activate to sort column ascending\",\r\n                                        \"sortDescending\": \": activate to sort column descending\"\r\n                                   }\r\n                              }\r\n                         });\r\n                    });\r\n               });\r\n          },\r\n          getProductDetail(val) {\r\n               axios.get(`productdetail/search/${val}`).then((response) => {\r\n                    this.product_detail = response.data;\r\n               });\r\n          },\r\n          getRubberSize() {\r\n               axios.get(`rubbersize/read`).then((response) => {\r\n                    this.rubber_size = response.data;\r\n               });\r\n          },\r\n          getRubberStyle() {\r\n               axios.get(`rubberstyle/read`).then((response) => {\r\n                    this.rubber_style = response.data;\r\n               });\r\n          },\r\n          getRubbergrade() {\r\n               axios.get(`rubbergrade/read`).then((response) => {\r\n                    this.rubber_grade = response.data;\r\n               });\r\n          },\r\n          async showModal(e) {\r\n               let myModal = await new Modal(document.getElementById(e))\r\n               await myModal.show()\r\n          },\r\n          async hideModal(e) {\r\n               await $(`#${e}`).removeClass(\"in\");\r\n               await $(\".modal-backdrop\").remove();\r\n               await $(`#${e}`).hide();\r\n          },\r\n          numFormat(e) {\r\n               const nf = new Intl.NumberFormat('th-TH', {\r\n                    style: 'currency',\r\n                    currency: 'THB',\r\n                    maximumFractionDigits: 2,\r\n               }).format(e)\r\n               return nf;\r\n          },\r\n     }\r\n}\r\n</script>"]},"metadata":{},"sourceType":"module"}