{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport $ from \"jquery\";\nimport axios from \"@/axios\"; //import $ from \"jquery\";\n// const axios = require(\"@/axios\");\n\nexport default {\n  data() {\n    return {\n      cust_id: \"\",\n      province_id: [],\n      customer: {\n        customerId: \"\",\n        customerName: \"\",\n        customerAddr: \"\",\n        provinceId: \"\",\n        postCode: \"\",\n        customerTel: \"\",\n        contactName: \"\",\n        contactTel: \"\",\n        contactPosition: \"\",\n        payType: \"1\",\n        creditDay: \"0\",\n        creditLimit: \"0\",\n        priceType: \"1\",\n        remark: \"\",\n        customerDel: \"1\"\n      }\n    };\n  },\n\n  mounted() {\n    this.getProvince();\n    this.onSelect2_1();\n  },\n\n  methods: {\n    onSelect2_1() {\n      $(document).ready(() => {\n        let rec = this.customer;\n        $('#findSelect').select2({\n          theme: \"bootstrap-5\",\n          closeOnSelect: true,\n          width: '100%',\n          dropdownParent: $(\"#findSelect\").parent(),\n          placeholder: \"--- เลือกจังหวัด ---\" // tags: true,\n\n        });\n        $('#findSelect').on('select2:select', function (e) {\n          let data = e.params.data; // $('#findSize1').val(data.id)\n\n          rec.provinceId = data.id;\n        });\n      });\n    },\n\n    async saveNewCustomer() {\n      if (confirm(\"ยืนยันการบันทึกข้อมูล ?\") == true) {\n        await axios.post(`customer/new`, this.customer).then(() => {\n          this.customer = {\n            customerId: \"\",\n            customerName: \"\",\n            customerAddr: \"\",\n            provinceId: \"\",\n            postCode: \"\",\n            customerTel: \"\",\n            contactName: \"\",\n            contactTel: \"\",\n            contactPosition: \"\",\n            payType: \"\",\n            creditDay: \"\",\n            creditLimit: \"\",\n            priceType: \"\",\n            remark: \"\",\n            customerDel: \"\"\n          };\n          console.log('Process success!');\n        }).catch(error => {\n          console.log(error);\n        }); //await this.$router.push(\"/\");\n        //await this.$router.go();\n\n        await this.$router.push(\"/showcustomer\");\n      }\n    },\n\n    getProvince() {\n      axios.get(`province/read`).then(response => {\n        this.province_id = response.data;\n      });\n    },\n\n    chkCustomerID(val) {\n      //this.customer.customerId = this.customer.customerId.toLocaleUpperCase();\n      axios.get(`customer/search/${val}`).then(response => {\n        this.cust_id = response.data;\n      });\n    },\n\n    setCreditday() {\n      if (this.customer.payType == 1) {\n        this.customer.creditDay = 0;\n        this.customer.creditLimit = 0;\n        this.customer.priceType = 1;\n      } else {\n        this.customer.creditDay = 30;\n        this.customer.creditLimit = 0;\n        this.customer.priceType = 3;\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["$","axios","data","cust_id","province_id","customer","customerId","customerName","customerAddr","provinceId","postCode","customerTel","contactName","contactTel","contactPosition","payType","creditDay","creditLimit","priceType","remark","customerDel","mounted","getProvince","onSelect2_1","methods","document","ready","rec","select2","theme","closeOnSelect","width","dropdownParent","parent","placeholder","on","e","params","id","saveNewCustomer","confirm","post","then","console","log","catch","error","$router","push","get","response","chkCustomerID","val","setCreditday"],"sourceRoot":"","sources":["D:\\Project-vue\\SPR-PROJECT\\main-app-test\\src\\components\\newCustomer.vue"],"sourcesContent":["<template>\r\n     <div class=\"container-fluid align-content-start ms-0\">\r\n          <div class=\"card card-primary mx-auto\" style=\"width:auto\">\r\n               <div class=\"card-header bg-primary\">\r\n                    <h5 class=\"card-title\" style=\"font-size: 1.5rem; color: white\">\r\n                         เพิ่มข้อมูลลูกค้า\r\n                    </h5>\r\n               </div>\r\n               <form>\r\n                    <div class=\"card-body\">\r\n                         <div class=\"form-group\">\r\n                              <div class=\"row\">\r\n                                   <div class=\"col\">\r\n                                        <div class=\"mb-2\">\r\n                                             <label style=\"color: red\">*รหัสลูกค้า</label>\r\n                                             <input type=\"text\" class=\"form-control text-uppercase\"\r\n                                                  v-model.trim=\"customer.customerId\"\r\n                                                  @input=\"this.customerId = this.customerId.toUpperCase()\"\r\n                                                  @keyup=\"chkCustomerID(customer.customerId)\" />\r\n                                             <span>\r\n                                                  <label v-if=\"this.cust_id != ''\"\r\n                                                       style=\"color:red;font-weight:bold\">***รหัสนี้ซ้ำไม่สามารถใช้ได้***\r\n                                                  </label>\r\n                                             </span>\r\n                                        </div>\r\n                                        <div class=\"mb-2\">\r\n                                             <label style=\"color: red\">*ชื่อลูกค้า</label>\r\n                                             <input type=\"text\" id=\"input_name\" class=\"form-control\"\r\n                                                  v-model.trim=\"customer.customerName\" required />\r\n                                        </div>\r\n                                        <div class=\"mb-2\">\r\n                                             <label>ที่อยู่ลูกค้า</label>\r\n                                             <input type=\"text\" class=\"form-control\"\r\n                                                  v-model.trim=\"customer.customerAddr\" />\r\n                                        </div>\r\n                                        <div class=\"mb-2\">\r\n                                             <label>จังหวัด</label>\r\n                                             <select class=\"form-select\" id=\"findSelect\" v-model=\"customer.provinceId\">\r\n                                                  <option v-for=\"province in province_id\" :key=\"province.PROVINCE_ID\"\r\n                                                       :value=\"province.PROVINCE_ID\">\r\n                                                       {{ province.PROVINCE_NAME }}\r\n                                                  </option>\r\n                                             </select>\r\n                                        </div>\r\n                                        <div class=\"mb-2\">\r\n                                             <label>รหัสไปรษณีย์</label>\r\n                                             <input type=\"text\" class=\"form-control\" v-model=\"customer.postCode\" />\r\n                                        </div>\r\n                                        <div class=\"mb-2\">\r\n                                             <label>เบอร์โทรศัพท์</label>\r\n                                             <input type=\"text\" class=\"form-control\" v-model=\"customer.customerTel\" />\r\n                                        </div>\r\n\r\n                                   </div>\r\n                                   <div class=\"col-md-6\">\r\n                                        <div class=\"mb-2\">\r\n                                             <label>ชื่อผู้ติดต่อ</label>\r\n                                             <input type=\"text\" class=\"form-control\" v-model=\"customer.contactName\" />\r\n                                        </div>\r\n\r\n                                        <label>เบอร์โทรผู้ติดต่อ / ตำแหน่งงานผู้ติดต่อ</label>\r\n                                        <div class=\"input-group mb-2\">\r\n                                             <input type=\"text\" class=\"form-control\" v-model=\"customer.contactTel\" />\r\n                                             <span class=\"input-group-text\"></span>\r\n                                             <input type=\"text\" class=\"form-control\" v-model=\"customer.contactPosition\" />\r\n                                        </div>\r\n                                        <div class=\"mb-2\">\r\n                                             <label>ประเภทการชำระเงิน</label>\r\n                                             <select class=\"form-select\" @change=\"setCreditday\"\r\n                                                  v-model=\"customer.payType\">\r\n                                                  <option value=\"1\">เงินสด</option>\r\n                                                  <option value=\"2\">เครดิต</option>\r\n                                             </select>\r\n                                        </div>\r\n                                        <!-- ตรวจสอบสิทธิ์ในการเครดิต -->\r\n                                        <div class=\"row border-0\" v-if=\"customer.payType == 2\">\r\n                                             <div class=\"col\">\r\n                                                  <label>เครดิต (วัน)</label>\r\n                                                  <div class=\"input-group\">\r\n                                                       <input type=\"number\" class=\"form-control\"\r\n                                                            v-model=\"customer.creditDay\" style=\"width: auto;\" />\r\n                                                       <!-- <span class=\"input-group-text\" style=\"width:100%;\">วัน</span> -->\r\n                                                  </div>\r\n                                             </div>\r\n                                             <div class=\"col\">\r\n                                                  <label>วงเงิน (บาท)</label>\r\n                                                  <div class=\"input-group\">\r\n                                                       <input type=\"number\" class=\"form-control\"\r\n                                                            v-model=\"customer.creditLimit\" style=\"width:auto;\" />\r\n                                                       <!-- <span class=\"input-group-text\" style=\"width:100%;\">บาท</span> -->\r\n                                                  </div>\r\n                                             </div>\r\n                                        </div>\r\n                                        <!-- สิ้นสุดตรวจสอบสิทธิ์ในการเครดิต -->\r\n                                        <div class=\"mb-2 mt-2\">\r\n                                             <label>ประเภทราคา</label>\r\n                                             <select class=\"form-select\" v-model=\"customer.priceType\">\r\n                                                  <option value=\"1\">เงินสด</option>\r\n                                                  <option value=\"2\">เงินสด+จัดส่ง</option>\r\n                                                  <option value=\"3\">เครดิต</option>\r\n                                                  <option value=\"4\">ราคาพิเศษ</option>\r\n                                             </select>\r\n                                        </div>\r\n                                        <div class=\"mb-2\">\r\n                                             <label>บันทึกเพิ่มเติม</label>\r\n                                             <textarea class=\"form-control\" v-model=\"customer.remark\"\r\n                                                  style=\"height: 80px\"></textarea>\r\n                                        </div>\r\n                                   </div>\r\n                              </div>\r\n                         </div>\r\n                    </div>\r\n                    <div class=\"card-footer\">\r\n                         <!-- ปุ่มบันทึก -->\r\n                         <div style=\"text-align:center;\">\r\n                              <button class=\"btn btn-primary btn-lg\" v-if=\"this.cust_id == ''\"\r\n                                   @click.prevent=\"saveNewCustomer()\" style=\"text-align:center;color:white\">\r\n                                   <font-awesome-icon icon=\"fa-solid fa-circle-check\" style=\"color:white\" />\r\n                                   &nbsp;บันทึกข้อมูล\r\n                              </button>\r\n                              <button class=\"btn btn-primary btn-lg\" v-else\r\n                                   @click.prevent=\"chkCustomerID(customer.customerId)\"\r\n                                   style=\"text-align:center;color:white\" disabled>\r\n                                   <font-awesome-icon icon=\"fa-solid fa-circle-check\" style=\"color:white\" />\r\n                                   &nbsp;บันทึกข้อมูล\r\n                              </button>\r\n                         </div>\r\n                    </div>\r\n               </form>\r\n               <!-- {{ customer }} -->\r\n          </div>\r\n     </div>\r\n     <!-- {{ customer }} -->\r\n</template>\r\n<script>\r\nimport $ from \"jquery\"\r\nimport axios from \"@/axios\";\r\n//import $ from \"jquery\";\r\n// const axios = require(\"@/axios\");\r\n\r\nexport default {\r\n     data() {\r\n          return {\r\n               cust_id: \"\",\r\n               province_id: [],\r\n               customer: {\r\n                    customerId: \"\",\r\n                    customerName: \"\",\r\n                    customerAddr: \"\",\r\n                    provinceId: \"\",\r\n                    postCode: \"\",\r\n                    customerTel: \"\",\r\n                    contactName: \"\",\r\n                    contactTel: \"\",\r\n                    contactPosition: \"\",\r\n                    payType: \"1\",\r\n                    creditDay: \"0\",\r\n                    creditLimit: \"0\",\r\n                    priceType: \"1\",\r\n                    remark: \"\",\r\n                    customerDel: \"1\"\r\n               },\r\n          };\r\n     },\r\n     mounted() {\r\n          this.getProvince();\r\n          this.onSelect2_1();\r\n     },\r\n     methods: {\r\n          onSelect2_1() {\r\n               $(document).ready(() => {\r\n                    let rec = this.customer;\r\n                    $('#findSelect').select2({\r\n                         theme: \"bootstrap-5\",\r\n                         closeOnSelect: true,\r\n                         width: '100%',\r\n                         dropdownParent: $(\"#findSelect\").parent(),\r\n                         placeholder: \"--- เลือกจังหวัด ---\",\r\n                         // tags: true,\r\n                    });\r\n                    $('#findSelect').on('select2:select', function (e) {\r\n                         let data = e.params.data;\r\n                         // $('#findSize1').val(data.id)\r\n                         rec.provinceId = data.id;\r\n                    })\r\n               });\r\n          },\r\n          async saveNewCustomer() {\r\n               if (confirm(\"ยืนยันการบันทึกข้อมูล ?\") == true) {\r\n                    await axios.post(`customer/new`, this.customer).then(() => {\r\n                         this.customer = {\r\n                              customerId: \"\",\r\n                              customerName: \"\",\r\n                              customerAddr: \"\",\r\n                              provinceId: \"\",\r\n                              postCode: \"\",\r\n                              customerTel: \"\",\r\n                              contactName: \"\",\r\n                              contactTel: \"\",\r\n                              contactPosition: \"\",\r\n                              payType: \"\",\r\n                              creditDay: \"\",\r\n                              creditLimit: \"\",\r\n                              priceType: \"\",\r\n                              remark: \"\",\r\n                              customerDel: \"\"\r\n                         }\r\n                         console.log('Process success!');\r\n                    })\r\n                         .catch(error => {\r\n                              console.log(error)\r\n                         })\r\n                    //await this.$router.push(\"/\");\r\n                    //await this.$router.go();\r\n                    await this.$router.push(\"/showcustomer\");\r\n               }\r\n          },\r\n          getProvince() {\r\n               axios.get(`province/read`).then((response) => {\r\n                    this.province_id = response.data;\r\n               });\r\n          },\r\n          chkCustomerID(val) {\r\n               //this.customer.customerId = this.customer.customerId.toLocaleUpperCase();\r\n               axios.get(`customer/search/${val}`).then((response) => {\r\n                    this.cust_id = response.data;\r\n               });\r\n          },\r\n          setCreditday() {\r\n               if (this.customer.payType == 1) {\r\n                    this.customer.creditDay = 0;\r\n                    this.customer.creditLimit = 0;\r\n                    this.customer.priceType = 1;\r\n               } else {\r\n                    this.customer.creditDay = 30;\r\n                    this.customer.creditLimit = 0;\r\n                    this.customer.priceType = 3;\r\n               }\r\n          },\r\n     },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}