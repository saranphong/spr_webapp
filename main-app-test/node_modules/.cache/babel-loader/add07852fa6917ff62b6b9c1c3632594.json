{"ast":null,"code":"import $ from \"jquery\";\nimport axios from \"@/axios\";\nimport { ref } from \"vue\";\nimport func from \"../func.js\";\nexport default {\n  setup() {\n    const date = ref(new Date());\n\n    const format = date => {\n      const d = date.getDate();\n      const m = date.getMonth() + 1;\n      const y = date.getFullYear();\n      return `${d}/${m}/${y}`;\n    };\n\n    return {\n      date,\n      format\n    };\n  },\n\n  components: {},\n\n  data() {\n    return {\n      func: func,\n      page: \"1\",\n      cust_name: \"\",\n      cust_addr: \"\",\n      cust_tel: \"\",\n      check_bill_header: [],\n      customer_data: [],\n      rubber_size: [],\n      rubber_brand: [],\n      product_cost: [],\n      import_header: {\n        import_id: \"\",\n        import_book_id: \"\",\n        import_book_no: \"\",\n        import_user: \"\",\n        cust_auto_id: \"\",\n        import_type_id: \"\",\n        import_date: \"\",\n        import_status: \"\"\n      },\n      import_detail_list: [],\n      import_detail: {\n        import_id: \"\",\n        rub_brand_id: \"\",\n        manufac_id: \"\",\n        fixcost_auto_id: \"\",\n        import_detail_status: \"\"\n      }\n    };\n  },\n\n  mounted() {\n    let import_book_id = sessionStorage.getItem(\"import_book_id\");\n    let import_book_no = sessionStorage.getItem(\"import_book_no\"); // alert(import_book_id+\" \"+import_book_no);\n\n    if (import_book_id != null && import_book_no != null) {\n      this.chkImportHeader(import_book_id, import_book_no);\n    } else {\n      let import_id = sessionStorage.getItem(\"import_id\");\n      this.import_detail.import_id = import_id;\n      this.chkImportHeaderById(import_id);\n      this.getImportDetail(import_id);\n    }\n  },\n\n  beforeUnmount() {\n    sessionStorage.removeItem(\"import_book_id\");\n    sessionStorage.removeItem(\"import_book_no\");\n    sessionStorage.removeItem(\"import_id\");\n  },\n\n  methods: {\n    showDatePicker() {\n      let data = this.import_header;\n      $(document).ready(() => {\n        $('#datepicker').datepicker({\n          format: \"dd/mm/yyyy\",\n          autoclose: true,\n          toggleActive: true\n        });\n        $('#datepicker').change(() => {\n          data.import_date = $('#datepicker').val();\n        });\n      });\n    },\n\n    convertDateToMySql(isdate) {\n      const convertdate = isdate.split(\"/\");\n      let dateToMySql = convertdate[2] + \"-\" + convertdate[1] + \"-\" + convertdate[0];\n      return dateToMySql;\n    },\n\n    onSelect_Brand() {\n      $(document).ready(() => {\n        let rec = this.import_detail;\n        $('#findBrand').select2({\n          theme: \"bootstrap-5\",\n          closeOnSelect: true,\n          width: '100%',\n          dropdownParent: $(\"#findBrand\").parent(),\n          placeholder: \"--- กรุณาเลือกยี่ห้อยาง ---\"\n        });\n        $('#findBrand').on('select2:select', e => {\n          let data = e.params.data;\n          rec.rub_brand_id = data.id;\n        });\n      });\n    },\n\n    clearSelect2() {\n      $(document).ready(() => {\n        $('#findBrand').val(\"\");\n      });\n    },\n\n    getUseData() {\n      // this.getRubberSize();\n      this.getRubberBrand();\n      this.onSelect_Brand();\n    },\n\n    async chkImportHeader(val1, val2) {\n      await axios.get(`billimport/search/${val1}/${val2}`).then(response => {\n        // this.check_bill_header = response.data;\n        this.import_header.import_id = response.data[0].import_id;\n        this.import_header.import_book_id = response.data[0].import_book_id;\n        this.import_header.import_book_no = response.data[0].import_book_no;\n        this.import_header.import_user = response.data[0].import_user;\n        this.import_header.cust_auto_id = response.data[0].cust_auto_id;\n        this.import_header.import_type_id = response.data[0].import_type_id;\n        this.import_header.import_date = response.data[0].new_import_date;\n        this.import_header.import_status = response.data[0].import_status;\n        this.cust_name = response.data[0].customerName;\n        this.cust_addr = response.data[0].customerAddr;\n        this.cust_tel = response.data[0].customerTel;\n        this.import_detail.import_id = response.data[0].import_id;\n        this.getImportDetail(this.import_header.import_id);\n      });\n    },\n\n    async chkImportHeaderById(val) {\n      await axios.get(`billimport/searchid/${val}`).then(response => {\n        // this.check_bill_header = response.data;\n        this.import_header.import_id = response.data[0].import_id;\n        this.import_header.import_book_id = response.data[0].import_book_id;\n        this.import_header.import_book_no = response.data[0].import_book_no;\n        this.import_header.import_user = response.data[0].import_user;\n        this.import_header.cust_auto_id = response.data[0].cust_auto_id;\n        this.import_header.import_type_id = response.data[0].import_type_id;\n        this.import_header.import_date = response.data[0].new_import_date;\n        this.import_header.import_status = response.data[0].import_status;\n        this.cust_name = response.data[0].customerName;\n        this.cust_addr = response.data[0].customerAddr;\n        this.cust_tel = response.data[0].customerTel;\n      });\n    },\n\n    newImportDetail() {\n      // Load ตารางราคา\n      this.getProductCost();\n\n      if (this.import_header.import_book_id == null || this.import_header.import_book_no == null || this.import_header.import_date == null) {\n        alert('ข้อมูลหลักไม่ครบถ้วน.,กรุณาตรวจสอบ !!!'); // document.getElementById(\"book_id\").value = 'xxx';\n\n        document.getElementById(\"book_id\").focus();\n        document.getElementById(\"book_id\").select(); //document.getElementById(\"book_no\").disabled = true;             \n      } else {\n        this.onSelect_Brand();\n        this.getUseData(); // this.showModal('newImportDetail');\n\n        func.showModal('newImportDetail2');\n      }\n    },\n\n    async saveImportDetail() {\n      if (this.import_detail.manufac_id == \"\" || this.import_detail.rub_brand_id == \"\") {\n        alert(\"กรุณากรอกข้อมูล หมายเลขยาง/ยี่ห้อยาง ให้ครบถ้วน!!!\");\n        func.setFocus(\"manufac_id\");\n      } else {\n        if ((await confirm(\"ยืนยันการบันทึกรายการ\")) == true) {\n          await axios.post(`billimport/detail/new`, this.import_detail).then(() => {\n            this.import_detail = {\n              import_id: this.import_header.import_id,\n              rub_brand_id: \"\",\n              manufac_id: \"\",\n              fixcost_auto_id: \"\",\n              import_detail_status: \"\"\n            };\n          }).catch(error => {\n            console.log(error);\n          }); // await func.hideModal(\"newImportDetail\");\n          // alert(this.import_header.import_id);\n          // await $(\"#showimportdetail\").DataTable().destroy();\n\n          this.page = 1;\n          await this.getImportDetail(this.import_header.import_id);\n        }\n      }\n    },\n\n    async getImportDetail(val) {\n      await axios.get(`billimport/detail/read/${val}`).then(response => {\n        this.import_detail_list = response.data;\n        $(document).ready(() => {\n          $(\"#showimportdetail\").DataTable({\n            \"order\": [[1, 'asc']],\n            \"scrollY\": '350px',\n            \"scorllX\": false,\n            \"bJQueryUI\": true,\n            \"sPaginationType\": \"full_numbers\",\n            \"bFilter\": false,\n            \"paging\": false,\n            \"scrollCollapse\": true,\n            \"rowReorder\": true,\n            destroy: true,\n            language: {\n              decimal: \"\",\n              emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n              info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n              // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n              infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\n              infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n              infoPostFix: \"\",\n              thousands: \",\",\n              lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n              loadingRecords: \"Loading...\",\n              processing: \"\",\n              search: \"ค้นหาข้อมูล:\",\n              zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\n              paginate: {\n                first: \"หน้าแรก\",\n                last: \"หน้าสุดท้าย\",\n                next: \"ต่อไป\",\n                previous: \"ย้อนกลับ\"\n              },\n              aria: {\n                sortAscending: \": activate to sort column ascending\",\n                sortDescending: \": activate to sort column descending\"\n              }\n            }\n          });\n        });\n      });\n    },\n\n    getCustomer(val) {\n      axios.get(`customer/findbyautoid/${val}`).then(response => {\n        // this.customer_data = response.data;\n        // console.log(response.data[0].cust_auto_id);\n        this.import_header = {\n          cust_auto_id: response.data[0].cust_auto_id\n        };\n\n        if (response.data[0].cust_auto_id == 1) {\n          this.import_header.import_type_id = 2;\n        } else this.import_header.import_type_id = 1;\n\n        this.cust_name = response.data[0].customerName;\n        this.cust_addr = response.data[0].customerAddr;\n        this.cust_tel = response.data[0].customerTel;\n      });\n    },\n\n    getRubberSize() {\n      axios.get(`rubbersize/read`).then(response => {\n        this.rubber_size = response.data;\n      });\n    },\n\n    getRubberBrand() {\n      axios.get(`rubberbrand/read`).then(response => {\n        this.rubber_brand = response.data;\n      });\n    },\n\n    getProductCost(val) {\n      axios.get(`productcost/readprotype/${val}`).then(response => {\n        this.product_cost = response.data;\n        $(document).ready(() => {\n          $(\"#showproductcost\").DataTable({\n            select: {\n              // style: 'single'\n              style: 'single',\n              className: 'focusedRow',\n              selector: 'td:last-child a'\n            },\n            \"order\": [[0, 'asc']],\n            scrollY: \"200px\",\n            bJQueryUI: true,\n            paging: false,\n            retrieve: true,\n            destroy: true,\n            \"sPaginationType\": \"full_numbers\",\n            \"scrollCollapse\": true,\n            \"rowReorder\": true,\n            language: {\n              decimal: \"\",\n              emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n              info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n              // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n              infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\n              infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n              infoPostFix: \"\",\n              thousands: \",\",\n              lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n              loadingRecords: \"Loading...\",\n              processing: \"\",\n              search: \"ค้นหาข้อมูล:\",\n              zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\n              paginate: {\n                first: \"หน้าแรก\",\n                last: \"หน้าสุดท้าย\",\n                next: \"ต่อไป\",\n                previous: \"ย้อนกลับ\"\n              },\n              aria: {\n                sortAscending: \": activate to sort column ascending\",\n                sortDescending: \": activate to sort column descending\"\n              }\n            }\n          });\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["$","axios","ref","func","setup","date","Date","format","d","getDate","m","getMonth","y","getFullYear","components","data","page","cust_name","cust_addr","cust_tel","check_bill_header","customer_data","rubber_size","rubber_brand","product_cost","import_header","import_id","import_book_id","import_book_no","import_user","cust_auto_id","import_type_id","import_date","import_status","import_detail_list","import_detail","rub_brand_id","manufac_id","fixcost_auto_id","import_detail_status","mounted","sessionStorage","getItem","chkImportHeader","chkImportHeaderById","getImportDetail","beforeUnmount","removeItem","methods","showDatePicker","document","ready","datepicker","autoclose","toggleActive","change","val","convertDateToMySql","isdate","convertdate","split","dateToMySql","onSelect_Brand","rec","select2","theme","closeOnSelect","width","dropdownParent","parent","placeholder","on","e","params","id","clearSelect2","getUseData","getRubberBrand","val1","val2","get","then","response","new_import_date","customerName","customerAddr","customerTel","newImportDetail","getProductCost","alert","getElementById","focus","select","showModal","saveImportDetail","setFocus","confirm","post","catch","error","console","log","DataTable","destroy","language","decimal","emptyTable","info","infoEmpty","infoFiltered","infoPostFix","thousands","lengthMenu","loadingRecords","processing","search","zeroRecords","paginate","first","last","next","previous","aria","sortAscending","sortDescending","getCustomer","getRubberSize","style","className","selector","scrollY","bJQueryUI","paging","retrieve"],"sourceRoot":"","sources":["D:\\Project-vue\\SPR-PROJECT\\main-app-test\\src\\components\\importWork.vue"],"sourcesContent":["// ทำใบรับยางสำหรับการจ้างอัด\r\n<template>\r\n    <!-- เพิ่มรายละเอียดใบรับจากตารางราคา -->\r\n    <div class=\"card border-dark shadow-lg mt-2 ms-2\" style=\"width: auto\" v-if=\"this.page == 2\">\r\n        <div class=\"row mt-1\">\r\n            <div class=\"col-2 ms-2\">\r\n                <div style=\"text-align:left;\">\r\n                    <label>หมายเลขยาง(จากโครง)</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"manufac_id\" v-model.trim=\"this.import_detail.manufac_id\"\r\n                        placeholder=\"กรุณาใส่หมายเลขยาง\"\r\n                        @input=\"(this.import_detail.manufac_id = this.import_detail.manufac_id.toUpperCase())\" />\r\n                </div>\r\n            </div>\r\n            <div class=\"col-3\" style=\"text-align:left;\">\r\n                <label>ยี่ห้อยาง</label>\r\n                <select class=\"form-select\" id=\"findBrand\" v-model=\"this.import_detail.rub_brand_id\">\r\n                    <option v-for=\"rubberBrand in rubber_brand\" :key=\"rubberBrand.rub_brand_id\"\r\n                        :value=\"rubberBrand.rub_brand_id\">\r\n                        {{ rubberBrand.rub_brand_shotname }} > {{ rubberBrand.rub_brand_name }}\r\n                    </option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        {{ this.import_detail }}\r\n        <div class=\"card-header bg-success opacity-75 mt-2\" style=\"color: white\">\r\n            ::: เลือกรายการใบรับจากตารางราคา :::\r\n        </div>\r\n        <div class=\"card-body mt-2\">\r\n            <table id=\"showproductcost\" class=\"table table-striped table-hover table-sm\" style=\"width: 100%;\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>ลำดับ</th>\r\n                        <th>ประเภทการผลิต</th>\r\n                        <th>รูปแบบการผลิต</th>\r\n                        <th>ขนาด</th>\r\n                        <th>ลายดอก</th>\r\n                        <th>เกรดยาง</th>\r\n                        <th>เงินสด</th>\r\n                        <th>เงินสด+ส่ง</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody class=\"table-group-divider\">\r\n                    <tr v-for=\"rec in product_cost\" :key=\"rec.fixcost_auto_id\">\r\n                        <td>{{ product_cost.indexOf(rec) + 1 }}</td>\r\n                        <td>{{ rec.pro_type_name }}</td>\r\n                        <td>{{ rec.pro_detail }}</td>\r\n                        <td>{{ rec.rub_size_id }}</td>\r\n                        <td>{{ rec.rub_style_detail }}</td>\r\n                        <td>{{ rec.rub_grade_name }}</td>\r\n                        <td>{{ this.func.numFormat(rec.price1) }}</td>\r\n                        <td>{{ this.func.numFormat(rec.price2) }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class=\"card-footer\" style=\"text-align:right\">\r\n            <!-- ปุ่มปิด -->\r\n            <button type=\"button\" class=\"btn btn-secondary ms-2 me-1\"\r\n                @click.prevent=\"clearSelect2();\r\n                this.import_detail.rub_brand_id = ''; this.import_detail.manufac_id = ''; this.getImportDetail(this.import_header.import_id); this.page = 1\">\r\n                <font-awesome-icon icon=\"fa-solid fa-ban\" />&nbsp;ปิดหน้าต่าง\r\n            </button>\r\n            <!-- ปุ่มบันทึก -->\r\n            <button id=\"btn\" class=\"btn btn-primary ms-1\" @click.prevent=\"saveImportDetail();\">\r\n                <font-awesome-icon icon=\"fa-solid fa-circle-check\" />&nbsp;บันทึก\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <!-- end เพิ่มรายละเอียดใบรับจากตารางราคา -->\r\n    <!-- แสดง Header + รายละเอียดใบรับ -->\r\n    <div class=\"container\" style=\"text-align:center;\" v-if=\"this.page == 1\">\r\n        <div class=\"card align-content-center rounded-3 shadow\" style=\"max-width:auto;\">\r\n            <div class=\"card-header bg-primary\" style=\"color:white; text-align:center; font-size: 20px;\">\r\n                ใบรับ (\r\n                <select class=\"rounded-2 bg-primary border-0\" style=\"color:yellow ;\"\r\n                    v-model=\"this.import_header.import_type_id\" disabled>\r\n                    <option value=\"1\">ค่าจ้าง</option>\r\n                    <option value=\"2\">ยางพร้อมโครง</option>\r\n                </select> )\r\n                <button class=\"btn btn-success rounded-2 me-2\">\r\n                    <font-awesome-icon icon=\"fa-solid fa-check-to-slot\" />&nbsp;ยืนยันใบรับ\r\n                </button>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <div class=\"row\">\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>เล่มที่</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"book_id\"\r\n                            v-model.trim=\"this.import_header.import_book_id\" readonly />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>เลขที่</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"book_no\"\r\n                            v-model.trim=\"this.import_header.import_book_no\" readonly />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>วันที่เปิดใบรับ(DD/MM/YYYY)</label>\r\n                        <input type=\"text\" class=\"date form-control\" id=\"datepicker\"\r\n                            v-model=\"this.import_header.import_date\" @click.prevent=\"showDatePicker();\" readonly />\r\n                    </div>\r\n                </div>\r\n                <div class=\"row mt-1\">\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>ชื่อลูกค้า</label>\r\n                        <input type=\"text\" class=\"form-control\" v-model=\"this.cust_name\" readonly />\r\n                    </div>\r\n                </div>\r\n                <div class=\"row mt-1\">\r\n                    <div class=\"col-8\" style=\"text-align:left;\">\r\n                        <label>ที่อยู่ลูกค้า</label>\r\n                        <input type=\"text\" class=\"form-control\" v-model=\"this.cust_addr\" readonly />\r\n                    </div>\r\n                    <div class=\"col-4\" style=\"text-align:left;\">\r\n                        <label>เบอร์โทร</label>\r\n                        <input type=\"text\" class=\"form-control\" v-model=\"this.cust_tel\" readonly />\r\n                    </div>\r\n                </div>\r\n                <div class=\"row-12 mt-2 align-content-center\">\r\n                    <button class=\"btn btn-warning rounded-2 me-2\">\r\n                        <font-awesome-icon icon=\"fa-solid fa-pen\" />&nbsp;แก้ไขใบรับ\r\n                    </button>\r\n                    <button class=\"btn btn-danger rounded-2 me-2\">\r\n                        <font-awesome-icon icon=\"fa-solid fa-file-circle-xmark\" />&nbsp;ยกเลิกใบรับ\r\n                    </button>\r\n                    <button class=\"btn btn-primary rounded-2 me-2\"\r\n                        @click.prevent=\"this.getProductCost(this.import_header.import_type_id); getUseData(); this.page = 2\">\r\n                        <!-- newImportDetail() ตอนนี้ไม่ได้ใช้ -->\r\n                        <font-awesome-icon icon=\"fa-solid fa-cart-plus\" />&nbsp;เพิ่มรายการรับ\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div class=\"card-footer align-content-center\" id=\"control-detail\">\r\n                <div class=\"card border-dark shadow-lg mt-2\" style=\"width: 100%\">\r\n                    <div class=\"card-header bg-opacity-50 bg-info\" style=\"color:darkblue;text-align:center\">\r\n                        ::: รายการใบรับยาง :::\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <table id=\"showimportdetail\" class=\"ms-2 table table-striped table-hover table-sm nowrap\"\r\n                            style=\"width: 100%; align-items: center\">\r\n                            <thead>\r\n                                <tr style=\"text-align:left\">\r\n                                    <th></th>\r\n                                    <th>ลำดับ</th>\r\n                                    <th>รหัสยาง</th>\r\n                                    <th>ประเภท/รูปแบบการผลิต</th>\r\n                                    <th>ขนาดยาง</th>\r\n                                    <th>ลายดอก</th>\r\n                                    <th>เกรดยาง</th>\r\n                                    <th>ยี่ห้อยาง</th>\r\n                                    <th>ราคาเงินสด/สด+ส่ง</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody class=\"table-group-divider\">\r\n                                <tr v-for=\"rec in import_detail_list\" :key=\"rec.import_detail_id\"\r\n                                    style=\"text-align:left\">\r\n                                    <td>\r\n                                        <button id=\"edit\" class=\"btn btn-primary btn-sm\" title=\"แก้ไขข้อมูล\"\r\n                                            @click.prevent=\"\">\r\n                                            <font-awesome-icon icon=\"fa-solid fa-pen\" />\r\n                                        </button>\r\n                                    </td>\r\n                                    <td>{{ import_detail_list.indexOf(rec) + 1 }}</td>\r\n                                    <td>{{ rec.manufac_id }}</td>\r\n                                    <td>{{ rec.pro_type_name }}/{{ rec.pro_detail }}</td>\r\n                                    <td>{{ rec.rub_size_id }}</td>\r\n                                    <td>{{ rec.rub_style_detail }}</td>\r\n                                    <td>{{ rec.rub_grade_name }}</td>\r\n                                    <td>{{ rec.rub_brand_shotname }}</td>\r\n                                    <td>{{ func.numFormat(rec.price1) }}/{{ func.numFormat(rec.price2) }}</td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- {{ this.import_header }} -->\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\"\r\nimport axios from \"@/axios\"\r\nimport { ref } from \"vue\"\r\nimport func from \"../func.js\"\r\n\r\nexport default {\r\n    setup() {\r\n        const date = ref(new Date());\r\n        const format = (date) => {\r\n            const d = date.getDate();\r\n            const m = date.getMonth() + 1;\r\n            const y = date.getFullYear();\r\n            return `${d}/${m}/${y}`;\r\n        }\r\n        return {\r\n            date, format\r\n        }\r\n    },\r\n    components: {\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            func: func,\r\n            page: \"1\",\r\n            cust_name: \"\",\r\n            cust_addr: \"\",\r\n            cust_tel: \"\",\r\n            check_bill_header: [],\r\n            customer_data: [],\r\n            rubber_size: [],\r\n            rubber_brand: [],\r\n            product_cost: [],\r\n            import_header: {\r\n                import_id: \"\",\r\n                import_book_id: \"\",\r\n                import_book_no: \"\",\r\n                import_user: \"\",\r\n                cust_auto_id: \"\",\r\n                import_type_id: \"\",\r\n                import_date: \"\",\r\n                import_status: \"\",\r\n            },\r\n            import_detail_list: [],\r\n            import_detail: {\r\n                import_id: \"\",\r\n                rub_brand_id: \"\",\r\n                manufac_id: \"\",\r\n                fixcost_auto_id: \"\",\r\n                import_detail_status: \"\",\r\n            },\r\n        }\r\n    },\r\n    mounted() {\r\n        let import_book_id = sessionStorage.getItem(\"import_book_id\");\r\n        let import_book_no = sessionStorage.getItem(\"import_book_no\");\r\n        // alert(import_book_id+\" \"+import_book_no);\r\n        if (import_book_id != null && import_book_no != null) {\r\n            this.chkImportHeader(import_book_id, import_book_no);\r\n        } else {\r\n            let import_id = sessionStorage.getItem(\"import_id\");\r\n            this.import_detail.import_id = import_id;\r\n            this.chkImportHeaderById(import_id);\r\n            this.getImportDetail(import_id);\r\n        }\r\n    },\r\n    beforeUnmount() {\r\n        sessionStorage.removeItem(\"import_book_id\");\r\n        sessionStorage.removeItem(\"import_book_no\");\r\n        sessionStorage.removeItem(\"import_id\");\r\n    },\r\n    methods: {\r\n        showDatePicker() {\r\n            let data = this.import_header;\r\n            $(document).ready(() => {\r\n                $('#datepicker').datepicker({\r\n                    format: \"dd/mm/yyyy\",\r\n                    autoclose: true,\r\n                    toggleActive: true,\r\n                });\r\n                $('#datepicker').change(() => {\r\n                    data.import_date = $('#datepicker').val();\r\n                })\r\n            });\r\n        },\r\n        convertDateToMySql(isdate) {\r\n            const convertdate = isdate.split(\"/\");\r\n            let dateToMySql = convertdate[2] + \"-\" + convertdate[1] + \"-\" + convertdate[0];\r\n            return dateToMySql;\r\n        },\r\n        onSelect_Brand() {\r\n            $(document).ready(() => {\r\n                let rec = this.import_detail;\r\n                $('#findBrand').select2({\r\n                    theme: \"bootstrap-5\",\r\n                    closeOnSelect: true,\r\n                    width: '100%',\r\n                    dropdownParent: $(\"#findBrand\").parent(),\r\n                    placeholder: \"--- กรุณาเลือกยี่ห้อยาง ---\",\r\n                });\r\n                $('#findBrand').on('select2:select', (e) => {\r\n                    let data = e.params.data;\r\n                    rec.rub_brand_id = data.id;\r\n                })\r\n            });\r\n        },\r\n        clearSelect2() {\r\n            $(document).ready(() => {\r\n                $('#findBrand').val(\"\");\r\n            })\r\n        },\r\n        getUseData() {\r\n            // this.getRubberSize();\r\n            this.getRubberBrand();\r\n            this.onSelect_Brand();\r\n        },\r\n        async chkImportHeader(val1, val2) {\r\n            await axios.get(`billimport/search/${val1}/${val2}`).then((response) => {\r\n                // this.check_bill_header = response.data;\r\n                this.import_header.import_id = response.data[0].import_id;\r\n                this.import_header.import_book_id = response.data[0].import_book_id;\r\n                this.import_header.import_book_no = response.data[0].import_book_no;\r\n                this.import_header.import_user = response.data[0].import_user;\r\n                this.import_header.cust_auto_id = response.data[0].cust_auto_id;\r\n                this.import_header.import_type_id = response.data[0].import_type_id;\r\n                this.import_header.import_date = response.data[0].new_import_date;\r\n                this.import_header.import_status = response.data[0].import_status;\r\n                this.cust_name = response.data[0].customerName;\r\n                this.cust_addr = response.data[0].customerAddr;\r\n                this.cust_tel = response.data[0].customerTel;\r\n                this.import_detail.import_id = response.data[0].import_id;\r\n                this.getImportDetail(this.import_header.import_id);\r\n            });\r\n        },\r\n        async chkImportHeaderById(val) {\r\n            await axios.get(`billimport/searchid/${val}`).then((response) => {\r\n                // this.check_bill_header = response.data;\r\n                this.import_header.import_id = response.data[0].import_id;\r\n                this.import_header.import_book_id = response.data[0].import_book_id;\r\n                this.import_header.import_book_no = response.data[0].import_book_no;\r\n                this.import_header.import_user = response.data[0].import_user;\r\n                this.import_header.cust_auto_id = response.data[0].cust_auto_id;\r\n                this.import_header.import_type_id = response.data[0].import_type_id;\r\n                this.import_header.import_date = response.data[0].new_import_date;\r\n                this.import_header.import_status = response.data[0].import_status;\r\n                this.cust_name = response.data[0].customerName;\r\n                this.cust_addr = response.data[0].customerAddr;\r\n                this.cust_tel = response.data[0].customerTel;\r\n            });\r\n        },\r\n        newImportDetail() {\r\n            // Load ตารางราคา\r\n            this.getProductCost();\r\n            if ((this.import_header.import_book_id == null) ||\r\n                (this.import_header.import_book_no == null) ||\r\n                (this.import_header.import_date == null)) {\r\n                alert('ข้อมูลหลักไม่ครบถ้วน.,กรุณาตรวจสอบ !!!')\r\n                // document.getElementById(\"book_id\").value = 'xxx';\r\n                document.getElementById(\"book_id\").focus();\r\n                document.getElementById(\"book_id\").select();\r\n                //document.getElementById(\"book_no\").disabled = true;             \r\n            } else {\r\n                this.onSelect_Brand();\r\n                this.getUseData();\r\n                // this.showModal('newImportDetail');\r\n                func.showModal('newImportDetail2');\r\n            }\r\n        },\r\n        async saveImportDetail() {\r\n            if (this.import_detail.manufac_id == \"\" || this.import_detail.rub_brand_id == \"\") {\r\n                alert(\"กรุณากรอกข้อมูล หมายเลขยาง/ยี่ห้อยาง ให้ครบถ้วน!!!\")\r\n                func.setFocus(\"manufac_id\");\r\n            }\r\n            else {\r\n                if (await confirm(\"ยืนยันการบันทึกรายการ\") == true) {\r\n                    await axios.post(`billimport/detail/new`, this.import_detail).then(() => {\r\n                        this.import_detail = {\r\n                            import_id: this.import_header.import_id,\r\n                            rub_brand_id: \"\",\r\n                            manufac_id: \"\",\r\n                            fixcost_auto_id: \"\",\r\n                            import_detail_status: \"\"\r\n                        };\r\n                    }).catch((error) => {\r\n                        console.log(error);\r\n                    });\r\n                    // await func.hideModal(\"newImportDetail\");\r\n                    // alert(this.import_header.import_id);\r\n                    // await $(\"#showimportdetail\").DataTable().destroy();\r\n                    this.page = 1;\r\n                    await this.getImportDetail(this.import_header.import_id);\r\n                }\r\n            }\r\n        },\r\n        async getImportDetail(val) {\r\n            await axios.get(`billimport/detail/read/${val}`).then((response) => {\r\n                this.import_detail_list = response.data;\r\n                $(document).ready(() => {\r\n                    $(\"#showimportdetail\").DataTable({\r\n                        \"order\": [[1, 'asc']],\r\n                        \"scrollY\": '350px',\r\n                        \"scorllX\": false,\r\n                        \"bJQueryUI\": true,\r\n                        \"sPaginationType\": \"full_numbers\",\r\n                        \"bFilter\": false,\r\n                        \"paging\": false,\r\n                        \"scrollCollapse\": true,\r\n                        \"rowReorder\": true,\r\n                        destroy: true,\r\n                        language: {\r\n                            decimal: \"\",\r\n                            emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                            info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                            // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                            infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                            infoPostFix: \"\",\r\n                            thousands: \",\",\r\n                            lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                            loadingRecords: \"Loading...\",\r\n                            processing: \"\",\r\n                            search: \"ค้นหาข้อมูล:\",\r\n                            zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            paginate: {\r\n                                first: \"หน้าแรก\",\r\n                                last: \"หน้าสุดท้าย\",\r\n                                next: \"ต่อไป\",\r\n                                previous: \"ย้อนกลับ\",\r\n                            },\r\n                            aria: {\r\n                                sortAscending: \": activate to sort column ascending\",\r\n                                sortDescending: \": activate to sort column descending\",\r\n                            },\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        getCustomer(val) {\r\n            axios.get(`customer/findbyautoid/${val}`).then((response) => {\r\n                // this.customer_data = response.data;\r\n                // console.log(response.data[0].cust_auto_id);\r\n                this.import_header = {\r\n                    cust_auto_id: response.data[0].cust_auto_id\r\n                }\r\n                if (response.data[0].cust_auto_id == 1) { this.import_header.import_type_id = 2 }\r\n                else this.import_header.import_type_id = 1\r\n\r\n                this.cust_name = response.data[0].customerName\r\n                this.cust_addr = response.data[0].customerAddr\r\n                this.cust_tel = response.data[0].customerTel\r\n            });\r\n        },\r\n        getRubberSize() {\r\n            axios.get(`rubbersize/read`).then((response) => {\r\n                this.rubber_size = response.data;\r\n            });\r\n        },\r\n        getRubberBrand() {\r\n            axios.get(`rubberbrand/read`).then((response) => {\r\n                this.rubber_brand = response.data;\r\n            });\r\n        },\r\n        getProductCost(val) {\r\n            axios.get(`productcost/readprotype/${val}`).then((response) => {\r\n                this.product_cost = response.data;\r\n                $(document).ready(() => {\r\n                    $(\"#showproductcost\").DataTable({\r\n                        select: {\r\n                            // style: 'single'\r\n                            style: 'single',\r\n                            className: 'focusedRow',\r\n                            selector: 'td:last-child a'\r\n                        },\r\n                        \"order\": [[0, 'asc']],\r\n                        scrollY: \"200px\",\r\n                        bJQueryUI: true,\r\n                        paging: false,\r\n                        retrieve: true,\r\n                        destroy: true,\r\n                        \"sPaginationType\": \"full_numbers\",\r\n                        \"scrollCollapse\": true,\r\n                        \"rowReorder\": true,\r\n                        language: {\r\n                            decimal: \"\",\r\n                            emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                            info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                            // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                            infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                            infoPostFix: \"\",\r\n                            thousands: \",\",\r\n                            lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                            loadingRecords: \"Loading...\",\r\n                            processing: \"\",\r\n                            search: \"ค้นหาข้อมูล:\",\r\n                            zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            paginate: {\r\n                                first: \"หน้าแรก\",\r\n                                last: \"หน้าสุดท้าย\",\r\n                                next: \"ต่อไป\",\r\n                                previous: \"ย้อนกลับ\",\r\n                            },\r\n                            aria: {\r\n                                sortAscending: \": activate to sort column ascending\",\r\n                                sortDescending: \": activate to sort column descending\",\r\n                            },\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\ndiv.container {\r\n    width: 100%;\r\n}\r\n\r\n/* .modal-open {\r\n    padding: 0 !important;\r\n    overflow-y: auto;\r\n}\r\n\r\n.modal-close {\r\n    padding: 0 !important;\r\n    overflow-y: auto;\r\n} */\r\n</style>"]},"metadata":{},"sourceType":"module"}