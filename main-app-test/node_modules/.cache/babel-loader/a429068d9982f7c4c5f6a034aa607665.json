{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"@/axios\";\nimport $ from \"jquery\";\nimport { Modal } from \"bootstrap\";\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      data_row: [],\n      province_id: [],\n      newRec: {\n        customerId: \"\",\n        customerName: \"\",\n        customerAddr: \"\",\n        province_id: \"\",\n        postCode: \"\",\n        customerTel: \"\",\n        contactName: \"\",\n        contactTel: \"\",\n        contactPosition: \"\",\n        payType: \"\",\n        creditDay: \"\",\n        creditLimit: \"\",\n        priceType: \"\",\n        remark: \"\",\n        customerDel: \"\"\n      },\n      editCustomer: {\n        customerId: \"\",\n        customerName: \"\",\n        customerAddr: \"\",\n        province_id: \"\",\n        postCode: \"\",\n        customerTel: \"\",\n        contactName: \"\",\n        contactTel: \"\",\n        contactPosition: \"\",\n        payType: \"\",\n        creditDay: \"\",\n        creditLimit: \"\",\n        priceType: \"\",\n        remark: \"\",\n        customerDel: \"\"\n      }\n    };\n  },\n\n  created() {\n    this.getData(); // this.onSelect2();\n  },\n\n  methods: {\n    onSelect2() {\n      $(document).ready(() => {\n        let rec = this.editCustomer;\n        $('#findSelect').select2({\n          theme: \"bootstrap-5\",\n          closeOnSelect: true,\n          width: '100%',\n          dropdownParent: $(\"#findSelect\").parent(),\n          placeholder: \"--- เลือกจังหวัด ---\" // tags: true,\n\n        });\n        $('#findSelect').on('select2:select', function (e) {\n          let data = e.params.data; // $('#findSize1').val(data.id)\n\n          rec.province_id = data.id;\n        });\n      });\n    },\n\n    goLoading() {\n      this.isLoading = true;\n      setTimeout(() => {\n        this.isLoading = false;\n      }, 5000);\n    },\n\n    inputFocus(Modal, InputModal) {\n      const myModal = document.getElementById(Modal);\n      const myInput = document.getElementById(InputModal);\n      myModal.addEventListener(\"shown.bs.modal\", () => {\n        myInput.focus();\n      });\n    },\n\n    newCustomer() {\n      this.$router.push(\"/newcustomer\");\n    },\n\n    editCustomer_Modal(val) {\n      this.editCustomer.customerId = val.customerId;\n      this.editCustomer.customerName = val.customerName;\n      this.editCustomer.customerAddr = val.customerAddr;\n      this.editCustomer.province_id = val.province_id;\n      this.editCustomer.postCode = val.postCode;\n      this.editCustomer.customerTel = val.customerTel;\n      this.editCustomer.contactName = val.contactName;\n      this.editCustomer.contactTel = val.contactTel;\n      this.editCustomer.contactPosition = val.contactPosition;\n      this.editCustomer.payType = val.payType;\n      this.editCustomer.creditDay = val.creditDay;\n      this.editCustomer.creditLimit = val.creditLimit;\n      this.editCustomer.priceType = val.priceType;\n      this.editCustomer.remark = val.remark;\n      this.editCustomer.customerDel = val.customerDel;\n      this.showModal(\"editCustModal\");\n      this.onSelect2(); //this.inputFocus(\"editCustModal\", \"input_name\");\n    },\n\n    async saveNewrec() {\n      // await axios.post(`${apiURL}/customer/new`, this.newRec).then(() => {\n      await axios.post(`customer/new`, this.newRec).then(() => {\n        this.newRec = {\n          customerId: \"\",\n          customerName: \"\",\n          customerAddr: \"\",\n          province_id: \"\",\n          postCode: \"\",\n          customerTel: \"\",\n          contactName: \"\",\n          contactTel: \"\",\n          contactPosition: \"\",\n          payType: \"\",\n          creditDay: \"\",\n          creditLimit: \"\",\n          priceType: \"\",\n          remark: \"\",\n          customerDel: \"\"\n        };\n        this.$router.push(\"/showcustomer\");\n        console.log(\"Process success!\");\n      }).catch(error => {\n        console.log(error);\n      });\n      this.$router.push(\"/\");\n    },\n\n    async saveEditCustomer() {\n      //let editModal = document.getElementById('editCustModal')\n      if (confirm(\"ยืนยันการเปลี่ยนแปลงข้อมูล ?\") == true) {\n        await axios.post(`customer/update`, this.editCustomer).then(() => {\n          this.editCustomer = {\n            customerId: \"\",\n            customerName: \"\",\n            customerAddr: \"\",\n            province_id: \"\",\n            postCode: \"\",\n            customerTel: \"\",\n            contactName: \"\",\n            contactTel: \"\",\n            contactPosition: \"\",\n            payType: \"\",\n            creditDay: \"\",\n            creditLimit: \"\",\n            priceType: \"\",\n            remark: \"\",\n            customerDel: \"\"\n          };\n          this.hideModal(\"editCustModal\"); // ---------------------------------\n\n          $(\"#showcustomer\").DataTable().destroy(); //--- ทำลาย Datatable\n\n          this.getData();\n          console.log(\"Process success!\");\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    },\n\n    async getData() {\n      this.goLoading();\n      await axios.get(`customer/read`).then(response => {\n        this.data_row = response.data;\n        $(document).ready(function () {\n          $(\"#showcustomer\").DataTable({\n            // \"fnRowCallback\": function (nRow, aData,) { // เช็คเงื่อนไขในแต่ละเรคคอร์ด\n            //      if (aData[3] == \"handsome\") {\n            //           $('td', nRow).css('color', 'Red');\n            //      }\n            // }\n            //\"dom\": 'Bfrtip',\n            //\"buttons\": ['excel', 'pdf'],\n            \"scrollY\": '300px',\n            // \"scrollX\": false,\n            // scrollCollapse: true,\n            // paging: false,                              \n            \"bJQueryUI\": true,\n            \"sPaginationType\": \"full_numbers\",\n            \"language\": {\n              \"decimal\": \"\",\n              \"emptyTable\": \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n              \"info\": \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n              // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n              \"infoEmpty\": \"ไม่พบข้อมูลที่ค้นหา\",\n              \"infoFiltered\": \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n              \"infoPostFix\": \"\",\n              \"thousands\": \",\",\n              \"lengthMenu\": \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n              \"loadingRecords\": \"Loading...\",\n              \"processing\": \"\",\n              \"search\": \"ค้นหาข้อมูล:\",\n              \"zeroRecords\": \"ไม่พบข้อมูลที่ค้นหา\",\n              \"paginate\": {\n                \"first\": \"หน้าแรก\",\n                \"last\": \"หน้าสุดท้าย\",\n                \"next\": \"ต่อไป\",\n                \"previous\": \"ย้อนกลับ\"\n              },\n              \"aria\": {\n                \"sortAscending\": \": activate to sort column ascending\",\n                \"sortDescending\": \": activate to sort column descending\"\n              }\n            }\n          });\n        });\n      });\n      await axios.get(`province/read`).then(response => {\n        this.province_id = response.data;\n      });\n    },\n\n    setCreditday() {\n      if (this.editCustomer.payType == 1) {\n        this.editCustomer.creditDay = 0;\n        this.editCustomer.creditLimit = 0;\n        this.editCustomer.priceType = 1;\n      } else {\n        this.editCustomer.creditDay = 30;\n        this.editCustomer.creditLimit = 0;\n        this.editCustomer.priceType = 3;\n      }\n    },\n\n    importBill(val) {\n      sessionStorage.setItem(\"cust_id\", val.cust_auto_id);\n      this.$router.push(\"/importWork\");\n    },\n\n    async showModal(e) {\n      let myModal = await new Modal(document.getElementById(e));\n      await myModal.show();\n    },\n\n    async hideModal(e) {\n      await $(`#${e}`).removeClass(\"in\");\n      await $(\".modal-backdrop\").remove();\n      await $(`#${e}`).hide();\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","$","Modal","data","isLoading","data_row","province_id","newRec","customerId","customerName","customerAddr","postCode","customerTel","contactName","contactTel","contactPosition","payType","creditDay","creditLimit","priceType","remark","customerDel","editCustomer","created","getData","methods","onSelect2","document","ready","rec","select2","theme","closeOnSelect","width","dropdownParent","parent","placeholder","on","e","params","id","goLoading","setTimeout","inputFocus","InputModal","myModal","getElementById","myInput","addEventListener","focus","newCustomer","$router","push","editCustomer_Modal","val","showModal","saveNewrec","post","then","console","log","catch","error","saveEditCustomer","confirm","hideModal","DataTable","destroy","get","response","setCreditday","importBill","sessionStorage","setItem","cust_auto_id","show","removeClass","remove","hide"],"sourceRoot":"","sources":["D:\\Project-vue\\SPR-PROJECT\\main-app-test\\src\\components\\showCustomer.vue"],"sourcesContent":["<template>\r\n     <Loading v-model:active=\"isLoading\" />\r\n     <div class=\"scroll\">\r\n          <!-- <button type=\"button\" class=\"btn btn-primary mt-2\" data-bs-toggle=\"modal\" data-bs-target=\"#add_popup\"\r\n          data-bs-whatever=\"@mdo\">เพิ่มข้อมูลใหม่</button> -->\r\n          <!-- Modal สำหรับการเพิ่มข้อมูลใหม่ -->\r\n\r\n          <!-- สิ้นสุดการเพิ่มข้อมูลใหม่ -->\r\n\r\n          <!-- Modal สำหรับการแก้ไขข้อมูล -->\r\n          <div class=\"modal fade rounded-3\" id=\"editCustModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\r\n               aria-hidden=\"true\">\r\n               <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n                    <div class=\"modal-content\">\r\n                         <div class=\"modal-header bg-danger bg-opacity-75\">\r\n                              <h1 class=\"modal-title fs-5\" style=\"color: white\" id=\"exampleModalLabel\">\r\n                                   ดูรายละเอียด / แก้ไข\r\n                              </h1>\r\n                              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"\r\n                                   aria-label=\"Close\"></button>\r\n                         </div>\r\n                         <div class=\"modal-body\">\r\n                              <form>\r\n                                   <div class=\"card-body\">\r\n                                        <div class=\"form-group\">\r\n                                             <div class=\"row\">\r\n                                                  <div class=\"col\">\r\n                                                       <div class=\"mb-2\">\r\n                                                            <label style=\"color: red\">*รหัสลูกค้า</label>\r\n                                                            <input type=\"text\" class=\"form-control\"\r\n                                                                 v-model.trim=\"editCustomer.customerId\" disabled />\r\n                                                       </div>\r\n                                                       <div class=\"mb-2\">\r\n                                                            <label style=\"color: red\">*ชื่อลูกค้า</label>\r\n                                                            <input type=\"text\" id=\"input_name\" class=\"form-control\"\r\n                                                                 v-model.trim=\"editCustomer.customerName\" />\r\n                                                       </div>\r\n                                                       <div class=\"mb-2\">\r\n                                                            <label>ที่อยู่ลูกค้า</label>\r\n                                                            <input type=\"text\" class=\"form-control\"\r\n                                                                 v-model.trim=\"editCustomer.customerAddr\" />\r\n                                                       </div>\r\n                                                       <div class=\"mb-2\">\r\n                                                            <label>จังหวัด</label>\r\n                                                            <select class=\"form-select\" id=\"findSelect\"\r\n                                                                 v-model=\"editCustomer.province_id\">\r\n                                                                 <option v-for=\"province in province_id\"\r\n                                                                      :key=\"province.PROVINCE_ID\"\r\n                                                                      :value=\"province.PROVINCE_ID\">\r\n                                                                      {{ province.PROVINCE_NAME }}\r\n                                                                 </option>\r\n                                                            </select>\r\n                                                       </div>\r\n                                                       <div class=\"mb-2\">\r\n                                                            <label>รหัสไปรษณีย์</label>\r\n                                                            <input type=\"text\" class=\"form-control\"\r\n                                                                 v-model=\"editCustomer.postCode\">\r\n                                                       </div>\r\n                                                       <div class=\"mb-2\">\r\n                                                            <label>เบอร์โทรศัพท์</label>\r\n                                                            <input type=\"text\" class=\"form-control\"\r\n                                                                 v-model=\"editCustomer.customerTel\" />\r\n                                                       </div>\r\n                                                  </div>\r\n                                                  <div class=\"col-md-6\">\r\n                                                       <div class=\"mb-2\">\r\n                                                            <label>ชื่อผู้ติดต่อ</label>\r\n                                                            <input type=\"text\" class=\"form-control\"\r\n                                                                 v-model=\"editCustomer.contactName\" />\r\n                                                       </div>\r\n\r\n                                                       <label>เบอร์โทรผู้ติดต่อ / ตำแหน่งงานผู้ติดต่อ</label>\r\n                                                       <div class=\"input-group mb-2\">\r\n                                                            <input type=\"text\" class=\"form-control\"\r\n                                                                 v-model=\"editCustomer.contactTel\" />\r\n                                                            <span class=\"input-group-text\">/</span>\r\n                                                            <input type=\"text\" class=\"form-control\"\r\n                                                                 v-model=\"editCustomer.contactPosition\" />\r\n                                                       </div>\r\n                                                       <div class=\" mb-2\">\r\n                                                            <label>ประเภทการชำระเงิน</label>\r\n                                                            <select class=\"form-select\" @change=\"setCreditday\"\r\n                                                                 v-model=\"editCustomer.payType\">\r\n                                                                 <option value=\"1\">เงินสด</option>\r\n                                                                 <option value=\"2\">เครดิต</option>\r\n                                                            </select>\r\n                                                       </div>\r\n                                                       <!-- ตรวจสอบสิทธิ์ในการเครดิต -->\r\n\r\n                                                       <div class=\"row border-0\" v-if=\"editCustomer.payType == 2\">\r\n                                                            <div class=\"col\">\r\n                                                                 <label>เครดิต (วัน)</label>\r\n                                                                 <div class=\"input-group\">\r\n                                                                      <input type=\"number\" class=\"form-control\"\r\n                                                                           v-model=\"editCustomer.creditDay\"\r\n                                                                           style=\"width: auto;\" />\r\n                                                                      <!-- <span class=\"input-group-text\" style=\"width:100%;\">วัน</span> -->\r\n                                                                 </div>\r\n                                                            </div>\r\n                                                            <div class=\"col\">\r\n                                                                 <label>วงเงิน (บาท)</label>\r\n                                                                 <div class=\"input-group\">\r\n                                                                      <input type=\"number\" class=\"form-control\"\r\n                                                                           v-model=\"editCustomer.creditLimit\"\r\n                                                                           style=\"width:auto;\" />\r\n                                                                      <!-- <span class=\"input-group-text\" style=\"width:100%;\">บาท</span> -->\r\n                                                                 </div>\r\n                                                            </div>\r\n                                                       </div>\r\n\r\n                                                       <!-- สิ้นสุดตรวจสอบสิทธิ์ในการเครดิต -->\r\n                                                       <div class=\" mb-2 mt-2\">\r\n                                                            <label>ประเภทราคาที่</label>\r\n                                                            <select class=\"form-select\"\r\n                                                                 v-model=\"editCustomer.priceType\">\r\n                                                                 <option value=\"1\">เงินสด</option>\r\n                                                                 <option value=\"2\">เงินสด+จัดส่ง</option>\r\n                                                                 <option value=\"3\">เครดิต</option>\r\n                                                                 <option value=\"4\">ราคาพิเศษ</option>\r\n                                                            </select>\r\n                                                       </div>\r\n                                                       <div class=\" mb-2\">\r\n                                                            <textarea class=\"form-control\"\r\n                                                                 placeholder=\"บันทึกเพิ่มเติมได้ที่นี่\"\r\n                                                                 v-model=\"editCustomer.remark\"\r\n                                                                 style=\"height: 80px\"></textarea>\r\n                                                            <label for=\"comment\">บันทึกเพิ่มเติม</label>\r\n                                                       </div>\r\n                                                  </div>\r\n                                             </div>\r\n                                        </div>\r\n                                   </div>\r\n                                   <!-- {{ editCustomer }} -->\r\n                              </form>\r\n                         </div>\r\n                         <div class=\"modal-footer\">\r\n                              <!-- ปุ่มปิด -->\r\n                              <button type=\"button\" class=\"btn btn-secondary btn-lg\"\r\n                                   @click.prevent=\"hideModal('editCustModal')\">\r\n                                   <font-awesome-icon icon=\"fa-solid fa-ban\" />\r\n                              </button>\r\n                              <!-- ปุ่มบันทึก -->\r\n                              <button id=\"btn\" class=\"btn btn-primary btn-lg\" @click.prevent=\"saveEditCustomer\">\r\n                                   <font-awesome-icon icon=\"fa-solid fa-circle-check\" />\r\n                              </button>\r\n                         </div>\r\n                    </div>\r\n               </div>\r\n          </div>\r\n          <!-- สิ้นสุดการแก้ไขข้อมูล(Modal) -->\r\n          <div class=\"card border-dark shadow overflow-auto\" style=\"width:100%;\">\r\n               <div class=\"card-header bg-primary\" style=\"color:white ;\">\r\n                    ::: แสดงรายการ-ลูกค้า :::\r\n               </div>\r\n               <div class=\"card-body\">\r\n                    <table id=\"showcustomer\" class=\"ms-2 table table-striped table-hover table-sm nowrap\"\r\n                         style=\"width:auto; align-items: center\">\r\n                         <thead>\r\n                              <tr>\r\n                                   <th style=\"text-align:right ;\">\r\n                                        <button class=\"btn btn-success btn-sm\" title=\"เพิ่มข้อมูล\"\r\n                                             @click=\"newCustomer()\">\r\n                                             <!-- ปุ่มเพิ่มข้อมูล -->\r\n                                             <!-- <font-awesome-icon icon=\"fa-solid fa-plus\" /> -->\r\n                                             <font-awesome-icon icon=\"fa-solid fa-user-plus\" />\r\n                                        </button>\r\n                                   </th>\r\n                                   <th></th>\r\n                                   <th>รหัสลูกค้า</th>\r\n                                   <th>ชื่อลูกค้า</th>\r\n                                   <th>ที่อยู่ลูกค้า</th>\r\n                                   <th>เบอร์ติดต่อ</th>\r\n                                   <th>จังหวัด</th>\r\n                              </tr>\r\n                         </thead>\r\n                         <tbody class=\"table-group-divider\">\r\n                              <tr v-for=\"rec in data_row\" :key=\"rec.customerId\">\r\n                                   <td style=\"text-align: right\">\r\n                                        <button id=\"edit\" class=\"btn btn-primary btn-sm\" title=\"แก้ไขข้อมูล\"\r\n                                             @click.prevent=\"editCustomer_Modal(rec)\">\r\n                                             <!-- ปุ่มแก้ไขข้อมูล -->\r\n                                             <!-- <font-awesome-icon icon=\"fa-solid fa-pen\" /> -->\r\n                                             <font-awesome-icon icon=\"fa-solid fa-user-pen\" />\r\n                                        </button>\r\n                                   </td>\r\n                                   <td style=\"text-align: left\">\r\n                                        <button class=\"btn btn-info btn-sm\" title=\"ทำใบรับ\"\r\n                                             @click.prevent=\"importBill(rec)\">\r\n                                             <!-- ปุ่มลบข้อมูล -->\r\n                                             <!-- <font-awesome-icon icon=\"fa-solid fa-trash-can\" /> -->\r\n                                             <!-- ใบรับ -->\r\n                                             <font-awesome-icon icon=\"fa-regular fa-folder-open\" />\r\n                                        </button>\r\n                                   </td>\r\n                                   <td @click.prevent=\"editCustomer_Modal(rec)\">{{ rec.customerId }}</td>\r\n                                   <td @click.prevent=\"editCustomer_Modal(rec)\">{{ rec.customerName }}</td>\r\n                                   <td @click.prevent=\"editCustomer_Modal(rec)\">{{ rec.customerAddr }}</td>\r\n                                   <td @click.prevent=\"editCustomer_Modal(rec)\">{{ rec.customerTel }}</td>\r\n                                   <td @click.prevent=\"editCustomer_Modal(rec)\">{{ rec.PROVINCE_NAME }}</td>\r\n                              </tr>\r\n                         </tbody>\r\n                    </table>\r\n               </div>\r\n          </div>\r\n     </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"@/axios\";\r\nimport $ from \"jquery\";\r\nimport { Modal } from \"bootstrap\"\r\n\r\nexport default {\r\n     data() {\r\n          return {\r\n               isLoading: false,\r\n               data_row: [],\r\n               province_id: [],\r\n               newRec: {\r\n                    customerId: \"\",\r\n                    customerName: \"\",\r\n                    customerAddr: \"\",\r\n                    province_id: \"\",\r\n                    postCode: \"\",\r\n                    customerTel: \"\",\r\n                    contactName: \"\",\r\n                    contactTel: \"\",\r\n                    contactPosition: \"\",\r\n                    payType: \"\",\r\n                    creditDay: \"\",\r\n                    creditLimit: \"\",\r\n                    priceType: \"\",\r\n                    remark: \"\",\r\n                    customerDel: \"\",\r\n               },\r\n               editCustomer: {\r\n                    customerId: \"\",\r\n                    customerName: \"\",\r\n                    customerAddr: \"\",\r\n                    province_id: \"\",\r\n                    postCode: \"\",\r\n                    customerTel: \"\",\r\n                    contactName: \"\",\r\n                    contactTel: \"\",\r\n                    contactPosition: \"\",\r\n                    payType: \"\",\r\n                    creditDay: \"\",\r\n                    creditLimit: \"\",\r\n                    priceType: \"\",\r\n                    remark: \"\",\r\n                    customerDel: \"\",\r\n               },\r\n          };\r\n     },\r\n     created() {\r\n          this.getData();\r\n          // this.onSelect2();\r\n     },\r\n     methods: {\r\n          onSelect2() {\r\n               $(document).ready(() => {\r\n                    let rec = this.editCustomer;\r\n                    $('#findSelect').select2({\r\n                         theme: \"bootstrap-5\",\r\n                         closeOnSelect: true,\r\n                         width: '100%',\r\n                         dropdownParent: $(\"#findSelect\").parent(),\r\n                         placeholder: \"--- เลือกจังหวัด ---\",\r\n                         // tags: true,\r\n                    });\r\n                    $('#findSelect').on('select2:select', function (e) {\r\n                         let data = e.params.data;\r\n                         // $('#findSize1').val(data.id)\r\n                         rec.province_id = data.id;\r\n                    })\r\n               });\r\n          },\r\n          goLoading() {\r\n               this.isLoading = true\r\n               setTimeout(() => {\r\n                    this.isLoading = false\r\n               }, 5000)\r\n          },\r\n          inputFocus(Modal, InputModal) {\r\n               const myModal = document.getElementById(Modal);\r\n               const myInput = document.getElementById(InputModal);\r\n               myModal.addEventListener(\"shown.bs.modal\", () => {\r\n                    myInput.focus();\r\n               });\r\n          },\r\n          newCustomer() {\r\n               this.$router.push(\"/newcustomer\");\r\n          },\r\n          editCustomer_Modal(val) {\r\n               this.editCustomer.customerId = val.customerId;\r\n               this.editCustomer.customerName = val.customerName;\r\n               this.editCustomer.customerAddr = val.customerAddr;\r\n               this.editCustomer.province_id = val.province_id;\r\n               this.editCustomer.postCode = val.postCode;\r\n               this.editCustomer.customerTel = val.customerTel;\r\n               this.editCustomer.contactName = val.contactName;\r\n               this.editCustomer.contactTel = val.contactTel;\r\n               this.editCustomer.contactPosition = val.contactPosition;\r\n               this.editCustomer.payType = val.payType;\r\n               this.editCustomer.creditDay = val.creditDay;\r\n               this.editCustomer.creditLimit = val.creditLimit;\r\n               this.editCustomer.priceType = val.priceType;\r\n               this.editCustomer.remark = val.remark;\r\n               this.editCustomer.customerDel = val.customerDel;\r\n               this.showModal(\"editCustModal\");\r\n               this.onSelect2();\r\n               //this.inputFocus(\"editCustModal\", \"input_name\");\r\n          },\r\n          async saveNewrec() {\r\n               // await axios.post(`${apiURL}/customer/new`, this.newRec).then(() => {\r\n               await axios.post(`customer/new`, this.newRec).then(() => {\r\n                    this.newRec = {\r\n                         customerId: \"\",\r\n                         customerName: \"\",\r\n                         customerAddr: \"\",\r\n                         province_id: \"\",\r\n                         postCode: \"\",\r\n                         customerTel: \"\",\r\n                         contactName: \"\",\r\n                         contactTel: \"\",\r\n                         contactPosition: \"\",\r\n                         payType: \"\",\r\n                         creditDay: \"\",\r\n                         creditLimit: \"\",\r\n                         priceType: \"\",\r\n                         remark: \"\",\r\n                         customerDel: \"\",\r\n                    };\r\n                    this.$router.push(\"/showcustomer\");\r\n                    console.log(\"Process success!\");\r\n               })\r\n                    .catch((error) => {\r\n                         console.log(error);\r\n                    });\r\n               this.$router.push(\"/\");\r\n          },\r\n          async saveEditCustomer() {\r\n               //let editModal = document.getElementById('editCustModal')\r\n               if (confirm(\"ยืนยันการเปลี่ยนแปลงข้อมูล ?\") == true) {\r\n                    await axios.post(`customer/update`, this.editCustomer).then(() => {\r\n                         this.editCustomer = {\r\n                              customerId: \"\",\r\n                              customerName: \"\",\r\n                              customerAddr: \"\",\r\n                              province_id: \"\",\r\n                              postCode: \"\",\r\n                              customerTel: \"\",\r\n                              contactName: \"\",\r\n                              contactTel: \"\",\r\n                              contactPosition: \"\",\r\n                              payType: \"\",\r\n                              creditDay: \"\",\r\n                              creditLimit: \"\",\r\n                              priceType: \"\",\r\n                              remark: \"\",\r\n                              customerDel: \"\",\r\n                         };\r\n                         this.hideModal(\"editCustModal\");\r\n                         // ---------------------------------\r\n                         $(\"#showcustomer\").DataTable().destroy(); //--- ทำลาย Datatable\r\n                         this.getData();\r\n                         console.log(\"Process success!\");\r\n                    })\r\n                         .catch((error) => {\r\n                              console.log(error);\r\n                         });\r\n               }\r\n          },\r\n          async getData() {\r\n               this.goLoading();\r\n               await axios.get(`customer/read`).then((response) => {\r\n                    this.data_row = response.data;\r\n                    $(document).ready(function () {\r\n                         $(\"#showcustomer\").DataTable({\r\n                              // \"fnRowCallback\": function (nRow, aData,) { // เช็คเงื่อนไขในแต่ละเรคคอร์ด\r\n                              //      if (aData[3] == \"handsome\") {\r\n                              //           $('td', nRow).css('color', 'Red');\r\n                              //      }\r\n                              // }\r\n                              //\"dom\": 'Bfrtip',\r\n                              //\"buttons\": ['excel', 'pdf'],\r\n                              \"scrollY\": '300px',\r\n                              // \"scrollX\": false,\r\n                              // scrollCollapse: true,\r\n                              // paging: false,                              \r\n                              \"bJQueryUI\": true,\r\n                              \"sPaginationType\": \"full_numbers\",\r\n                              \"language\": {\r\n                                   \"decimal\": \"\",\r\n                                   \"emptyTable\": \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                                   \"info\": \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                                   // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                                   \"infoEmpty\": \"ไม่พบข้อมูลที่ค้นหา\",\r\n                                   \"infoFiltered\": \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                                   \"infoPostFix\": \"\",\r\n                                   \"thousands\": \",\",\r\n                                   \"lengthMenu\": \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                                   \"loadingRecords\": \"Loading...\",\r\n                                   \"processing\": \"\",\r\n                                   \"search\": \"ค้นหาข้อมูล:\",\r\n                                   \"zeroRecords\": \"ไม่พบข้อมูลที่ค้นหา\",\r\n                                   \"paginate\": {\r\n                                        \"first\": \"หน้าแรก\",\r\n                                        \"last\": \"หน้าสุดท้าย\",\r\n                                        \"next\": \"ต่อไป\",\r\n                                        \"previous\": \"ย้อนกลับ\"\r\n                                   },\r\n                                   \"aria\": {\r\n                                        \"sortAscending\": \": activate to sort column ascending\",\r\n                                        \"sortDescending\": \": activate to sort column descending\"\r\n                                   }\r\n                              }\r\n                         });\r\n                    });\r\n               });\r\n               await axios.get(`province/read`).then((response) => {\r\n                    this.province_id = response.data;\r\n               });\r\n          },\r\n          setCreditday() {\r\n               if (this.editCustomer.payType == 1) {\r\n                    this.editCustomer.creditDay = 0;\r\n                    this.editCustomer.creditLimit = 0;\r\n                    this.editCustomer.priceType = 1;\r\n               } else {\r\n                    this.editCustomer.creditDay = 30;\r\n                    this.editCustomer.creditLimit = 0;\r\n                    this.editCustomer.priceType = 3;\r\n               }\r\n          },\r\n          importBill(val) {\r\n               sessionStorage.setItem(\"cust_id\", val.cust_auto_id);\r\n               this.$router.push(\"/importWork\");\r\n          },\r\n          async showModal(e) {\r\n               let myModal = await new Modal(document.getElementById(e))\r\n               await myModal.show()\r\n          },\r\n          async hideModal(e) {\r\n               await $(`#${e}`).removeClass(\"in\");\r\n               await $(\".modal-backdrop\").remove();\r\n               await $(`#${e}`).hide();\r\n          },\r\n     },\r\n};\r\n</script>\r\n\r\n<style>\r\n.scroll {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  overflow-x: auto;\r\n}\r\n\r\n.card { \r\n  flex: auto;\r\n  flex-shrink: 0;\r\n  max-width: auto;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}