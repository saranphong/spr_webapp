{"ast":null,"code":"import $ from \"jquery\";\nimport axios from \"@/axios\"; // import { ref } from \"vue\"\n\nexport default {\n  data() {\n    return {\n      chk_newProduct_page: false,\n      productiontype_data: [],\n      product_data: [],\n      rubstyle_data: [],\n      rubsize_data: [],\n      rubsize_data2: [],\n      check_dup: [],\n      new_product_list: {\n        production_type_id: \"\",\n        rub_style_id: \"\",\n        rub_size_id: \"\"\n      },\n      search_text: \"\"\n    };\n  },\n\n  async mounted() {\n    await this.getProduct();\n    await this.getProductionType();\n    await this.getRubberStyle();\n    await this.getRubberSize();\n    await this.onSelect2ForRubberStyle();\n    await this.onSelect2ForRubberSize();\n  },\n\n  methods: {\n    switchpage() {\n      this.chk_newProduct_page = !this.chk_newProduct_page;\n    },\n\n    async findSizeAll() {\n      await axios.get(`rubbersize/findbytext/${this.search_text}`).then(response => {\n        this.rubsize_data2 = response.data; // console.log(response.data.length)\n\n        if (response.data.length > 0) {\n          $(document).ready(() => {\n            $(\"#show-list\").html(response);\n          });\n        }\n      });\n    },\n\n    onSelect2ForRubberStyle() {\n      $(document).ready(() => {\n        $(\"#rubber_style\").select2({\n          theme: \"bootstrap-5\",\n          closeOnSelect: true,\n          width: \"100%\",\n          dropdownParent: $(\"#rubber_style\").parent(),\n          placeholder: \"--- เลือกลายดอก ---\" // tags: true,\n\n        });\n        $(\"#rubber_style\").on(\"select2:select\", e => {\n          let data = e.params.data;\n          this.new_product_list.rub_style_id = data.id;\n        });\n      });\n    },\n\n    onSelect2ForRubberSize() {\n      $(document).ready(() => {\n        $(\"#rubber_size\").select2({\n          theme: \"bootstrap-5\",\n          closeOnSelect: true,\n          width: \"100%\",\n          dropdownParent: $(\"#rubber_size\").parent(),\n          placeholder: \"--- เลือกขนาดยาง ---\" // tags: true,\n\n        });\n        $(\"#rubber_size\").on(\"select2:select\", e => {\n          let data = e.params.data;\n          this.new_product_list.rub_size_id = data.id;\n        });\n      });\n    },\n\n    async getProductionType() {\n      await axios.get(`productiontype/read`).then(response => {\n        this.productiontype_data = response.data;\n      });\n    },\n\n    async getRubberStyle() {\n      await axios.get(`rubberstyle/read`).then(response => {\n        this.rubstyle_data = response.data;\n      });\n    },\n\n    async getRubberSize() {\n      await axios.get(`rubbersize/read`).then(response => {\n        this.rubsize_data = response.data;\n      });\n    },\n\n    async saveNewProduct() {\n      if (this.new_product_list.production_type_id != '' && this.new_product_list.rub_size_id != '' && this.new_product_list.rub_style_id != '') {\n        await axios.post(`productlist/checkdup`, this.new_product_list).then(response => {\n          this.check_dup = response.data;\n\n          if (this.check_dup.length == 0) {\n            if (confirm(\"ยืนยันการบันทุกข้อมูล\") == true) {\n              axios.post(`productlist/new`, this.new_product_list).then(() => {\n                $(\"#listproduct\").DataTable().destroy();\n                this.getProduct();\n              }); // $(\"#listproduct\").DataTable().destroy();\n            }\n          } else {\n            alert(\"พบว่ามีรายการสินค้านี้อยู่แล้ว !!!\");\n          }\n        }).catch(error => {\n          console.log(\"พบข้อผิดผลาดในการบันทึกข้อมูล \" + error);\n        });\n      } else {\n        alert(\"กรุณากรอกข้อมูลให้ครบถ้วน !\");\n      }\n    },\n\n    async getProduct() {\n      console.log(\"getProduct started...\");\n      await axios.get(`productlist/read`).then(response => {\n        this.product_data = response.data;\n        $(document).ready(() => {\n          $(\"#listproduct\").DataTable({\n            \"scrollY\": '300px',\n            \"scorllX\": false,\n            \"bJQueryUI\": true,\n            \"sPaginationType\": \"full_numbers\",\n            \"bFilter\": true,\n            \"paging\": true,\n            \"scrollCollapse\": true,\n            \"rowReorder\": true,\n            \"destroy\": true,\n            \"bSort\": true,\n            \"language\": {\n              decimal: \"\",\n              emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n              info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n              // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n              infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\n              infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n              infoPostFix: \"\",\n              thousands: \",\",\n              lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n              loadingRecords: \"Loading...\",\n              processing: \"\",\n              search: \"ค้นหาข้อมูล:\",\n              zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\n              paginate: {\n                first: \"หน้าแรก\",\n                last: \"หน้าสุดท้าย\",\n                next: \"ต่อไป\",\n                previous: \"ย้อนกลับ\"\n              },\n              aria: {\n                sortAscending: \": activate to sort column ascending\",\n                sortDescending: \": activate to sort column descending\"\n              }\n            }\n          });\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["$","axios","data","chk_newProduct_page","productiontype_data","product_data","rubstyle_data","rubsize_data","rubsize_data2","check_dup","new_product_list","production_type_id","rub_style_id","rub_size_id","search_text","mounted","getProduct","getProductionType","getRubberStyle","getRubberSize","onSelect2ForRubberStyle","onSelect2ForRubberSize","methods","switchpage","findSizeAll","get","then","response","length","document","ready","html","select2","theme","closeOnSelect","width","dropdownParent","parent","placeholder","on","e","params","id","saveNewProduct","post","confirm","DataTable","destroy","alert","catch","error","console","log","decimal","emptyTable","info","infoEmpty","infoFiltered","infoPostFix","thousands","lengthMenu","loadingRecords","processing","search","zeroRecords","paginate","first","last","next","previous","aria","sortAscending","sortDescending"],"sourceRoot":"","sources":["D:\\Project-vue\\SPR-PROJECT\\main-app-test\\src\\components\\createProductList.vue"],"sourcesContent":["<template>\r\n    <div class=\" container-fluid\">\r\n        <div class=\"row-12\">\r\n            <div class=\"col-12\" style=\"text-align:center\">\r\n                <!-- สลับปุ่มสลับการเปิด-ปิด หน้าการเพิ่มข้อมูล -->\r\n                <!-- <button class=\"btn btn-primary rounded-3 shadow col-12\" type=\"button\" data-bs-toggle=\"collapse\" -->\r\n                <!-- data-bs-target=\"#newProductList\" aria-expanded=\"false\" aria-controls=\"newProductList\" -->\r\n                <!-- @click.prevent=\"switchpage();\" v-if=\"this.chk_newProduct_page == false\">\r\n                    เพิ่มรายการสินค้า&nbsp; -->\r\n                <!-- <font-awesome-icon icon=\"fa-solid fa-arrow-down-short-wide\" style=\"color:yellow;\" /> -->\r\n                <!-- <font-awesome-icon icon=\"fa-solid fa-angle-down\" style=\"color:yellow;\" />\r\n                </button> -->\r\n                <button class=\"btn btn-success rounded-3 shadow col-12\" type=\"button\" data-bs-toggle=\"collapse\"\r\n                    data-bs-target=\"#newProductList\" aria-expanded=\"false\" aria-controls=\"newProductList\"\r\n                    @click.prevent=\"switchpage();\">\r\n                    เพิ่มรายการสินค้า&nbsp;\r\n                    <!-- <font-awesome-icon icon=\"fa-solid fa-arrow-up-short-wide\" style=\"color:yellow;\" /> -->\r\n                    <font-awesome-icon icon=\"fa-solid fa-angle-down\" style=\"color:yellow;\"\r\n                        v-if=\"this.chk_newProduct_page == false\" />\r\n                    <font-awesome-icon icon=\"fa-solid fa-angle-up\" style=\"color:yellow;\" v-else />\r\n                </button>\r\n                <!-- //////////////////////////////// -->\r\n            </div>\r\n            <div class=\"row-12\">\r\n                <div class=\"col-12\">\r\n                    <div class=\"collapse mt-1\" id=\"newProductList\">\r\n                        <div class=\"card rounded-3 shadow\" style=\"width:100%\">\r\n                            <!-- <div class=\"card-header bg-success bg-opacity-50\" style=\"color:white; text-align:center\">\r\n                                ::: เพิ่มรายการสินค้า:::\r\n                            </div> -->\r\n                            <div class=\"card-body\">\r\n                                <div class=\"row\">\r\n                                    <!-- <div class=\"col\">\r\n                                        <label>ประเภทงาน</label>\r\n                                        <select id=\"jobtype\" class=\"form-select\">\r\n                                            <option selected>::: เลือกประเภทงาน :::</option>\r\n                                            <option value=\"1\">ค่าจ้าง</option>\r\n                                            <option value=\"2\">ยางพร้อมโครง</option>\r\n                                        </select>\r\n                                    </div> -->\r\n                                    <div class=\"col\">\r\n                                        <label>ประเภทการผลิต</label>\r\n                                        <select id=\"production_type\" class=\"form-select\"\r\n                                            v-model=\"new_product_list.production_type_id\">\r\n                                            <option v-for=\"production_type in productiontype_data\"\r\n                                                :key=\"production_type.production_type_id\"\r\n                                                :value=\"production_type.production_type_id\">\r\n                                                {{ production_type.production_type_name }}\r\n                                            </option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div class=\"col\">\r\n                                        <label>ลายดอก</label>\r\n                                        <select class=\"form-select\" id=\"rubber_style\"\r\n                                            v-model=\"this.new_product_list.rub_style_id\">\r\n                                            <option v-for=\"rubberStyle in rubstyle_data\" :key=\"rubberStyle.rub_style_id\"\r\n                                                :value=\"rubberStyle.rub_style_id\">\r\n                                                {{ rubberStyle.rub_style_name }}\r\n                                            </option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div class=\"col\">\r\n                                        <label>ขนาดยาง</label>\r\n                                        <select class=\"form-select\" id=\"rubber_size\"\r\n                                            v-model=\"this.new_product_list.rub_size_id\">\r\n                                            <option v-for=\"rubberSize in rubsize_data\" :key=\"rubberSize.rub_size_id\"\r\n                                                :value=\"rubberSize.rub_size_id\">\r\n                                                {{ rubberSize.rub_size_name }} > {{ rubberSize.rub_size_detail }}\r\n                                            </option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"row mt-2\">\r\n                                    <div class=\"input-group\">\r\n                                        <input type=\"text\" name=\"search\" id=\"search\" class=\"form-control\"\r\n                                            placeholder=\"Search something...\" autocomplete=\"off\" @input=\"findSizeAll()\" \r\n                                            v-model=\"this.search_text\" />\r\n                                    </div>\r\n                                    <div class=\"col-md-5\">\r\n                                        <div class=\"list-group\" id=\"show-list\">ssss</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"card-footer\" style=\"text-align:center\">\r\n                                <button class=\"btn btn-success rounded-5 shadow\"\r\n                                    @click.prevent=\"saveNewProduct();\">บันทึกลงรายการสินค้า\r\n                                    <font-awesome-icon icon=\"fa-solid fa-download\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"card rounded-3 shadow mt-1\" style=\"width:100%\">\r\n                        <div class=\"card-header bg-primary\" style=\"color:white; text-align:center;width:auto\">\r\n                            ::: แสดงรายการ-สินค้า :::\r\n                        </div>\r\n                        <div class=\"card-body\">\r\n                            <table id=\"listproduct\" class=\"table table-striped table-hover table-sm\"\r\n                                style=\"width: 100%; align-items: center\">\r\n                                <thead>\r\n                                    <tr style=\"color:darkblue\">\r\n                                        <th>ลำดับ</th>\r\n                                        <th>ประเภทการผลิต</th>\r\n                                        <th>ลายดอก</th>\r\n                                        <th>ขนาดยาง</th>\r\n                                        <th></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody class=\"table-group-divider\">\r\n                                    <tr v-for=\"rec in product_data\" :key=\"rec.product_list_id\">\r\n                                        <td>{{ product_data.indexOf(rec) + 1 }}</td>\r\n                                        <td>{{ rec.production_type_name }}</td>\r\n                                        <td>{{ rec.rub_style_name }}</td>\r\n                                        <td>{{ rec.rub_size_name }} {{ rec.rub_size_detail }}</td>\r\n                                        <td style=\"text-align: left\">\r\n                                            <button id=\"edit\" class=\"btn btn-primary btn-sm\" title=\"แก้ไขข้อมูล\"\r\n                                                @click=\"editProduct();\">\r\n                                                <font-awesome-icon icon=\"fa-solid fa-pen\" />\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\"\r\nimport axios from \"@/axios\"\r\n// import { ref } from \"vue\"\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            chk_newProduct_page: false,\r\n            productiontype_data: [],\r\n            product_data: [],\r\n            rubstyle_data: [],\r\n            rubsize_data: [],\r\n            rubsize_data2: [],\r\n            check_dup: [],\r\n            new_product_list: {\r\n                production_type_id: \"\",\r\n                rub_style_id: \"\",\r\n                rub_size_id: \"\",\r\n            },\r\n            search_text: \"\",\r\n        }\r\n    },\r\n    async mounted() {\r\n        await this.getProduct();\r\n        await this.getProductionType();\r\n        await this.getRubberStyle();\r\n        await this.getRubberSize();\r\n        await this.onSelect2ForRubberStyle();\r\n        await this.onSelect2ForRubberSize();\r\n    },\r\n    methods: {\r\n        switchpage() {\r\n            this.chk_newProduct_page = !this.chk_newProduct_page;\r\n        },\r\n        async findSizeAll() {\r\n            await axios.get(`rubbersize/findbytext/${this.search_text}`).then((response) => {\r\n                this.rubsize_data2 = response.data;\r\n                // console.log(response.data.length)\r\n                if(response.data.length > 0) {\r\n                    $(document).ready(() => {\r\n                        $(\"#show-list\").html(response);\r\n                    })                    \r\n                }\r\n            });\r\n        },\r\n        onSelect2ForRubberStyle() {\r\n            $(document).ready(() => {\r\n                $(\"#rubber_style\").select2({\r\n                    theme: \"bootstrap-5\",\r\n                    closeOnSelect: true,\r\n                    width: \"100%\",\r\n                    dropdownParent: $(\"#rubber_style\").parent(),\r\n                    placeholder: \"--- เลือกลายดอก ---\",\r\n                    // tags: true,\r\n                });\r\n                $(\"#rubber_style\").on(\"select2:select\", (e) => {\r\n                    let data = e.params.data;\r\n                    this.new_product_list.rub_style_id = data.id;\r\n                });\r\n            });\r\n        },\r\n        onSelect2ForRubberSize() {\r\n            $(document).ready(() => {\r\n                $(\"#rubber_size\").select2({\r\n                    theme: \"bootstrap-5\",\r\n                    closeOnSelect: true,\r\n                    width: \"100%\",\r\n                    dropdownParent: $(\"#rubber_size\").parent(),\r\n                    placeholder: \"--- เลือกขนาดยาง ---\",\r\n                    // tags: true,\r\n                });\r\n                $(\"#rubber_size\").on(\"select2:select\", (e) => {\r\n                    let data = e.params.data;\r\n                    this.new_product_list.rub_size_id = data.id;\r\n                });\r\n            });\r\n        },\r\n        async getProductionType() {\r\n            await axios.get(`productiontype/read`).then((response) => {\r\n                this.productiontype_data = response.data;\r\n            });\r\n        },\r\n        async getRubberStyle() {\r\n            await axios.get(`rubberstyle/read`).then((response) => {\r\n                this.rubstyle_data = response.data;\r\n            });\r\n        },\r\n        async getRubberSize() {\r\n            await axios.get(`rubbersize/read`).then((response) => {\r\n                this.rubsize_data = response.data;\r\n            });\r\n        },\r\n        async saveNewProduct() {\r\n            if ((this.new_product_list.production_type_id != '') &&\r\n                (this.new_product_list.rub_size_id != '') && (this.new_product_list.rub_style_id != '')) {\r\n                await axios.post(`productlist/checkdup`, this.new_product_list).then((response) => {\r\n                    this.check_dup = response.data;\r\n                    if (this.check_dup.length == 0) {\r\n                        if (confirm(\"ยืนยันการบันทุกข้อมูล\") == true) {\r\n                            axios.post(`productlist/new`, this.new_product_list).then(() => {\r\n                                $(\"#listproduct\").DataTable().destroy();\r\n                                this.getProduct();\r\n                            });\r\n                            // $(\"#listproduct\").DataTable().destroy();\r\n                        }\r\n                    }\r\n                    else {\r\n                        alert(\"พบว่ามีรายการสินค้านี้อยู่แล้ว !!!\");\r\n                    }\r\n                }).catch((error) => {\r\n                    console.log(\"พบข้อผิดผลาดในการบันทึกข้อมูล \" + error);\r\n                });\r\n            }\r\n            else {\r\n                alert(\"กรุณากรอกข้อมูลให้ครบถ้วน !\")\r\n            }\r\n        },\r\n        async getProduct() {\r\n            console.log(\"getProduct started...\");\r\n            await axios.get(`productlist/read`).then((response) => {\r\n                this.product_data = response.data;\r\n                $(document).ready(() => {\r\n                    $(\"#listproduct\").DataTable({\r\n                        \"scrollY\": '300px',\r\n                        \"scorllX\": false,\r\n                        \"bJQueryUI\": true,\r\n                        \"sPaginationType\": \"full_numbers\",\r\n                        \"bFilter\": true,\r\n                        \"paging\": true,\r\n                        \"scrollCollapse\": true,\r\n                        \"rowReorder\": true,\r\n                        \"destroy\": true,\r\n                        \"bSort\": true,\r\n                        \"language\": {\r\n                            decimal: \"\",\r\n                            emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                            info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                            // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                            infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                            infoPostFix: \"\",\r\n                            thousands: \",\",\r\n                            lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                            loadingRecords: \"Loading...\",\r\n                            processing: \"\",\r\n                            search: \"ค้นหาข้อมูล:\",\r\n                            zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            paginate: {\r\n                                first: \"หน้าแรก\",\r\n                                last: \"หน้าสุดท้าย\",\r\n                                next: \"ต่อไป\",\r\n                                previous: \"ย้อนกลับ\",\r\n                            },\r\n                            aria: {\r\n                                sortAscending: \": activate to sort column ascending\",\r\n                                sortDescending: \": activate to sort column descending\",\r\n                            },\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}