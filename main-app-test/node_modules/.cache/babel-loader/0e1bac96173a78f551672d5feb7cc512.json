{"ast":null,"code":"import $ from \"jquery\";\nimport axios from \"@/axios\"; // import { ref } from \"vue\"\n\nimport func from \"../func.js\";\nexport default {\n  components: {},\n\n  data() {\n    return {\n      func: func,\n      page: \"1\",\n      cust_name: \"\",\n      cust_addr: \"\",\n      cust_tel: \"\",\n      cust_addr_edit: \"\",\n      cust_tel_edit: \"\",\n      operator: \"\",\n      //--- ตรวจเช็คว่ากดเพิ่มข้อมูลใหม่ หรือแก้ไขข้อมูล 1 = new data / 2 = edit data\n      check_bill_header: [],\n      customer_data: [],\n      rubber_size: [],\n      rubber_brand: [],\n      product_cost: [],\n      import_header: {\n        import_id: \"\",\n        import_book_id: \"\",\n        import_book_no: \"\",\n        import_user: \"\",\n        cust_auto_id: \"\",\n        import_type_id: \"\",\n        import_date: \"\",\n        import_status: \"\"\n      },\n      import_header_edit: {\n        import_id: \"\",\n        import_book_id: \"\",\n        import_book_no: \"\",\n        import_user: \"\",\n        cust_auto_id: \"\",\n        import_type_id: \"\",\n        import_date: \"\",\n        import_status: \"\"\n      },\n      import_detail_list: [],\n      fixcost_detail: \"\",\n      //--- เอาไว้แสดงภาพรวมให้ผู้ใช้ดูข้อมูลราคา\n      import_detail_id: \"\",\n      set_product_price: \"\",\n      //---**เลือกราคาจาก fixcost 1 = เงินสด / 2 = เงินสด+จัดส่ง\n      import_detail: {\n        import_id: \"\",\n        rub_brand_id: \"\",\n        manufac_id: \"\",\n        fixcost_auto_id: \"\",\n        product_price: \"\",\n        import_detail_status: \"\"\n      }\n    };\n  },\n\n  mounted() {\n    let import_book_id = sessionStorage.getItem(\"import_book_id\");\n    let import_book_no = sessionStorage.getItem(\"import_book_no\");\n\n    if (import_book_id != null && import_book_no != null) {\n      this.chkImportHeader(import_book_id, import_book_no);\n    } else {\n      let import_id = sessionStorage.getItem(\"import_id\");\n      this.import_detail.import_id = import_id;\n      this.chkImportHeaderById(import_id);\n      this.getImportDetail(import_id);\n    }\n  },\n\n  beforeUnmount() {\n    sessionStorage.removeItem(\"import_book_id\");\n    sessionStorage.removeItem(\"import_book_no\");\n    sessionStorage.removeItem(\"import_id\");\n  },\n\n  methods: {\n    // showDatePicker_edit() {\n    //     let data = this.import_header_edit;\n    //     // $(document).ready(() => {\n    //     $('#datepicker_edit').datepicker({\n    //         format: \"dd/mm/yyyy\",\n    //         autoclose: true,\n    //         toggleActive: true,\n    //     });\n    //     $('#datepicker_edit').change(() => {\n    //         data.import_date = $('#datepicker_edit').val();\n    //     });\n    //     // });\n    // },\n    convertDateToMySql(isdate) {\n      const convertdate = isdate.split(\"/\");\n      let dateToMySql = convertdate[2] + \"-\" + convertdate[1] + \"-\" + convertdate[0];\n      return dateToMySql;\n    },\n\n    onSelect_Brand() {\n      $(document).ready(() => {\n        let rec = this.import_detail;\n        $('#findBrand').select2({\n          theme: \"bootstrap-5\",\n          closeOnSelect: true,\n          width: '100%',\n          dropdownParent: $(\"#findBrand\").parent(),\n          placeholder: \"--- กรุณาเลือกยี่ห้อยาง ---\"\n        });\n        $('#findBrand').on('select2:select', e => {\n          let data = e.params.data;\n          rec.rub_brand_id = data.id;\n        });\n      });\n    },\n\n    onSelect_Cust() {\n      $(document).ready(() => {\n        let rec = this.import_header_edit;\n        $('#findcust').select2({\n          theme: \"bootstrap-5\",\n          closeOnSelect: true,\n          width: '100%',\n          dropdownParent: $(\"#findcust\").parent(),\n          placeholder: \"--- เลือกลูกค้า ---\"\n        });\n        $('#findcust').on('select2:select', e => {\n          let data = e.params.data;\n          rec.cust_auto_id = data.id;\n          this.getCustomerEdit(rec.cust_auto_id);\n        });\n      });\n    },\n\n    clearSelect2() {\n      $(document).ready(() => {\n        $('#findBrand').val(\"\");\n      });\n    },\n\n    getUseData() {\n      // this.getRubberSize();\n      this.getRubberBrand();\n      this.onSelect_Brand();\n    },\n\n    async chkImportHeader(val1, val2) {\n      await axios.get(`billimport/search/${val1}/${val2}`).then(response => {\n        // this.check_bill_header = response.data;\n        this.import_header.import_id = response.data[0].import_id;\n        this.import_header.import_book_id = response.data[0].import_book_id;\n        this.import_header.import_book_no = response.data[0].import_book_no;\n        this.import_header.import_user = response.data[0].import_user;\n        this.import_header.cust_auto_id = response.data[0].cust_auto_id;\n        this.import_header.import_type_id = response.data[0].import_type_id;\n        this.import_header.import_date = response.data[0].new_import_date;\n        this.import_header.import_status = response.data[0].import_status;\n        this.cust_name = response.data[0].customerName;\n        this.cust_addr = response.data[0].customerAddr;\n        this.cust_tel = response.data[0].customerTel;\n        this.set_product_price = response.data[0].priceType;\n        this.import_detail.import_id = response.data[0].import_id;\n        this.getImportDetail(this.import_header.import_id);\n      });\n    },\n\n    async chkImportHeaderById(val) {\n      await axios.get(`billimport/searchid/${val}`).then(response => {\n        this.import_header.import_id = response.data[0].import_id;\n        this.import_header.import_book_id = response.data[0].import_book_id;\n        this.import_header.import_book_no = response.data[0].import_book_no;\n        this.import_header.import_user = response.data[0].import_user;\n        this.import_header.cust_auto_id = response.data[0].cust_auto_id;\n        this.import_header.import_type_id = response.data[0].import_type_id;\n        this.import_header.import_date = response.data[0].new_import_date;\n        this.import_header.import_status = response.data[0].import_status;\n        this.cust_name = response.data[0].customerName;\n        this.cust_addr = response.data[0].customerAddr;\n        this.cust_tel = response.data[0].customerTel;\n        this.set_product_price = response.data[0].priceType;\n      });\n    },\n\n    async updateImportHeader() {\n      if ((await confirm(\"ยืนยันบันทึกการแก้ไขข้อมูล\")) == true) {\n        this.import_header_edit.import_date = await this.convertDateToMySql(this.import_header_edit.import_date);\n        await axios.post(`billimport/update`, this.import_header_edit).then(() => {\n          this.chkImportHeaderById(sessionStorage.getItem(\"import_id\"));\n        }).catch(error => {\n          console.log(\"เกิดข้อผิดพลาดในการบันทึกข้อมูล \" + error);\n        }); // await this.chkImportHeaderById(sessionStorage.getItem(\"import_id\"));\n        // await this.getImportDetail(sessionStorage.getItem(\"import_id\"));\n\n        await func.hideModal(\"importHeaderEdit\"); // alert(sessionStorage.getItem(\"import_id\"))                \n      }\n    },\n\n    async newImportDetail() {\n      // Load ตารางราคา\n      await this.getProductCost();\n\n      if (this.import_header.import_book_id == null || this.import_header.import_book_no == null || this.import_header.import_date == null) {\n        alert('ข้อมูลหลักไม่ครบถ้วน.,กรุณาตรวจสอบ !!!'); // document.getElementById(\"book_id\").value = 'xxx';\n\n        await document.getElementById(\"book_id\").focus();\n        await document.getElementById(\"book_id\").select(); //document.getElementById(\"book_no\").disabled = true;             \n      } else {\n        await this.onSelect_Brand();\n        await this.getUseData(); // this.showModal('newImportDetail');\n\n        await func.showModal('newImportDetail2');\n      }\n    },\n\n    async saveImportDetail() {\n      if (this.import_detail.manufac_id == \"\" || this.import_detail.rub_brand_id == \"\" || this.import_detail.fixcost_auto_id == \"\") {\n        alert(\"กรุณากรอกข้อมูล หมายเลขยาง/ยี่ห้อยาง/รายการจากตารางราคา ให้ครบถ้วน!!!\");\n        func.setFocus(\"manufac_id\");\n      } else {\n        if (this.operator == \"new\") {\n          if ((await confirm(\"ยืนยันการบันทึกรายการใหม่\")) == true) {\n            await axios.post(`billimport/detail/new`, this.import_detail).then(() => {\n              this.import_detail = {\n                import_id: this.import_header.import_id,\n                rub_brand_id: \"\",\n                manufac_id: \"\",\n                fixcost_auto_id: \"\",\n                product: \"\",\n                import_detail_status: \"\"\n              };\n              this.fixcost_detail = \"\";\n            }).catch(error => {\n              console.log(\"พบข้อผิดผลาดในการแก้ไขข้อมูล \" + error);\n            }); // await func.hideModal(\"newImportDetail\");\n            // alert(this.import_header.import_id);\n            // await $(\"#showimportdetail\").DataTable().destroy();\n\n            this.page = 1; // await this.getImportDetail(this.import_header.import_id);\n          }\n        } else {\n          if (confirm(\"ยืนยันการแก้ไขข้อมูล\") == true) {\n            await axios.post(`billimport/detail/update/${this.import_detail_id}`, this.import_detail).then(() => {\n              this.import_detail = {\n                import_id: this.import_header.import_id,\n                rub_brand_id: \"\",\n                manufac_id: \"\",\n                fixcost_auto_id: \"\",\n                product_price: \"\",\n                import_detail_status: \"\"\n              };\n              this.fixcost_detail = \"\";\n            }).catch(error => {\n              console.log(\"พบข้อผิดผลาดในการแก้ไขข้อมูล \" + error);\n            });\n            this.page = 1; // await this.getImportDetail(this.import_header.import_id);\n          }\n        }\n\n        await this.getImportDetail(this.import_header.import_id);\n      }\n    },\n\n    async checkOperator(op, rec) {\n      if (op == \"new\") {\n        await this.getProductCost(this.import_header.import_type_id);\n        await this.getUseData();\n        this.operator = op;\n        this.page = await 2;\n      } else if (op == \"edit\") {\n        await this.getProductCost(this.import_header.import_type_id);\n        await this.getUseData();\n        this.import_detail.manufac_id = rec.manufac_id;\n        this.import_detail.rub_brand_id = rec.rub_brand_id;\n        this.import_detail.fixcost_auto_id = rec.fixcost_auto_id;\n        this.import_detail.product_price = rec.product_price;\n        this.fixcost_detail = (await rec.pro_type_name) + \" / \" + rec.pro_detail + \" / \" + rec.rub_size_id + \" / \" + rec.rub_style_detail + \" / \" + rec.rub_grade_name + \" / \" + this.func.numFormat(rec.product_price);\n        this.import_detail_id = rec.import_detail_id;\n        this.operator = op;\n        this.page = await 2;\n      }\n\n      return op;\n    },\n\n    async getImportDetail(val) {\n      await axios.get(`billimport/detail/read/${val}`).then(response => {\n        this.import_detail_list = response.data;\n        $(document).ready(() => {\n          $(\"#showimportdetail\").DataTable({\n            // dom: 'Bfrtip',\n            // buttons: [\n            //     'print',                            \n            // ],\n            \"order\": [[0, 'asc']],\n            \"scrollY\": '350px',\n            \"scorllX\": false,\n            \"bJQueryUI\": true,\n            \"sPaginationType\": \"full_numbers\",\n            \"bFilter\": false,\n            \"paging\": false,\n            \"scrollCollapse\": true,\n            \"rowReorder\": true,\n            destroy: true,\n            language: {\n              decimal: \"\",\n              emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n              info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n              // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n              infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\n              infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n              infoPostFix: \"\",\n              thousands: \",\",\n              lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n              loadingRecords: \"Loading...\",\n              processing: \"\",\n              search: \"ค้นหาข้อมูล:\",\n              zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\n              paginate: {\n                first: \"หน้าแรก\",\n                last: \"หน้าสุดท้าย\",\n                next: \"ต่อไป\",\n                previous: \"ย้อนกลับ\"\n              },\n              aria: {\n                sortAscending: \": activate to sort column ascending\",\n                sortDescending: \": activate to sort column descending\"\n              }\n            }\n          });\n        });\n      });\n    },\n\n    setValueImportHeaderEdit() {\n      let h = this.import_header;\n      let he = this.import_header_edit;\n      he.import_id = h.import_id;\n      he.import_book_id = h.import_book_id;\n      he.import_book_no = h.import_book_no;\n      he.import_user = h.import_user;\n      he.cust_auto_id = h.cust_auto_id;\n      he.import_type_id = h.import_type_id;\n      he.import_date = h.import_date;\n      he.import_status = h.import_status;\n      this.cust_addr_edit = this.cust_addr;\n      this.cust_tel_edit = this.cust_tel;\n    },\n\n    async removeImportDetail(rec) {\n      if ((await confirm(\"ยืนยันการลบรายการ ?\")) == true) {\n        await axios.delete(`billimport/detail/delete/${rec}`).then(() => {\n          $(\"#showimportdetail\").DataTable().destroy();\n          this.getImportDetail(this.import_header.import_id);\n        }).catch(error => {\n          alert('ไม่สามารถลบข้อมูลได้ ' + error);\n        });\n      }\n    },\n\n    async getCustomer(val) {\n      await axios.get(`customer/findbyautoid/${val}`).then(response => {\n        // this.customer_data = response.data;\n        this.import_header = {\n          cust_auto_id: response.data[0].cust_auto_id\n        }; // **ในกรณีลูกค้าเป็น SPR จะเลือกใช้ประเภทงานเป็น \"ยางพร้อมโครง[import_type_id = 2]\"\n\n        if (response.data[0].cust_auto_id == 1) {\n          this.import_header.import_type_id = 2;\n        } else this.import_header.import_type_id = 1;\n\n        this.cust_name = response.data[0].customerName;\n        this.cust_addr = response.data[0].customerAddr;\n        this.cust_tel = response.data[0].customerTel;\n      });\n    },\n\n    async getCustomerEdit(val) {\n      await axios.get(`customer/findbyautoid/${val}`).then(response => {\n        // ตรวจสอบประเภทงาน ระหว่าง ค่าจ้าง / ยางพร้อมโครง\n        if (response.data[0].cust_auto_id == 1) {\n          this.import_header_edit.import_type_id = 2;\n        } else this.import_header_edit.import_type_id = 1; // -------------------------------------------------\n\n\n        this.cust_addr_edit = response.data[0].customerAddr;\n        this.cust_tel_edit = response.data[0].customerTel;\n      });\n    },\n\n    async getCustomerAll() {\n      await axios.get(`customer/read`).then(response => {\n        this.customer_data = response.data;\n      });\n    },\n\n    getRubberSize() {\n      axios.get(`rubbersize/read`).then(response => {\n        this.rubber_size = response.data;\n      });\n    },\n\n    getRubberBrand() {\n      axios.get(`rubberbrand/read`).then(response => {\n        this.rubber_brand = response.data;\n      });\n    },\n\n    async getFixcost(rec) {\n      this.import_detail.fixcost_auto_id = await rec.fixcost_auto_id; // --- ตรวจเช็คประเภทราคา ---\n\n      if ((await this.set_product_price) == 1) {\n        this.import_detail.product_price = rec.price1;\n      } else if ((await this.set_product_price) == 2) {\n        this.import_detail.product_price = rec.price2;\n      } // ------------------------\n\n\n      this.fixcost_detail = (await rec.pro_type_name) + \" / \" + rec.pro_detail + \" / \" + rec.rub_size_id + \" / \" + rec.rub_style_detail + \" / \" + rec.rub_grade_name + \" / \" + this.func.numFormat(this.import_detail.product_price);\n    },\n\n    getProductCost(val) {\n      axios.get(`productcost/readprotype/${val}`).then(response => {\n        this.product_cost = response.data;\n        $(document).ready(() => {\n          $(\"#showproductcost\").DataTable({\n            \"order\": [[0, 'asc']],\n            \"scrollY\": '250px',\n            \"scorllX\": false,\n            \"bJQueryUI\": true,\n            \"sPaginationType\": \"full_numbers\",\n            \"bFilter\": true,\n            \"paging\": false,\n            \"scrollCollapse\": true,\n            \"rowReorder\": true,\n            destroy: true,\n            language: {\n              decimal: \"\",\n              emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\n              info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\n              // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\n              infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\n              infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\n              infoPostFix: \"\",\n              thousands: \",\",\n              lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\n              loadingRecords: \"Loading...\",\n              processing: \"\",\n              search: \"ค้นหาข้อมูล:\",\n              zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\n              paginate: {\n                first: \"หน้าแรก\",\n                last: \"หน้าสุดท้าย\",\n                next: \"ต่อไป\",\n                previous: \"ย้อนกลับ\"\n              },\n              aria: {\n                sortAscending: \": activate to sort column ascending\",\n                sortDescending: \": activate to sort column descending\"\n              }\n            }\n          });\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["$","axios","func","components","data","page","cust_name","cust_addr","cust_tel","cust_addr_edit","cust_tel_edit","operator","check_bill_header","customer_data","rubber_size","rubber_brand","product_cost","import_header","import_id","import_book_id","import_book_no","import_user","cust_auto_id","import_type_id","import_date","import_status","import_header_edit","import_detail_list","fixcost_detail","import_detail_id","set_product_price","import_detail","rub_brand_id","manufac_id","fixcost_auto_id","product_price","import_detail_status","mounted","sessionStorage","getItem","chkImportHeader","chkImportHeaderById","getImportDetail","beforeUnmount","removeItem","methods","convertDateToMySql","isdate","convertdate","split","dateToMySql","onSelect_Brand","document","ready","rec","select2","theme","closeOnSelect","width","dropdownParent","parent","placeholder","on","e","params","id","onSelect_Cust","getCustomerEdit","clearSelect2","val","getUseData","getRubberBrand","val1","val2","get","then","response","new_import_date","customerName","customerAddr","customerTel","priceType","updateImportHeader","confirm","post","catch","error","console","log","hideModal","newImportDetail","getProductCost","alert","getElementById","focus","select","showModal","saveImportDetail","setFocus","product","checkOperator","op","pro_type_name","pro_detail","rub_size_id","rub_style_detail","rub_grade_name","numFormat","DataTable","destroy","language","decimal","emptyTable","info","infoEmpty","infoFiltered","infoPostFix","thousands","lengthMenu","loadingRecords","processing","search","zeroRecords","paginate","first","last","next","previous","aria","sortAscending","sortDescending","setValueImportHeaderEdit","h","he","removeImportDetail","delete","getCustomer","getCustomerAll","getRubberSize","getFixcost","price1","price2"],"sourceRoot":"","sources":["D:\\Project-vue\\SPR-PROJECT\\main-app-test\\src\\components\\importWork.vue"],"sourcesContent":["// ทำใบรับยางสำหรับการจ้างอัด\r\n<template>\r\n    <!-- แก้ไขหัวบิลใบรับ -->\r\n    <div class=\"modal fade rounded-3\" id=\"importHeaderEdit\" tabindex=\"-1\" aria-hidden=\"true\"\r\n        aria-labelledby=\"exampleModalLabel\">\r\n        <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header bg-danger text-center\" style=\"color:white;\">\r\n                    ::: แก้ไขหัวบิลใบรับ :::\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <!-- <form> -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col\" style=\"text-align: left\">\r\n                            <label>ประเภทใบรับ</label>\r\n                            <select class=\"form-select\" style=\"background-color:#e2e2e2\"\r\n                                v-model=\"this.import_header_edit.import_type_id\" disabled>\r\n                                <option value=\"1\">ค่าจ้าง</option>\r\n                                <option value=\"2\">ยางพร้อมโครง</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"col\" style=\"text-align: left\">\r\n                            <label>วันที่เปิดใบรับ(DD/MM/YYYY)</label>\r\n                            <!-- <input type=\"date\" id=\"datepicker\" class=\"form-control\"\r\n                                             v-model=\"this.import_header.import_date\"  min=\"2020-01-01\" max=\"2050-12-31\" /> -->\r\n                            <input type=\"text\" id=\"datepicker_edit\" class=\"form-control\"\r\n                                v-model=\"this.import_header_edit.import_date\" readonly\r\n                                @click.prevent=\"func.this.showDatePicker(this)\" />\r\n                            <!-- <Datepicker v-model=\"this.import_header.import_date\" :format=\"format\"\r\n                                             autoApply /> -->\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mt-1\">\r\n                        <div class=\"col\" style=\"text-align: left\">\r\n                            <label>ชื่อลูกค้า</label>\r\n                            <select class=\"form-select\" v-model=\"this.import_header_edit.cust_auto_id\" id=\"findcust\">\r\n                                <option v-for=\"rec in customer_data\" :key=\"rec.cust_auto_id\" :value=\"rec.cust_auto_id\">\r\n                                    {{ rec.customerName }}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mt-1\">\r\n                        <div class=\"col-8\" style=\"text-align: left\">\r\n                            <label>ที่อยู่ลูกค้า</label>\r\n                            <input type=\"text\" class=\"form-control\" v-model=\"this.cust_addr_edit\" disabled />\r\n                        </div>\r\n                        <div class=\"col-4\" style=\"text-align: left\">\r\n                            <label>เบอร์โทร</label>\r\n                            <input type=\"text\" class=\"form-control\" v-model=\"this.cust_tel_edit\" disabled />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row-12 mt-2\" style=\"text-align: center\">\r\n                        <button type=\"button\" class=\"btn btn-danger rounded-2 me-2\"\r\n                            @click.prevent=\"this.func.hideModal('importHeaderEdit')\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-ban\" />&nbsp;ปิดหน้าต่าง\r\n                        </button>\r\n                        <button type=\"button\" class=\"btn btn-primary rounded-2 me-2\"\r\n                            @click.prevent=\"updateImportHeader();\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-check-to-slot\" />&nbsp;บันทึกการแก้ไข\r\n                        </button>\r\n                    </div>\r\n                    <!-- {{ this.import_header_edit }} -->\r\n                    <!-- </form> -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--  -->\r\n\r\n    <!-- เพิ่มรายละเอียดใบรับจากตารางราคา -->\r\n    <div class=\"container-fluid\" v-if=\"this.page == 2\">\r\n        <div class=\"card rounded-3 shadow\" style=\"width: 100%\">\r\n            <div class=\"card-header bg-primary shadow\" style=\"color: white; text-align:center;\"\r\n                v-if=\"this.operator == 'new'\">\r\n                ::: เพิ่มรายการใบรับ :::\r\n            </div>\r\n            <div class=\"card-header bg-danger shadow\" style=\"color: white; text-align:center;\" v-else>\r\n                ::: แก้ไขรายการใบรับ :::\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <div class=\"row mt-1\">\r\n                    <div class=\"col-2 ms-2\">\r\n                        <div style=\"text-align:left;\">\r\n                            <label style=\"color:blue\">หมายเลขยาง(จากโครง)</label>\r\n                            <input type=\"text\" class=\"form-control shadow\" id=\"manufac_id\"\r\n                                v-model.trim=\"this.import_detail.manufac_id\" placeholder=\"กรุณาใส่หมายเลขยาง\"\r\n                                @keypress=\"this.func.fixCharecter($event)\"\r\n                                @input=\"(this.import_detail.manufac_id = this.import_detail.manufac_id.toUpperCase())\" />\r\n                            <!-- @input=\"(this.import_detail.manufac_id = this.import_detail.manufac_id.toUpperCase())\" -->\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-3\" style=\"text-align:left;\">\r\n                        <label style=\"color:blue\">ยี่ห้อยาง</label>\r\n                        <select class=\"form-select shadow\" id=\"findBrand\" v-model=\"this.import_detail.rub_brand_id\">\r\n                            <option v-for=\"rubberBrand in rubber_brand\" :key=\"rubberBrand.rub_brand_id\"\r\n                                :value=\"rubberBrand.rub_brand_id\">\r\n                                {{ rubberBrand.rub_brand_shotname }} > {{ rubberBrand.rub_brand_name }}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                    <div class=\"col me-2\" style=\"text-align:left;\">\r\n                        <label style=\"color:blue\">รายละเอียดสินค้า</label>\r\n                        <input type=\"text\" class=\"form-control shadow\" v-model=\"this.fixcost_detail\"\r\n                            placeholder=\"เลือกจากรายการด้านล่าง\" readonly />\r\n                    </div>\r\n                </div>\r\n                {{ this.import_detail }}\r\n            </div>\r\n        </div>\r\n        <div class=\"card rounded-3 shadow-lg mt-1\" style=\"width: 100%\">\r\n            <div class=\"card-header bg-primary opacity-75 shadow\" style=\"color: white; text-align:center;\"\r\n                v-if=\"this.operator == 'new'\">\r\n                ::: เลือกรายการใบรับจากตารางราคา :::\r\n            </div>\r\n            <div class=\"card-header bg-danger opacity-75 shadow\" style=\"color: white; text-align:center;\" v-else>\r\n                ::: เลือกรายการใบรับจากตารางราคา(เพื่อแก้ไข) :::\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <table id=\"showproductcost\" class=\"table table-striped table-hover table-sm\" style=\"width: 100%;\">\r\n                    <thead>\r\n                        <tr style=\"color:darkblue\">\r\n                            <th>ลำดับ</th>\r\n                            <th>ประเภทการผลิต</th>\r\n                            <th>รูปแบบการผลิต</th>\r\n                            <th>ขนาด</th>\r\n                            <th>ลายดอก</th>\r\n                            <th>เกรดยาง</th>\r\n                            <th>เงินสด</th>\r\n                            <th>เงินสด+ส่ง</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody class=\"table-group-divider\">\r\n                        <tr v-for=\"rec in product_cost\" :key=\"rec.fixcost_auto_id\"\r\n                            @click.prevent=\"this.getFixcost(rec);\">\r\n                            <td>{{ product_cost.indexOf(rec) + 1 }}</td>\r\n                            <td>{{ rec.pro_type_name }}</td>\r\n                            <td>{{ rec.pro_detail }}</td>\r\n                            <td>{{ rec.rub_size_id }}</td>\r\n                            <td>{{ rec.rub_style_detail }}</td>\r\n                            <td>{{ rec.rub_grade_name }}</td>\r\n                            <td>{{ this.func.numFormat(rec.price1) }}</td>\r\n                            <td>{{ this.func.numFormat(rec.price2) }}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div class=\"card-footer\" style=\"text-align:right\">\r\n                <!-- ปุ่มปิด -->\r\n                <button type=\"button\" class=\"btn btn-secondary ms-2 me-1\" @click.prevent=\"clearSelect2();\r\n                this.import_detail.rub_brand_id = ''; this.import_detail.manufac_id = '';\r\n                this.fixcost_detail = ''; this.getImportDetail(this.import_header.import_id); this.page = 1\">\r\n                    <font-awesome-icon icon=\"fa-solid fa-ban\" />&nbsp;ปิดหน้าต่าง\r\n                </button>\r\n                <!-- ปุ่มบันทึก -->\r\n                <button id=\"btn\" class=\"btn btn-primary ms-1\" @click.prevent=\"saveImportDetail();\">\r\n                    <font-awesome-icon icon=\"fa-solid fa-circle-check\" />&nbsp;บันทึก\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- end เพิ่มรายละเอียดใบรับจากตารางราคา -->\r\n    <!-- แสดง Header + รายละเอียดใบรับ -->\r\n    <div class=\"container-fluid\" v-if=\"this.page == 1\">\r\n        <div class=\"card rounded-3 shadow\" style=\"width:100%;\">\r\n            <div class=\"card-header bg-primary\" style=\"color:white; text-align:center;\">\r\n                ใบรับ (\r\n                <select class=\"rounded-2 bg-primary border-0\" style=\"color:yellow ;\"\r\n                    v-model=\"this.import_header.import_type_id\" disabled>\r\n                    <option value=\"1\">ค่าจ้าง</option>\r\n                    <option value=\"2\">ยางพร้อมโครง</option>\r\n                </select> )\r\n            </div>\r\n            <div class=\"card-body\" style=\"font-weight:bold\">\r\n                <div class=\"row\">\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>เล่มที่</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" id=\"book_id\"\r\n                            v-model.trim=\"this.import_header.import_book_id\" disabled />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>เลขที่</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" id=\"book_no\"\r\n                            v-model.trim=\"this.import_header.import_book_no\" disabled />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>วันที่เปิดใบรับ(DD/MM/YYYY)</label>\r\n                        <input type=\"text\" class=\"date form-control import-header\"\r\n                            v-model=\"this.import_header.import_date\" disabled />\r\n                    </div>\r\n                </div>\r\n                <div class=\"row mt-1\">\r\n                    <div class=\"col\" style=\"text-align:left;\">\r\n                        <label>ชื่อลูกค้า</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" v-model=\"this.cust_name\" disabled />\r\n                    </div>\r\n                </div>\r\n                <div class=\"row mt-1\">\r\n                    <div class=\"col-8\" style=\"text-align:left;\">\r\n                        <label>ที่อยู่ลูกค้า</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" v-model=\"this.cust_addr\" disabled />\r\n                    </div>\r\n                    <div class=\"col-4\" style=\"text-align:left;\">\r\n                        <label>เบอร์โทร</label>\r\n                        <input type=\"text\" class=\"form-control import-header\" v-model=\"this.cust_tel\" disabled />\r\n                    </div>\r\n                </div>\r\n                <div class=\"card-footer border-0\" style=\"text-align:center\">\r\n                    <div class=\"row-12 mt-2 align-content-center\">\r\n                        <button class=\"btn btn-success rounded-2 me-2 btn-sm shadow\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-check-to-slot\" />&nbsp;ยืนยันใบรับ\r\n                        </button>\r\n                        <button class=\"btn btn-warning rounded-2 me-2 btn-sm shadow\" style=\"color:white;\"\r\n                            @click.prevent=\"getCustomerAll(); onSelect_Cust();\r\n                            setValueImportHeaderEdit(); this.func.showModal('importHeaderEdit');\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-pen\" />&nbsp;แก้ไขใบรับ\r\n                        </button>\r\n                        <button class=\"btn btn-danger rounded-2 me-2 btn-sm shadow\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-file-circle-xmark\" />&nbsp;ยกเลิกใบรับ\r\n                        </button>\r\n                        <button class=\"btn btn-primary rounded-2 me-2 btn-sm shadow\"\r\n                            @click.prevent=\"this.checkOperator('new', rec)\">\r\n                            <!-- newImportDetail() ตอนนี้ไม่ได้ใช้ -->\r\n                            <font-awesome-icon icon=\"fa-solid fa-cart-plus\" />&nbsp;เพิ่มรายการรับ\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- <div class=\"card-footer align-content-center\" id=\"control-detail\"> -->\r\n\r\n            <!-- </div> -->\r\n        </div>\r\n        <div class=\"card rounded-3 shadow mt-2\" style=\"width: 100%\">\r\n            <div class=\"card-header bg-opacity-75 bg-primary\" style=\"color:white;text-align:center\">\r\n                ::: รายการใบรับยาง :::\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <table id=\"showimportdetail\" class=\"table table-striped table-hover table-sm nowrap\"\r\n                    style=\"width: 100%; align-items: center\">\r\n                    <thead>\r\n                        <tr style=\"text-align:left; color:darkblue\">\r\n                            <th>ลำดับ</th>\r\n                            <th>รหัสยาง</th>\r\n                            <th>ประเภท/รูปแบบการผลิต</th>\r\n                            <th>ขนาดยาง</th>\r\n                            <th>ลายดอก</th>\r\n                            <th>เกรดยาง</th>\r\n                            <th>ยี่ห้อยาง</th>\r\n                            <th>ราคาขาย</th>\r\n                            <th></th>\r\n                            <th></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody class=\"table-group-divider\">\r\n                        <tr v-for=\"rec in import_detail_list\" :key=\"rec.import_detail_id\" style=\"text-align:left\">\r\n                            <td>{{ import_detail_list.indexOf(rec) + 1 }}</td>\r\n                            <td>{{ rec.manufac_id }}</td>\r\n                            <td>{{ rec.pro_type_name }}/{{ rec.pro_detail }}</td>\r\n                            <td>{{ rec.rub_size_id }}</td>\r\n                            <td>{{ rec.rub_style_detail }}</td>\r\n                            <td>{{ rec.rub_grade_name }}</td>\r\n                            <td>{{ rec.rub_brand_shotname }}</td>\r\n                            <td>\r\n                                <font style=\"color:mediumblue\">{{ func.numFormat(rec.product_price) }}</font>\r\n                            </td>\r\n                            <td style=\"text-align:right\">\r\n                                <button id=\"edit\" class=\"btn btn-primary btn-sm\" title=\"แก้ไขรายการ\"\r\n                                    @click.prevent=\"this.checkOperator('edit', rec)\">\r\n                                    <font-awesome-icon icon=\"fa-solid fa-pen\" style=\"color:white\" />\r\n                                </button>\r\n                            </td>\r\n                            <td style=\"text-align:left\">\r\n                                <button id=\"delete\" class=\"btn btn-danger btn-sm\" title=\"ลบรายการ\"\r\n                                    @click.prevent=\"removeImportDetail(rec.import_detail_id)\">\r\n                                    <font-awesome-icon icon=\"fa-solid fa-trash-can\" style=\"color:white\" />\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- {{ this.import_header }} -->\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\"\r\nimport axios from \"@/axios\"\r\n// import { ref } from \"vue\"\r\nimport func from \"../func.js\"\r\n\r\nexport default {\r\n    components: {\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            func: func,\r\n            page: \"1\",\r\n            cust_name: \"\",\r\n            cust_addr: \"\",\r\n            cust_tel: \"\",\r\n            cust_addr_edit: \"\",\r\n            cust_tel_edit: \"\",\r\n            operator: \"\", //--- ตรวจเช็คว่ากดเพิ่มข้อมูลใหม่ หรือแก้ไขข้อมูล 1 = new data / 2 = edit data\r\n            check_bill_header: [],\r\n            customer_data: [],\r\n            rubber_size: [],\r\n            rubber_brand: [],\r\n            product_cost: [],\r\n            import_header: {\r\n                import_id: \"\",\r\n                import_book_id: \"\",\r\n                import_book_no: \"\",\r\n                import_user: \"\",\r\n                cust_auto_id: \"\",\r\n                import_type_id: \"\",\r\n                import_date: \"\",\r\n                import_status: \"\",\r\n            },\r\n            import_header_edit: {\r\n                import_id: \"\",\r\n                import_book_id: \"\",\r\n                import_book_no: \"\",\r\n                import_user: \"\",\r\n                cust_auto_id: \"\",\r\n                import_type_id: \"\",\r\n                import_date: \"\",\r\n                import_status: \"\",\r\n            },\r\n            import_detail_list: [],\r\n            fixcost_detail: \"\", //--- เอาไว้แสดงภาพรวมให้ผู้ใช้ดูข้อมูลราคา\r\n            import_detail_id: \"\",\r\n            set_product_price: \"\", //---**เลือกราคาจาก fixcost 1 = เงินสด / 2 = เงินสด+จัดส่ง\r\n            import_detail: {\r\n                import_id: \"\",\r\n                rub_brand_id: \"\",\r\n                manufac_id: \"\",\r\n                fixcost_auto_id: \"\",\r\n                product_price: \"\",\r\n                import_detail_status: \"\",\r\n            },\r\n        }\r\n    },\r\n    mounted() {\r\n        let import_book_id = sessionStorage.getItem(\"import_book_id\");\r\n        let import_book_no = sessionStorage.getItem(\"import_book_no\");\r\n        if (import_book_id != null && import_book_no != null) {\r\n            this.chkImportHeader(import_book_id, import_book_no);\r\n        } else {\r\n            let import_id = sessionStorage.getItem(\"import_id\");\r\n            this.import_detail.import_id = import_id;\r\n            this.chkImportHeaderById(import_id);\r\n            this.getImportDetail(import_id);\r\n        }\r\n    },\r\n    beforeUnmount() {\r\n        sessionStorage.removeItem(\"import_book_id\");\r\n        sessionStorage.removeItem(\"import_book_no\");\r\n        sessionStorage.removeItem(\"import_id\");\r\n    },\r\n    methods: {\r\n        // showDatePicker_edit() {\r\n        //     let data = this.import_header_edit;\r\n        //     // $(document).ready(() => {\r\n        //     $('#datepicker_edit').datepicker({\r\n        //         format: \"dd/mm/yyyy\",\r\n        //         autoclose: true,\r\n        //         toggleActive: true,\r\n        //     });\r\n        //     $('#datepicker_edit').change(() => {\r\n        //         data.import_date = $('#datepicker_edit').val();\r\n        //     });\r\n        //     // });\r\n        // },\r\n        convertDateToMySql(isdate) {\r\n            const convertdate = isdate.split(\"/\");\r\n            let dateToMySql = convertdate[2] + \"-\" + convertdate[1] + \"-\" + convertdate[0];\r\n            return dateToMySql;\r\n        },\r\n        onSelect_Brand() {\r\n            $(document).ready(() => {\r\n                let rec = this.import_detail;\r\n                $('#findBrand').select2({\r\n                    theme: \"bootstrap-5\",\r\n                    closeOnSelect: true,\r\n                    width: '100%',\r\n                    dropdownParent: $(\"#findBrand\").parent(),\r\n                    placeholder: \"--- กรุณาเลือกยี่ห้อยาง ---\",\r\n                });\r\n                $('#findBrand').on('select2:select', (e) => {\r\n                    let data = e.params.data;\r\n                    rec.rub_brand_id = data.id;\r\n                })\r\n            });\r\n        },\r\n        onSelect_Cust() {\r\n            $(document).ready(() => {\r\n                let rec = this.import_header_edit;\r\n                $('#findcust').select2({\r\n                    theme: \"bootstrap-5\",\r\n                    closeOnSelect: true,\r\n                    width: '100%',\r\n                    dropdownParent: $(\"#findcust\").parent(),\r\n                    placeholder: \"--- เลือกลูกค้า ---\",\r\n                });\r\n                $('#findcust').on('select2:select', (e) => {\r\n                    let data = e.params.data;\r\n                    rec.cust_auto_id = data.id;\r\n                    this.getCustomerEdit(rec.cust_auto_id);\r\n                })\r\n            });\r\n        },\r\n        clearSelect2() {\r\n            $(document).ready(() => {\r\n                $('#findBrand').val(\"\");\r\n            })\r\n        },\r\n        getUseData() {\r\n            // this.getRubberSize();\r\n            this.getRubberBrand();\r\n            this.onSelect_Brand();\r\n        },\r\n        async chkImportHeader(val1, val2) {\r\n            await axios.get(`billimport/search/${val1}/${val2}`).then((response) => {\r\n                // this.check_bill_header = response.data;\r\n                this.import_header.import_id = response.data[0].import_id;\r\n                this.import_header.import_book_id = response.data[0].import_book_id;\r\n                this.import_header.import_book_no = response.data[0].import_book_no;\r\n                this.import_header.import_user = response.data[0].import_user;\r\n                this.import_header.cust_auto_id = response.data[0].cust_auto_id;\r\n                this.import_header.import_type_id = response.data[0].import_type_id;\r\n                this.import_header.import_date = response.data[0].new_import_date;\r\n                this.import_header.import_status = response.data[0].import_status;\r\n                this.cust_name = response.data[0].customerName;\r\n                this.cust_addr = response.data[0].customerAddr;\r\n                this.cust_tel = response.data[0].customerTel;\r\n                this.set_product_price = response.data[0].priceType;\r\n                this.import_detail.import_id = response.data[0].import_id;\r\n                this.getImportDetail(this.import_header.import_id);\r\n            });\r\n        },\r\n        async chkImportHeaderById(val) {\r\n            await axios.get(`billimport/searchid/${val}`).then((response) => {\r\n                this.import_header.import_id = response.data[0].import_id;\r\n                this.import_header.import_book_id = response.data[0].import_book_id;\r\n                this.import_header.import_book_no = response.data[0].import_book_no;\r\n                this.import_header.import_user = response.data[0].import_user;\r\n                this.import_header.cust_auto_id = response.data[0].cust_auto_id;\r\n                this.import_header.import_type_id = response.data[0].import_type_id;\r\n                this.import_header.import_date = response.data[0].new_import_date;\r\n                this.import_header.import_status = response.data[0].import_status;\r\n                this.cust_name = response.data[0].customerName;\r\n                this.cust_addr = response.data[0].customerAddr;\r\n                this.cust_tel = response.data[0].customerTel;\r\n                this.set_product_price = response.data[0].priceType;\r\n            });\r\n        },\r\n        async updateImportHeader() {\r\n            if (await confirm(\"ยืนยันบันทึกการแก้ไขข้อมูล\") == true) {\r\n                this.import_header_edit.import_date = await this.convertDateToMySql(this.import_header_edit.import_date);\r\n                await axios.post(`billimport/update`, this.import_header_edit).then(() => {\r\n                    this.chkImportHeaderById(sessionStorage.getItem(\"import_id\"));\r\n                }).catch((error) => {\r\n                    console.log(\"เกิดข้อผิดพลาดในการบันทึกข้อมูล \" + error)\r\n                });\r\n                // await this.chkImportHeaderById(sessionStorage.getItem(\"import_id\"));\r\n                // await this.getImportDetail(sessionStorage.getItem(\"import_id\"));\r\n                await func.hideModal(\"importHeaderEdit\");\r\n                // alert(sessionStorage.getItem(\"import_id\"))                \r\n            }\r\n        },\r\n        async newImportDetail() {\r\n            // Load ตารางราคา\r\n            await this.getProductCost();\r\n            if ((this.import_header.import_book_id == null) ||\r\n                (this.import_header.import_book_no == null) ||\r\n                (this.import_header.import_date == null)) {\r\n                alert('ข้อมูลหลักไม่ครบถ้วน.,กรุณาตรวจสอบ !!!')\r\n                // document.getElementById(\"book_id\").value = 'xxx';\r\n                await document.getElementById(\"book_id\").focus();\r\n                await document.getElementById(\"book_id\").select();\r\n                //document.getElementById(\"book_no\").disabled = true;             \r\n            } else {\r\n                await this.onSelect_Brand();\r\n                await this.getUseData();\r\n                // this.showModal('newImportDetail');\r\n                await func.showModal('newImportDetail2');\r\n            }\r\n        },\r\n        async saveImportDetail() {\r\n            if (this.import_detail.manufac_id == \"\" ||\r\n                this.import_detail.rub_brand_id == \"\" ||\r\n                this.import_detail.fixcost_auto_id == \"\") {\r\n                alert(\"กรุณากรอกข้อมูล หมายเลขยาง/ยี่ห้อยาง/รายการจากตารางราคา ให้ครบถ้วน!!!\")\r\n                func.setFocus(\"manufac_id\");\r\n            }\r\n            else {\r\n                if (this.operator == \"new\") {\r\n                    if (await confirm(\"ยืนยันการบันทึกรายการใหม่\") == true) {\r\n                        await axios.post(`billimport/detail/new`, this.import_detail).then(() => {\r\n                            this.import_detail = {\r\n                                import_id: this.import_header.import_id,\r\n                                rub_brand_id: \"\",\r\n                                manufac_id: \"\",\r\n                                fixcost_auto_id: \"\",\r\n                                product: \"\",\r\n                                import_detail_status: \"\"\r\n                            };\r\n                            this.fixcost_detail = \"\";\r\n                        }).catch((error) => {\r\n                            console.log(\"พบข้อผิดผลาดในการแก้ไขข้อมูล \" + error);\r\n                        });\r\n                        // await func.hideModal(\"newImportDetail\");\r\n                        // alert(this.import_header.import_id);\r\n                        // await $(\"#showimportdetail\").DataTable().destroy();\r\n                        this.page = 1;\r\n                        // await this.getImportDetail(this.import_header.import_id);\r\n                    }\r\n                }\r\n                else {\r\n                    if (confirm(\"ยืนยันการแก้ไขข้อมูล\") == true) {\r\n                        await axios.post(`billimport/detail/update/${this.import_detail_id}`, this.import_detail).then(() => {\r\n                            this.import_detail = {\r\n                                import_id: this.import_header.import_id,\r\n                                rub_brand_id: \"\",\r\n                                manufac_id: \"\",\r\n                                fixcost_auto_id: \"\",\r\n                                product_price: \"\",\r\n                                import_detail_status: \"\"\r\n                            };\r\n                            this.fixcost_detail = \"\";\r\n                        }).catch((error) => {\r\n                            console.log(\"พบข้อผิดผลาดในการแก้ไขข้อมูล \" + error);\r\n                        });\r\n                        this.page = 1;\r\n                        // await this.getImportDetail(this.import_header.import_id);\r\n                    }\r\n                }\r\n                await this.getImportDetail(this.import_header.import_id);\r\n            }\r\n        },\r\n        async checkOperator(op, rec) {\r\n            if (op == \"new\") {\r\n                await this.getProductCost(this.import_header.import_type_id);\r\n                await this.getUseData();\r\n                this.operator = op;\r\n                this.page = await 2;\r\n            }\r\n            else if (op == \"edit\") {\r\n                await this.getProductCost(this.import_header.import_type_id);\r\n                await this.getUseData();\r\n                this.import_detail.manufac_id = rec.manufac_id;\r\n                this.import_detail.rub_brand_id = rec.rub_brand_id;\r\n                this.import_detail.fixcost_auto_id = rec.fixcost_auto_id;\r\n                this.import_detail.product_price = rec.product_price;\r\n                this.fixcost_detail = await rec.pro_type_name + \" / \" + rec.pro_detail + \" / \" +\r\n                    rec.rub_size_id + \" / \" + rec.rub_style_detail + \" / \" + rec.rub_grade_name + \" / \" +\r\n                    this.func.numFormat(rec.product_price)\r\n                this.import_detail_id = rec.import_detail_id;\r\n                this.operator = op;\r\n                this.page = await 2;\r\n            }\r\n            return op;\r\n        },\r\n        async getImportDetail(val) {\r\n            await axios.get(`billimport/detail/read/${val}`).then((response) => {\r\n                this.import_detail_list = response.data;\r\n                $(document).ready(() => {\r\n                    $(\"#showimportdetail\").DataTable({\r\n                        // dom: 'Bfrtip',\r\n                        // buttons: [\r\n                        //     'print',                            \r\n                        // ],\r\n                        \"order\": [[0, 'asc']],\r\n                        \"scrollY\": '350px',\r\n                        \"scorllX\": false,\r\n                        \"bJQueryUI\": true,\r\n                        \"sPaginationType\": \"full_numbers\",\r\n                        \"bFilter\": false,\r\n                        \"paging\": false,\r\n                        \"scrollCollapse\": true,\r\n                        \"rowReorder\": true,\r\n                        destroy: true,\r\n                        language: {\r\n                            decimal: \"\",\r\n                            emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                            info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                            // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                            infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                            infoPostFix: \"\",\r\n                            thousands: \",\",\r\n                            lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                            loadingRecords: \"Loading...\",\r\n                            processing: \"\",\r\n                            search: \"ค้นหาข้อมูล:\",\r\n                            zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            paginate: {\r\n                                first: \"หน้าแรก\",\r\n                                last: \"หน้าสุดท้าย\",\r\n                                next: \"ต่อไป\",\r\n                                previous: \"ย้อนกลับ\",\r\n                            },\r\n                            aria: {\r\n                                sortAscending: \": activate to sort column ascending\",\r\n                                sortDescending: \": activate to sort column descending\",\r\n                            },\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        setValueImportHeaderEdit() {\r\n            let h = this.import_header;\r\n            let he = this.import_header_edit;\r\n            he.import_id = h.import_id;\r\n            he.import_book_id = h.import_book_id;\r\n            he.import_book_no = h.import_book_no;\r\n            he.import_user = h.import_user;\r\n            he.cust_auto_id = h.cust_auto_id;\r\n            he.import_type_id = h.import_type_id;\r\n            he.import_date = h.import_date;\r\n            he.import_status = h.import_status;\r\n\r\n            this.cust_addr_edit = this.cust_addr;\r\n            this.cust_tel_edit = this.cust_tel;\r\n        },\r\n        async removeImportDetail(rec) {\r\n            if (await confirm(\"ยืนยันการลบรายการ ?\") == true) {\r\n                await axios.delete(`billimport/detail/delete/${rec}`).then(() => {\r\n                    $(\"#showimportdetail\").DataTable().destroy();\r\n                    this.getImportDetail(this.import_header.import_id);\r\n                }).catch((error) => {\r\n                    alert('ไม่สามารถลบข้อมูลได้ ' + error);\r\n                });\r\n            }\r\n        },\r\n        async getCustomer(val) {\r\n            await axios.get(`customer/findbyautoid/${val}`).then((response) => {\r\n                // this.customer_data = response.data;\r\n                this.import_header = {\r\n                    cust_auto_id: response.data[0].cust_auto_id\r\n                }\r\n                // **ในกรณีลูกค้าเป็น SPR จะเลือกใช้ประเภทงานเป็น \"ยางพร้อมโครง[import_type_id = 2]\"\r\n                if (response.data[0].cust_auto_id == 1) { this.import_header.import_type_id = 2 }\r\n                else this.import_header.import_type_id = 1\r\n\r\n                this.cust_name = response.data[0].customerName\r\n                this.cust_addr = response.data[0].customerAddr\r\n                this.cust_tel = response.data[0].customerTel\r\n            });\r\n        },\r\n        async getCustomerEdit(val) {\r\n            await axios.get(`customer/findbyautoid/${val}`).then((response) => {\r\n                // ตรวจสอบประเภทงาน ระหว่าง ค่าจ้าง / ยางพร้อมโครง\r\n                if (response.data[0].cust_auto_id == 1) { this.import_header_edit.import_type_id = 2 }\r\n                else this.import_header_edit.import_type_id = 1\r\n                // -------------------------------------------------\r\n                this.cust_addr_edit = response.data[0].customerAddr\r\n                this.cust_tel_edit = response.data[0].customerTel\r\n            });\r\n        },\r\n        async getCustomerAll() {\r\n            await axios.get(`customer/read`).then((response) => {\r\n                this.customer_data = response.data;\r\n            });\r\n        },\r\n        getRubberSize() {\r\n            axios.get(`rubbersize/read`).then((response) => {\r\n                this.rubber_size = response.data;\r\n            });\r\n        },\r\n        getRubberBrand() {\r\n            axios.get(`rubberbrand/read`).then((response) => {\r\n                this.rubber_brand = response.data;\r\n            });\r\n        },\r\n        async getFixcost(rec) {\r\n            this.import_detail.fixcost_auto_id = await rec.fixcost_auto_id;\r\n            // --- ตรวจเช็คประเภทราคา ---\r\n            if (await this.set_product_price == 1) {\r\n                this.import_detail.product_price = rec.price1;\r\n            }\r\n            else if (await this.set_product_price == 2) {\r\n                this.import_detail.product_price = rec.price2;\r\n            }\r\n            // ------------------------\r\n            this.fixcost_detail = await rec.pro_type_name + \" / \" + rec.pro_detail + \" / \" +\r\n                rec.rub_size_id + \" / \" + rec.rub_style_detail + \" / \" + rec.rub_grade_name + \" / \" +\r\n                this.func.numFormat(this.import_detail.product_price);\r\n        },\r\n        getProductCost(val) {\r\n            axios.get(`productcost/readprotype/${val}`).then((response) => {\r\n                this.product_cost = response.data;\r\n                $(document).ready(() => {\r\n                    $(\"#showproductcost\").DataTable({\r\n                        \"order\": [[0, 'asc']],\r\n                        \"scrollY\": '250px',\r\n                        \"scorllX\": false,\r\n                        \"bJQueryUI\": true,\r\n                        \"sPaginationType\": \"full_numbers\",\r\n                        \"bFilter\": true,\r\n                        \"paging\": false,\r\n                        \"scrollCollapse\": true,\r\n                        \"rowReorder\": true,\r\n                        destroy: true,\r\n                        language: {\r\n                            decimal: \"\",\r\n                            emptyTable: \"ไม่พบการข้อมูลจากฐานข้อมูล\",\r\n                            info: \"พบข้อมูล _TOTAL_ เรคอร์ด\",\r\n                            // \"info\": \"แสดง _START_ - _END_ แถว จากทั้งหมด _TOTAL_ แถว\",\r\n                            infoEmpty: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            infoFiltered: \"(จากข้อมูลทั้งหมด _MAX_ เรคอร์ด)\",\r\n                            infoPostFix: \"\",\r\n                            thousands: \",\",\r\n                            lengthMenu: \"แสดงครั้งละ _MENU_ เรคอร์ด\",\r\n                            loadingRecords: \"Loading...\",\r\n                            processing: \"\",\r\n                            search: \"ค้นหาข้อมูล:\",\r\n                            zeroRecords: \"ไม่พบข้อมูลที่ค้นหา\",\r\n                            paginate: {\r\n                                first: \"หน้าแรก\",\r\n                                last: \"หน้าสุดท้าย\",\r\n                                next: \"ต่อไป\",\r\n                                previous: \"ย้อนกลับ\",\r\n                            },\r\n                            aria: {\r\n                                sortAscending: \": activate to sort column ascending\",\r\n                                sortDescending: \": activate to sort column descending\",\r\n                            },\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n/*  */\r\n.import-header {\r\n    font-weight: bold;\r\n    color: blue;\r\n}\r\n\r\ninput[type=\"text\"]:disabled {\r\n    background: #e2e2e2;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}